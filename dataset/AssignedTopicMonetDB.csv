,Id,Title,Body,RatingsSentiCR,RatingsGPT35,RatingsGPTFineTuned,merged,topic
0,10087647,monetdb - anyone uses it in production?,"I am very interested in using monetdb as a datamart, holding some huge data tables for querying and reporting

However, after some searching, I am unable to find any online posts / blogs regarding their use of Monetdb in any kind of production capacity.

Also, there seems to be little or next to no activity online regarding Monetdb.

Is this a bad sign for the future of Monetdb ?
",1,-1,-1.0,"monetdb - anyone uses it in production?-I am very interested in using monetdb as a datamart, holding some huge data tables for querying and reporting

However, after some searching, I am unable to find any online posts / blogs regarding their use of Monetdb in any kind of production capacity.

Also, there seems to be little or next to no activity online regarding Monetdb.

Is this a bad sign for the future of Monetdb ?
",5
1,10860452,How to discover the columns for a given index or key in MonetDB,"MonetDB seems to support a fairly comprehensive set of system catalog views in order to discover the schema structure of the database.  Unfortunately, I can't seem to find a SQL query that will obtain the set of columns for a given key or index.  Here are the system tables/views are reported by the Tables table:

schemas
types
functions
args
sequences
dependencies
connections
_tables
_columns
keys
idxs
triggers
objects
tables
columns
db_user_info
users
user_role
auths
privileges
queryhistory
callhistory
querylog
systemfunctions

I tried dependencies, but the IDs don't seem to match up.  BTW, I did try looking in the source code, but I haven't yet found where the system views are created and maintained.
",-1,-1,-1.0,"How to discover the columns for a given index or key in MonetDB-MonetDB seems to support a fairly comprehensive set of system catalog views in order to discover the schema structure of the database.  Unfortunately, I can't seem to find a SQL query that will obtain the set of columns for a given key or index.  Here are the system tables/views are reported by the Tables table:

schemas
types
functions
args
sequences
dependencies
connections
_tables
_columns
keys
idxs
triggers
objects
tables
columns
db_user_info
users
user_role
auths
privileges
queryhistory
callhistory
querylog
systemfunctions

I tried dependencies, but the IDs don't seem to match up.  BTW, I did try looking in the source code, but I haven't yet found where the system views are created and maintained.
",4
2,11444703,Node.js and ODBC for MonetDB,"I am trying to use odbc to connect to monetDB in node.js. However, I keep getting the following error:

The driver reported the following diagnostics whilst running SQLDriverConnect

IM002:1:0:[unixODBC][Driver Manager]Data source name not found, and no default driver      specified
DEBUG: []


Here is the source code:

var sys  = require(""util"");
var odbc = require(""/home/vash/node_modules/odbc/odbc.js"");

var db = new odbc.Database();
db.open(""Driver={ODBC for MonetDB};Setup=/usr/lib/libMonetODBCs.so;UsageCount= 1;SERVER=vash-G75VW;USER=monetdb;PASSWORD=monetdb;PORT=5000;DATABASE=demo"", function(err)
{
    db.query(""select * from demo"", function(err, rows, moreResultSets)
    {
        sys.debug(sys.inspect(rows));
        db.close(function(){});
    });
});


Using the command ""isql -v monetdb"", I can connect to monetDB using ODBC with the following odbc.ini and odbcinst.ini contents:

[monetdb]
Description             = ""ODBC for MonetDB""
Driver          = /usr/lib/libMonetODBC.so
Setup           = /usr/lib/libMonetODBCs.so
UsageCount              = 1
SERVER = vash-G75VW
USER = monetdb
PASSWORD = monetdb
PORT = 5000 
DATABASE = demo


Since I connect using isql, I am guessing the problem lies in the line of code:

""Driver={ODBC for MonetDB};Setup=/usr/lib/libMonetODBCs.so;UsageCount= 1;SERVER=vash-G75VW;USER=monetdb;PASSWORD=monetdb;PORT=5000;DATABASE=demo""


Any ideas what's wrong, and do I have the connection string above set properly?
",-1,-1,-1.0,"Node.js and ODBC for MonetDB-I am trying to use odbc to connect to monetDB in node.js. However, I keep getting the following error:

The driver reported the following diagnostics whilst running SQLDriverConnect

IM002:1:0:[unixODBC][Driver Manager]Data source name not found, and no default driver      specified
DEBUG: []


Here is the source code:

var sys  = require(""util"");
var odbc = require(""/home/vash/node_modules/odbc/odbc.js"");

var db = new odbc.Database();
db.open(""Driver={ODBC for MonetDB};Setup=/usr/lib/libMonetODBCs.so;UsageCount= 1;SERVER=vash-G75VW;USER=monetdb;PASSWORD=monetdb;PORT=5000;DATABASE=demo"", function(err)
{
    db.query(""select * from demo"", function(err, rows, moreResultSets)
    {
        sys.debug(sys.inspect(rows));
        db.close(function(){});
    });
});


Using the command ""isql -v monetdb"", I can connect to monetDB using ODBC with the following odbc.ini and odbcinst.ini contents:

[monetdb]
Description             = ""ODBC for MonetDB""
Driver          = /usr/lib/libMonetODBC.so
Setup           = /usr/lib/libMonetODBCs.so
UsageCount              = 1
SERVER = vash-G75VW
USER = monetdb
PASSWORD = monetdb
PORT = 5000 
DATABASE = demo


Since I connect using isql, I am guessing the problem lies in the line of code:

""Driver={ODBC for MonetDB};Setup=/usr/lib/libMonetODBCs.so;UsageCount= 1;SERVER=vash-G75VW;USER=monetdb;PASSWORD=monetdb;PORT=5000;DATABASE=demo""


Any ideas what's wrong, and do I have the connection string above set properly?
",3
3,11517507,php_monetdb.dll,"I need the php_monetdb.dll for php 5.4. I've found that by building the monetDB with the HAVE_PHP=1 option on windows will create the dll, but the build procedure fails at numerous points. I am using the monetdb source from sourceforge which is a little outdated one. The newer version has problems in the .msc files itself so proceeding to the build itself is a pain. The older version that I am trying on is atleast passing the nmake step but failing on the nmake install step. The reasons vary from component to component. One states that the devenv  /build does not exist. For this I copied the vcexpress and renamed it to devenv. I am not sure if this is right but when I run it from the command prompt it seems to work ok with a few warning alerts shown. During other make installs, the header files seem to be missing. Could anyone please help me with this. Also please let me know if there is any other alternative for this approach of getting php_monetdb.dll.

P.S: I am using windows 7, MSVC 10 express, PHP 5.4.4
",-1,-1,-1.0,"php_monetdb.dll-I need the php_monetdb.dll for php 5.4. I've found that by building the monetDB with the HAVE_PHP=1 option on windows will create the dll, but the build procedure fails at numerous points. I am using the monetdb source from sourceforge which is a little outdated one. The newer version has problems in the .msc files itself so proceeding to the build itself is a pain. The older version that I am trying on is atleast passing the nmake step but failing on the nmake install step. The reasons vary from component to component. One states that the devenv  /build does not exist. For this I copied the vcexpress and renamed it to devenv. I am not sure if this is right but when I run it from the command prompt it seems to work ok with a few warning alerts shown. During other make installs, the header files seem to be missing. Could anyone please help me with this. Also please let me know if there is any other alternative for this approach of getting php_monetdb.dll.

P.S: I am using windows 7, MSVC 10 express, PHP 5.4.4
",3
4,12654775,"MonetDB + JDBC ""no such database""","So I'm working on getting MonetDB hooked up with JDBC but am having issues even with the basic tutorial. I'm probably doing something wrong here and maybe someone could point me in the right direction (that would be greatly appreciated!). 

So the commands I'm running are:

monetdbd start /dbfarm
monetdb create test1
monetdb release test1
java -jar /jars/jdbcclient.jar -u monetdb -d test1

password:
Database connect failed: no such database 'test1', please create first


--

This seems odd to me because I can access test1 via mclient -u monetdb -d test1.

TIA
",-1,-1,-1.0,"MonetDB + JDBC ""no such database""-So I'm working on getting MonetDB hooked up with JDBC but am having issues even with the basic tutorial. I'm probably doing something wrong here and maybe someone could point me in the right direction (that would be greatly appreciated!). 

So the commands I'm running are:

monetdbd start /dbfarm
monetdb create test1
monetdb release test1
java -jar /jars/jdbcclient.jar -u monetdb -d test1

password:
Database connect failed: no such database 'test1', please create first


--

This seems odd to me because I can access test1 via mclient -u monetdb -d test1.

TIA
",3
5,15574886,Is it possible to create a node.js module which uses c libraries for monetdb connection?,"I am trying to connect monetdb with node.js. I have a simple (20 line) c program which can query moentdb using mapi libraries.

Can I use those libraries to build something(module/addon) for node.js which uses these libraries and connect to monetdb?

(using odbc is an option but it have its own disadvantages.)

Update1 :
node-ffi is pretty awesome. I was able to create a fetch table program pretty easily. (I have added my working code for example.)

So if I have 3 options
1. ODBC
2. node-ffi
3. a c program to fetch database data and listens to connection from node.js through socket  

In terms of performance which is better option to implement, if I have little less time to develop a addon for node.js

var ffi = require(""ffi"");
var libmylibrary = ffi.Library('/usr/local/lib/libmapi.so', {
    ""mapi_connect"":[""int"",[""string"",'int',""string"",""string"",""string"",""string""]],
    ""mapi_query"":['int',[""int"",""string""]],
    ""mapi_fetch_row"":[""int"",[""int""]],
    ""mapi_fetch_field"":[""string"",[""int"",""int""]]
});


var res = libmylibrary.mapi_connect(""localhost"", 50000,""monetdb"", ""monetdb"", ""sql"", ""demo"");
console.log(res);
var ret=libmylibrary.mapi_query(res,""select * from table"");
while(libmylibrary.mapi_fetch_row(ret)){
    console.log(libmylibrary.mapi_fetch_field(ret,0));
    console.log(libmylibrary.mapi_fetch_field(ret,1));
}


Update 2:
Above code is not recommended for production use...it does not use async functionality of node.js so please use it for baby steps
",1,1,-1.0,"Is it possible to create a node.js module which uses c libraries for monetdb connection?-I am trying to connect monetdb with node.js. I have a simple (20 line) c program which can query moentdb using mapi libraries.

Can I use those libraries to build something(module/addon) for node.js which uses these libraries and connect to monetdb?

(using odbc is an option but it have its own disadvantages.)

Update1 :
node-ffi is pretty awesome. I was able to create a fetch table program pretty easily. (I have added my working code for example.)

So if I have 3 options
1. ODBC
2. node-ffi
3. a c program to fetch database data and listens to connection from node.js through socket  

In terms of performance which is better option to implement, if I have little less time to develop a addon for node.js

var ffi = require(""ffi"");
var libmylibrary = ffi.Library('/usr/local/lib/libmapi.so', {
    ""mapi_connect"":[""int"",[""string"",'int',""string"",""string"",""string"",""string""]],
    ""mapi_query"":['int',[""int"",""string""]],
    ""mapi_fetch_row"":[""int"",[""int""]],
    ""mapi_fetch_field"":[""string"",[""int"",""int""]]
});


var res = libmylibrary.mapi_connect(""localhost"", 50000,""monetdb"", ""monetdb"", ""sql"", ""demo"");
console.log(res);
var ret=libmylibrary.mapi_query(res,""select * from table"");
while(libmylibrary.mapi_fetch_row(ret)){
    console.log(libmylibrary.mapi_fetch_field(ret,0));
    console.log(libmylibrary.mapi_fetch_field(ret,1));
}


Update 2:
Above code is not recommended for production use...it does not use async functionality of node.js so please use it for baby steps
",3
6,16208576,How to convert a unix timestamp (INT) to monetdb timestamp ('YYYY-MM-DD HH:MM:SS') local time format,"Q1: I want to convert a unix timestamp (INT) to monetdb timestamp ('YYYY-MM-DD HH:MM:SS') format
but it is giving me the GMT time not my actual time.

When I do  

select (epoch(cast(current_timestamp as timestamp))-epoch(timestamp '2013-04-25 11:49:00'))


where 2013-04-25 11:49:00 is my systems current time it gives the same difference

I tried using  

set time zone interval '05:30' HOUR TO MINUTE;


but it did not change the result

How can I solve this problem??

Example Problem:
I wanted to convert unix timestamp 1366869289 which should be around ""2013-04-25 11:25:00"" but monetdb gives ""2013-04-25 05:55:00""
",-1,-1,-1.0,"How to convert a unix timestamp (INT) to monetdb timestamp ('YYYY-MM-DD HH:MM:SS') local time format-Q1: I want to convert a unix timestamp (INT) to monetdb timestamp ('YYYY-MM-DD HH:MM:SS') format
but it is giving me the GMT time not my actual time.

When I do  

select (epoch(cast(current_timestamp as timestamp))-epoch(timestamp '2013-04-25 11:49:00'))


where 2013-04-25 11:49:00 is my systems current time it gives the same difference

I tried using  

set time zone interval '05:30' HOUR TO MINUTE;


but it did not change the result

How can I solve this problem??

Example Problem:
I wanted to convert unix timestamp 1366869289 which should be around ""2013-04-25 11:25:00"" but monetdb gives ""2013-04-25 05:55:00""
",4
7,17531428,Bind variables in case statement in MonetDB,"I seem to have come across a strange restriction in using bind variables in MonetDB. If i use bind variables in the normal way by saying where field=${var} then it works. But not in this case:

Here is a sample:

select case when ${Brand} = 'All'


And here is the error:

EXEC: wrong type for argument 1 of prepared statement: char, expected char


Using the latest version of the jdbc driver (2.9) via Pentaho.
",-1,-1,-1.0,"Bind variables in case statement in MonetDB-I seem to have come across a strange restriction in using bind variables in MonetDB. If i use bind variables in the normal way by saying where field=${var} then it works. But not in this case:

Here is a sample:

select case when ${Brand} = 'All'


And here is the error:

EXEC: wrong type for argument 1 of prepared statement: char, expected char


Using the latest version of the jdbc driver (2.9) via Pentaho.
",5
8,19661538,How can I rename a table in MonetDB?,"How can I rename a table in monetdb?
The typical SQL statement ALTER TABLE name RENAME TO new_name is not supported.
",0,-1,-1.0,"How can I rename a table in MonetDB?-How can I rename a table in monetdb?
The typical SQL statement ALTER TABLE name RENAME TO new_name is not supported.
",4
9,19943079,A MonetDB User Defined Function with two double parameters,"I am trying to evaluate the performance of MonetDB for an analytical workload that contains a large amount of floating point calculations which are used in an aggregation.

I am trying to implement a C based UDF in MonetDB to achieve this and am running into an error.  I am unsure of how to implement the function correctly based on my required signature which is 

double f(double,double);


Firstly, I am using MonetDB-11.15.17 built from source on Ubuntu 13.04.

I have added to the following files in the ./sql/backends/monet5/UDF directory as shown:

udf.c:

str UDFtest(flt *ret,flt *_p1,flt *_p2)
{
    *ret = *_p1+*_p2;
    return MAL_SUCCEED;
}


udf.h:

udf_export str UDFtest(flt *,flt*,flt*);


udf.mal:

module udf;
command calc_test(one:flt,two:flt):flt
address UDFtest
comment ""udf floating point test"";


80_udf.sql:

create function calc_test(one double,two double)
returns double external name udf.calc_test;


I then ran , bootstrap; make; sudo make install; and typed the following at the mclient prompt:

declare f1 float;
declare f2 float;
set f1=0.1;
set f2=0.2;
select calc_test(f1,f2);


This results in the following error:

TypeException:user.s1_1[6]:'udf.calc_test' undefined in: _9:any := udf.calc_test(_5:dbl, _8:dbl)
program contains errors


I've tried to piece together what I can from the documentation and source but am now stuck.
Where have I gone wrong in this process?
",-1,-1,-1.0,"A MonetDB User Defined Function with two double parameters-I am trying to evaluate the performance of MonetDB for an analytical workload that contains a large amount of floating point calculations which are used in an aggregation.

I am trying to implement a C based UDF in MonetDB to achieve this and am running into an error.  I am unsure of how to implement the function correctly based on my required signature which is 

double f(double,double);


Firstly, I am using MonetDB-11.15.17 built from source on Ubuntu 13.04.

I have added to the following files in the ./sql/backends/monet5/UDF directory as shown:

udf.c:

str UDFtest(flt *ret,flt *_p1,flt *_p2)
{
    *ret = *_p1+*_p2;
    return MAL_SUCCEED;
}


udf.h:

udf_export str UDFtest(flt *,flt*,flt*);


udf.mal:

module udf;
command calc_test(one:flt,two:flt):flt
address UDFtest
comment ""udf floating point test"";


80_udf.sql:

create function calc_test(one double,two double)
returns double external name udf.calc_test;


I then ran , bootstrap; make; sudo make install; and typed the following at the mclient prompt:

declare f1 float;
declare f2 float;
set f1=0.1;
set f2=0.2;
select calc_test(f1,f2);


This results in the following error:

TypeException:user.s1_1[6]:'udf.calc_test' undefined in: _9:any := udf.calc_test(_5:dbl, _8:dbl)
program contains errors


I've tried to piece together what I can from the documentation and source but am now stuck.
Where have I gone wrong in this process?
",0
10,21462687,Cannot create a database on a fresh installed monetdb,"I'm new using MonetDB. I've follow this installation guide http://www.monetdb.org/Documentation/Guide/Installation
and I'm facing a problem to just create a database. Here is the error

monetdb create /tmp/c
monetdb: cannot find a control socket, use -h and/or -p


Ruuning the command with option -por -h didn't change anything

monetdb -p create /tmp/c
monetdb: cannot find a control socket, use -h and/or -p


can come one help me ?
",-1,-1,-1.0,"Cannot create a database on a fresh installed monetdb-I'm new using MonetDB. I've follow this installation guide http://www.monetdb.org/Documentation/Guide/Installation
and I'm facing a problem to just create a database. Here is the error

monetdb create /tmp/c
monetdb: cannot find a control socket, use -h and/or -p


Ruuning the command with option -por -h didn't change anything

monetdb -p create /tmp/c
monetdb: cannot find a control socket, use -h and/or -p


can come one help me ?
",5
11,21580865,Is MonetDB.R's `na.omit` broken?,"I think there's a bug in how MonetDB.R filters NAs, see example code below:

Handy utility function for doing general SQL-queries on monet.frame objects:

#' Apply general SQL queries to a monet.frame object and return the 
#' result in a new monet.frame.
#' 
#' @note Likely to break if  \code{attr(data, ""query"")} contains 
#'      LIMIT or OFFSET statements.
#' 
#' @param _data a monet.frame object
#' @param query an SQL query, using ""_DATA_"" as the placeholder for the
#'     name of the table underlying the \code{_data}-object.
#' @param keep_order should ORDER BY statements in the original query be kept? 
#'     Will break if columns in the ORDER BY statement are not in the returned 
#'     table.
#' @importFrom stringr str_extract_all 
#' @export   
transform.monet.frame &lt;- function(`_data`, query, keep_order=TRUE, ...){
    stopifnot(require(stringr))
    nm &lt;- paste(sample(letters, 15, rep=TRUE), collapse="""")
    oldquery &lt;- attr(`_data`, ""query"")
    if(has_order &lt;- grepl(""(ORDER BY)"", attr(`_data`, ""query""))){
        pattern &lt;- ""(ORDER BY[[:space:]]+[[:alnum:]]+((,[[:space:]]*[[:alnum:]]+)*))""
        pattern &lt;- ignore.case(pattern)
        orderby &lt;- str_extract_all(oldquery, pattern)[[1]]
        oldquery &lt;- gsub(pattern, """", oldquery, ignore.case = TRUE)
    } 
    query &lt;- gsub(""_DATA_"", paste(""("", oldquery, "") AS"", nm), query)
    if(has_order &amp; keep_order) query &lt;- paste(query, orderby)
    monet.frame(attr(`_data`, ""conn""), query)
}


Example:

# library(MonetDB.R); monetdb &lt;- dbConnect( MonetDB.R(), ... etc
set.seed(1212)
tablename &lt;- paste(sample(letters, 10), collapse="""")
data  &lt;- data.frame(x=rnorm(100), f=gl(2, 50))

# introduce some NAs ...
data$xna &lt;- data$x
data$xna[1:10] &lt;- NA

dbWriteTable(monetdb, tablename, data)
dm &lt;- monet.frame(monetdb, tablename)   

str(na.omit(dm$xna))
# MonetDB-backed data.frame surrogate
# 1 column, 100 rows
# Query: SELECT xna FROM gcxinabtme WHERE (  NOT (('xna') IS NULL) ) 
# Columns: xna (numeric)


100 rows !?! should be 90...

nrow(transform(dm, ""SELECT xna FROM _DATA_ WHERE (xna IS NOT NULL)""))
# 90 
## as it should be
nrow(transform(dm, ""SELECT xna FROM _DATA_ WHERE ('xna' IS NOT NULL)""))
# 100
## so quoting the column name seems to mess this up..   


I think I understand why quoting the column name is necessary (so this works for non-standard column names as well, right?), but why would this mess up the query result? Shouldn't these two be perfectly equivalent queries? Also, if it's really necessary to quote the column names, why is the first occurence of xna not quoted in 

# Query: SELECT xna FROM gcxinabtme WHERE (  NOT (('xna') IS NULL) ) 


I noticed this because it also makes other monet.frame-methods behave unexpectedly, e.g.:

 quantile(dm$xna, na.rm=TRUE)
 # 0%        25%        50%        75%       100% 
 # NA -0.9974738 -0.3033412  0.4272321  2.6715264 




EDITED to add:

na.fail seems to be broken as well: 

It does not raise an error, but instead returns NULL when applied to a column holding NAs, with a  cryptic warning that would indicate at first glance that there are, in fact, no NAs:

str(na.fail(dm$xna))
# NULL
# Warning message:
# In monet.frame.internal(attr(x, ""conn""), nquery, .is.debug(x), nrow.hint = NA,  :
#   SELECT xna FROM gcxinabtme WHERE ( ('xna') IS NULL )  has zero-row result set.


If there are no NAs, na.fail() should return its argument unchanged according to the generic's documentation, but it doesn't do that either:

str(na.fail(dm$x))
# NULL
# Warning message:
# In monet.frame.internal(attr(x, ""conn""), nquery, .is.debug(x), nrow.hint = NA,  :
#   SELECT x FROM gcxinabtme WHERE ( ('x') IS NULL )  has zero-row result set.

",-1,-1,-1.0,"Is MonetDB.R's `na.omit` broken?-I think there's a bug in how MonetDB.R filters NAs, see example code below:

Handy utility function for doing general SQL-queries on monet.frame objects:

#' Apply general SQL queries to a monet.frame object and return the 
#' result in a new monet.frame.
#' 
#' @note Likely to break if  \code{attr(data, ""query"")} contains 
#'      LIMIT or OFFSET statements.
#' 
#' @param _data a monet.frame object
#' @param query an SQL query, using ""_DATA_"" as the placeholder for the
#'     name of the table underlying the \code{_data}-object.
#' @param keep_order should ORDER BY statements in the original query be kept? 
#'     Will break if columns in the ORDER BY statement are not in the returned 
#'     table.
#' @importFrom stringr str_extract_all 
#' @export   
transform.monet.frame &lt;- function(`_data`, query, keep_order=TRUE, ...){
    stopifnot(require(stringr))
    nm &lt;- paste(sample(letters, 15, rep=TRUE), collapse="""")
    oldquery &lt;- attr(`_data`, ""query"")
    if(has_order &lt;- grepl(""(ORDER BY)"", attr(`_data`, ""query""))){
        pattern &lt;- ""(ORDER BY[[:space:]]+[[:alnum:]]+((,[[:space:]]*[[:alnum:]]+)*))""
        pattern &lt;- ignore.case(pattern)
        orderby &lt;- str_extract_all(oldquery, pattern)[[1]]
        oldquery &lt;- gsub(pattern, """", oldquery, ignore.case = TRUE)
    } 
    query &lt;- gsub(""_DATA_"", paste(""("", oldquery, "") AS"", nm), query)
    if(has_order &amp; keep_order) query &lt;- paste(query, orderby)
    monet.frame(attr(`_data`, ""conn""), query)
}


Example:

# library(MonetDB.R); monetdb &lt;- dbConnect( MonetDB.R(), ... etc
set.seed(1212)
tablename &lt;- paste(sample(letters, 10), collapse="""")
data  &lt;- data.frame(x=rnorm(100), f=gl(2, 50))

# introduce some NAs ...
data$xna &lt;- data$x
data$xna[1:10] &lt;- NA

dbWriteTable(monetdb, tablename, data)
dm &lt;- monet.frame(monetdb, tablename)   

str(na.omit(dm$xna))
# MonetDB-backed data.frame surrogate
# 1 column, 100 rows
# Query: SELECT xna FROM gcxinabtme WHERE (  NOT (('xna') IS NULL) ) 
# Columns: xna (numeric)


100 rows !?! should be 90...

nrow(transform(dm, ""SELECT xna FROM _DATA_ WHERE (xna IS NOT NULL)""))
# 90 
## as it should be
nrow(transform(dm, ""SELECT xna FROM _DATA_ WHERE ('xna' IS NOT NULL)""))
# 100
## so quoting the column name seems to mess this up..   


I think I understand why quoting the column name is necessary (so this works for non-standard column names as well, right?), but why would this mess up the query result? Shouldn't these two be perfectly equivalent queries? Also, if it's really necessary to quote the column names, why is the first occurence of xna not quoted in 

# Query: SELECT xna FROM gcxinabtme WHERE (  NOT (('xna') IS NULL) ) 


I noticed this because it also makes other monet.frame-methods behave unexpectedly, e.g.:

 quantile(dm$xna, na.rm=TRUE)
 # 0%        25%        50%        75%       100% 
 # NA -0.9974738 -0.3033412  0.4272321  2.6715264 




EDITED to add:

na.fail seems to be broken as well: 

It does not raise an error, but instead returns NULL when applied to a column holding NAs, with a  cryptic warning that would indicate at first glance that there are, in fact, no NAs:

str(na.fail(dm$xna))
# NULL
# Warning message:
# In monet.frame.internal(attr(x, ""conn""), nquery, .is.debug(x), nrow.hint = NA,  :
#   SELECT xna FROM gcxinabtme WHERE ( ('xna') IS NULL )  has zero-row result set.


If there are no NAs, na.fail() should return its argument unchanged according to the generic's documentation, but it doesn't do that either:

str(na.fail(dm$x))
# NULL
# Warning message:
# In monet.frame.internal(attr(x, ""conn""), nquery, .is.debug(x), nrow.hint = NA,  :
#   SELECT x FROM gcxinabtme WHERE ( ('x') IS NULL )  has zero-row result set.

",4
12,21682319,How do you reference monetdb odbc driver for .net,"I'm trying to access a monetdb from a .net application - to see if it's feasible for me to use.  I have the ODBC Driver downloaded and installed on my machine (from monetDB.org).  I can't add a reference to it.  My assumption is that the correct file to reference is libMonetODBC.dll and that doesn't work - none of the others work either.  If I try to add a reference to it I get a message - ""A reference to 'C:\Program Files\MonetDB\MonetDB ODBC Driver\lib\libMonetODBC.dll' could not be added.  Please make sure that the file is accessible, and that it is a valid assembly or COM component.""

Has anyone tried this and how did you go about it?  Again, my assumption is that I should be able to reference the dll, like all others, and then add a using/imports statement to use it in the app.  I haven't seen a lot of documentation or other people using it from .net.  MonetDB.org doesn't seem to have steps for it either other than to use it from excel or something.  What am I missing?
",0,-1,-1.0,"How do you reference monetdb odbc driver for .net-I'm trying to access a monetdb from a .net application - to see if it's feasible for me to use.  I have the ODBC Driver downloaded and installed on my machine (from monetDB.org).  I can't add a reference to it.  My assumption is that the correct file to reference is libMonetODBC.dll and that doesn't work - none of the others work either.  If I try to add a reference to it I get a message - ""A reference to 'C:\Program Files\MonetDB\MonetDB ODBC Driver\lib\libMonetODBC.dll' could not be added.  Please make sure that the file is accessible, and that it is a valid assembly or COM component.""

Has anyone tried this and how did you go about it?  Again, my assumption is that I should be able to reference the dll, like all others, and then add a using/imports statement to use it in the app.  I haven't seen a lot of documentation or other people using it from .net.  MonetDB.org doesn't seem to have steps for it either other than to use it from excel or something.  What am I missing?
",5
13,22090964,monetdb - copy into from...requires tables without indices,"I get this error with Monetdb when I try to load .tbl data in tables where there are primary key and foreign key, what's wrong?
This is the command:

COPY INTO monet.CUSTOMER FROM '/home/nicola/Scrivania/ssb-dbgen-master/1gb/customer.tbl' USING DELIMITERS '|', '|\n' LOCKED;

",-1,-1,-1.0,"monetdb - copy into from...requires tables without indices-I get this error with Monetdb when I try to load .tbl data in tables where there are primary key and foreign key, what's wrong?
This is the command:

COPY INTO monet.CUSTOMER FROM '/home/nicola/Scrivania/ssb-dbgen-master/1gb/customer.tbl' USING DELIMITERS '|', '|\n' LOCKED;

",0
14,22115565,View monetdb table content,"How can I view the content of a MONETDB tables ?
In WAMP for example I just type localhost in the browser and there i can see 
All the tables and databases with their content .
But I'm unable to do so in MONETDB , Or to be more accurate I don't know how .
Plus the documentation doesn't provide info on the matter . 
",-1,-1,-1.0,"View monetdb table content-How can I view the content of a MONETDB tables ?
In WAMP for example I just type localhost in the browser and there i can see 
All the tables and databases with their content .
But I'm unable to do so in MONETDB , Or to be more accurate I don't know how .
Plus the documentation doesn't provide info on the matter . 
",5
15,22142170,BATproject error when querying monetdb database,"I'm running into issues when running the following query on a monetdb database:

SELECT
    tpuc.tbl1_col1,
    s.tbl2_col1,
    COUNT(s.tbl2_col2)
FROM
    tbl2 AS s INNER JOIN
    tbl AS tpuc ON (s.tbl2_col2=tpuc.tbl1_col2)
GROUP BY
    tpuc.tbl1_col1,
    s.tbl2_col1



  Can not create object BATproject: does not match always


tbl2 has just a little over 35mil rows and tbl1 has around 300k rows. The query runs flawlessly on a database with an identical structure but considerably less data (about a tenth) so I assume this is related to the amount of data. Does anyone have experience with this error? 

I've ran queries on larger databases than this and monetdb seems to be designed to handle more data so I'm thinking that this is maybe some sort of error on my part / data corruption. However, the error doesn't seem to be documented anywhere so every little bit of insight is appreciated.

later edit:
running into the same error when running simpler queries such as select group by

Thanks
",-1,-1,-1.0,"BATproject error when querying monetdb database-I'm running into issues when running the following query on a monetdb database:

SELECT
    tpuc.tbl1_col1,
    s.tbl2_col1,
    COUNT(s.tbl2_col2)
FROM
    tbl2 AS s INNER JOIN
    tbl AS tpuc ON (s.tbl2_col2=tpuc.tbl1_col2)
GROUP BY
    tpuc.tbl1_col1,
    s.tbl2_col1



  Can not create object BATproject: does not match always


tbl2 has just a little over 35mil rows and tbl1 has around 300k rows. The query runs flawlessly on a database with an identical structure but considerably less data (about a tenth) so I assume this is related to the amount of data. Does anyone have experience with this error? 

I've ran queries on larger databases than this and monetdb seems to be designed to handle more data so I'm thinking that this is maybe some sort of error on my part / data corruption. However, the error doesn't seem to be documented anywhere so every little bit of insight is appreciated.

later edit:
running into the same error when running simpler queries such as select group by

Thanks
",0
16,21779280,CSV load error with monetdb & R,"I'm trying to load various CSVs into monetdb, using R and RStudio but I get the error below.
This is the code (code tested with the iris dataset &amp; generally working fine) and the error message:

&gt; monetdb.read.csv(conn,fnamed,nrows=nrows,header=TRUE,tablename=tabled,delim="","")

/Users/Enzo/NHS/data/sha_lookup.csv /Users/Enzo/NHS/data/sha_lookup.csv 
Error in .local(conn, statement, ...) : 
  Unable to execute statement 'copy 12 offset 2 records into sha_lookup from '/Users/Enzo/NHS/data/sh...'.
Server says '!failed to import table'.


The file I'm trying to load is a short and simple csv:

    SHA,SHAname
    Q30,NORTH EAST STRATEGIC HEALTH AUTHORITY
    Q31,NORTH WEST STRATEGIC HEALTH AUTHORITY
    Q32,YORKSHIRE AND THE HUMBER STRATEGIC HEALTH AUTHORITY
    Q33,EAST MIDLANDS STRATEGIC HEALTH AUTHORITY
    Q34,WEST MIDLANDS STRATEGIC HEALTH AUTHORITY
    Q35,EAST OF ENGLAND STRATEGIC HEALTH AUTHORITY
    Q36,LONDON STRATEGIC HEALTH AUTHORITY
    Q37,SOUTH EAST COAST STRATEGIC HEALTH AUTHORITY
    Q38,SOUTH CENTRAL STRATEGIC HEALTH AUTHORITY
    Q39,SOUTH WEST STRATEGIC HEALTH AUTHORITY


RStudio reads the above CSV file with no issues.  More importantly I can read this CSV into a R dataframe with read.csv, then write a CSV file with write.table.  Now I can load this ""new"" CSV into monetdb using the code above with no problem.

Please note that I tried to edit the file using quotes """" everywhere to see if that was the problem, but I still got the error.
",-1,-1,-1.0,"CSV load error with monetdb & R-I'm trying to load various CSVs into monetdb, using R and RStudio but I get the error below.
This is the code (code tested with the iris dataset &amp; generally working fine) and the error message:

&gt; monetdb.read.csv(conn,fnamed,nrows=nrows,header=TRUE,tablename=tabled,delim="","")

/Users/Enzo/NHS/data/sha_lookup.csv /Users/Enzo/NHS/data/sha_lookup.csv 
Error in .local(conn, statement, ...) : 
  Unable to execute statement 'copy 12 offset 2 records into sha_lookup from '/Users/Enzo/NHS/data/sh...'.
Server says '!failed to import table'.


The file I'm trying to load is a short and simple csv:

    SHA,SHAname
    Q30,NORTH EAST STRATEGIC HEALTH AUTHORITY
    Q31,NORTH WEST STRATEGIC HEALTH AUTHORITY
    Q32,YORKSHIRE AND THE HUMBER STRATEGIC HEALTH AUTHORITY
    Q33,EAST MIDLANDS STRATEGIC HEALTH AUTHORITY
    Q34,WEST MIDLANDS STRATEGIC HEALTH AUTHORITY
    Q35,EAST OF ENGLAND STRATEGIC HEALTH AUTHORITY
    Q36,LONDON STRATEGIC HEALTH AUTHORITY
    Q37,SOUTH EAST COAST STRATEGIC HEALTH AUTHORITY
    Q38,SOUTH CENTRAL STRATEGIC HEALTH AUTHORITY
    Q39,SOUTH WEST STRATEGIC HEALTH AUTHORITY


RStudio reads the above CSV file with no issues.  More importantly I can read this CSV into a R dataframe with read.csv, then write a CSV file with write.table.  Now I can load this ""new"" CSV into monetdb using the code above with no problem.

Please note that I tried to edit the file using quotes """" everywhere to see if that was the problem, but I still got the error.
",0
17,20911458,monetdb - error loading tbl,"Loading the .tbl file I've got this error:

[nicola@localhost ~]$ mclient -d dbmonet  -s  ""COPY  INTO  monet.SUPPLIER  FROM  STDIN  USING  DELIMITERS ',','\\n','\""'"" - &lt; /home/nicola/Scrivania/tabellemonetdb/supplier.tbl
user(nicola):monetdb
password:
missing separator ',' line 0 expecting 6 got 1  fields
failed to import table
current transaction is aborted (please ROLLBACK)
syntax error, unexpected sqlINT in: ""0201""


Why do I get this error?
I'm using an ssb schema.
",-1,-1,-1.0,"monetdb - error loading tbl-Loading the .tbl file I've got this error:

[nicola@localhost ~]$ mclient -d dbmonet  -s  ""COPY  INTO  monet.SUPPLIER  FROM  STDIN  USING  DELIMITERS ',','\\n','\""'"" - &lt; /home/nicola/Scrivania/tabellemonetdb/supplier.tbl
user(nicola):monetdb
password:
missing separator ',' line 0 expecting 6 got 1  fields
failed to import table
current transaction is aborted (please ROLLBACK)
syntax error, unexpected sqlINT in: ""0201""


Why do I get this error?
I'm using an ssb schema.
",0
18,20608127,create a database MonetDB,"I have a problem with the creation of a new database. 
After that I started MonetDB Server, I insert this command: 
mserver5 --dbpath=""C:\database1""

But the server give me this error:
!SintaxException:parseError:mserver5 --dbpath=""C:\database1""
!SintaxException:parseError: ^';' expected

What should i do to resolve this problem? 
Thanks
",-1,-1,-1.0,"create a database MonetDB-I have a problem with the creation of a new database. 
After that I started MonetDB Server, I insert this command: 
mserver5 --dbpath=""C:\database1""

But the server give me this error:
!SintaxException:parseError:mserver5 --dbpath=""C:\database1""
!SintaxException:parseError: ^';' expected

What should i do to resolve this problem? 
Thanks
",3
19,20229981,How to subset monet.frame with %in% properly,"It seems everything is ok if 

subset(mdf, id %in% c(""A"",""B""))


but error if 

ids = c(""A"",""B"")
subset(mdf,id %in% ids)


The following is demo codes:

con1 = dbConnect(dbDriver(""MonetDB""),""monetdb://go:50000/voc"")
d = data.frame(id=base::sample(c(""A"",""B"",""C"",""D""),100,replace=T),v=sample(1:10,100,replace=T),stringsAsFactors=F)
head(d)
str(d)

dbWriteTable(con1, ""test"", d)

mdf &lt;- monet.frame(con1,""test"")
subset(mdf, id %in% c(""A"",""B""))

ids = c(""A"",""B"")
subset(mdf,id %in% ids)


MonetDB.R_0.8.0 DBI_0.2-7   

R version 3.0.2 (2013-09-25)
Platform: x86_64-pc-linux-gnu (64-bit)

The subset(mdf, id %in% c(""A"",""B"")) actually translate to sql as:

MonetDB-backed data.frame surrogate
2 columns, 44 rows
Query: SELECT * FROM test WHERE ( (id IN ('A','B')) ) 
Columns: id (character), v (numeric)


The error message for 
    IDS = c(""A"",""B"")
    subset(mdf,id %in% IDS)

is something like:

Error in .local(conn, statement, ...) : 
  Unable to execute statement 'SELECT COUNT(*) FROM test WHERE ( (id IN 'AB') ) '.
Server says 'syntax error, unexpected STRING, expecting '(' in: ""select count(*) from test where ( (id in 'AB'""' [#42000].


I guess it is a MonetDB.R specific issue.   Just don't know how to circumvent it.

Thanks.
",-1,-1,-1.0,"How to subset monet.frame with %in% properly-It seems everything is ok if 

subset(mdf, id %in% c(""A"",""B""))


but error if 

ids = c(""A"",""B"")
subset(mdf,id %in% ids)


The following is demo codes:

con1 = dbConnect(dbDriver(""MonetDB""),""monetdb://go:50000/voc"")
d = data.frame(id=base::sample(c(""A"",""B"",""C"",""D""),100,replace=T),v=sample(1:10,100,replace=T),stringsAsFactors=F)
head(d)
str(d)

dbWriteTable(con1, ""test"", d)

mdf &lt;- monet.frame(con1,""test"")
subset(mdf, id %in% c(""A"",""B""))

ids = c(""A"",""B"")
subset(mdf,id %in% ids)


MonetDB.R_0.8.0 DBI_0.2-7   

R version 3.0.2 (2013-09-25)
Platform: x86_64-pc-linux-gnu (64-bit)

The subset(mdf, id %in% c(""A"",""B"")) actually translate to sql as:

MonetDB-backed data.frame surrogate
2 columns, 44 rows
Query: SELECT * FROM test WHERE ( (id IN ('A','B')) ) 
Columns: id (character), v (numeric)


The error message for 
    IDS = c(""A"",""B"")
    subset(mdf,id %in% IDS)

is something like:

Error in .local(conn, statement, ...) : 
  Unable to execute statement 'SELECT COUNT(*) FROM test WHERE ( (id IN 'AB') ) '.
Server says 'syntax error, unexpected STRING, expecting '(' in: ""select count(*) from test where ( (id in 'AB'""' [#42000].


I guess it is a MonetDB.R specific issue.   Just don't know how to circumvent it.

Thanks.
",4
20,23811213,"In MonetDB, how can I get the date as an integer?","I want to be able to do something like

SELECT cast(my_date_col AS int) FROM my_table;


I would like to get the integer which MonetDB uses internally, i.e. the value you'd find if you looked into the BAT structure and got the appropriate element in code in MonetDB's GDK. Now, AFAICT, this internal value is the number of days since the Epoch, being Jan 1st on ""Year 0"" (so January 3rdt year 2 would be 366+365+2 = 732).

The best I could actually manage is

SELECT my_date_col AS int - cast('1-1-1' AS date) - 366 FROM my_table;


As MonetDB won't accept ""Year zero"" dates. This is rather an ugly hack, I'd like to do better. Help me?
",1,-1,-1.0,"In MonetDB, how can I get the date as an integer?-I want to be able to do something like

SELECT cast(my_date_col AS int) FROM my_table;


I would like to get the integer which MonetDB uses internally, i.e. the value you'd find if you looked into the BAT structure and got the appropriate element in code in MonetDB's GDK. Now, AFAICT, this internal value is the number of days since the Epoch, being Jan 1st on ""Year 0"" (so January 3rdt year 2 would be 366+365+2 = 732).

The best I could actually manage is

SELECT my_date_col AS int - cast('1-1-1' AS date) - 366 FROM my_table;


As MonetDB won't accept ""Year zero"" dates. This is rather an ugly hack, I'd like to do better. Help me?
",5
21,24188596,variables in SQL for monetdb,"I am confused whether at-sign variables could ever work in MonetDB. Is it standard SQL or only mySQL? (See e.g. this answer here on SO.) MonetDB claims to support SQL:2003 (full feature list here, hard for me to parse), but this is what they say on variables.

The following line fails in MonetDB complaining about the unexpected symbol :. But is there a way to get this work? I see no way to combine a SET (after DECLARE) with SELECT.

SELECT @firstq := QUANTILE(share26_2007,0.25) FROM sys.share26_2007;


(Afterwards, the following is the intended use case:)

SELECT peorglopnr, CASE WHEN share26_2007 &lt; @firstq THEN 1

",1,-1,-1.0,"variables in SQL for monetdb-I am confused whether at-sign variables could ever work in MonetDB. Is it standard SQL or only mySQL? (See e.g. this answer here on SO.) MonetDB claims to support SQL:2003 (full feature list here, hard for me to parse), but this is what they say on variables.

The following line fails in MonetDB complaining about the unexpected symbol :. But is there a way to get this work? I see no way to combine a SET (after DECLARE) with SELECT.

SELECT @firstq := QUANTILE(share26_2007,0.25) FROM sys.share26_2007;


(Afterwards, the following is the intended use case:)

SELECT peorglopnr, CASE WHEN share26_2007 &lt; @firstq THEN 1

",5
22,24190587,"are SQL subqueries within CASE WHEN run once for a query, or for each row?","Basically, is the code below efficient (if I cannot use @ variables in MonetDB), or will this call the subqueries more than once each?

CREATE VIEW sys.share26cuts_2007 (peorglopnr,share26cuts_2007) AS (
SELECT peorglopnr, CASE WHEN share26_2007 &lt; (SELECT QUANTILE(share26_2007,0.25) FROM sys.share26_2007) THEN 1
                        WHEN share26_2007 &lt; (SELECT QUANTILE(share26_2007,0.5) FROM sys.share26_2007) THEN 2
                        WHEN share26_2007 &lt; (SELECT QUANTILE(share26_2007,0.75) FROM sys.share26_2007) THEN 3
                        ELSE 4 END AS share26cuts_2007
FROM sys.share26_2007
);


I would rather not use a user-defined function either, though this came up in other questions.
",-1,-1,-1.0,"are SQL subqueries within CASE WHEN run once for a query, or for each row?-Basically, is the code below efficient (if I cannot use @ variables in MonetDB), or will this call the subqueries more than once each?

CREATE VIEW sys.share26cuts_2007 (peorglopnr,share26cuts_2007) AS (
SELECT peorglopnr, CASE WHEN share26_2007 &lt; (SELECT QUANTILE(share26_2007,0.25) FROM sys.share26_2007) THEN 1
                        WHEN share26_2007 &lt; (SELECT QUANTILE(share26_2007,0.5) FROM sys.share26_2007) THEN 2
                        WHEN share26_2007 &lt; (SELECT QUANTILE(share26_2007,0.75) FROM sys.share26_2007) THEN 3
                        ELSE 4 END AS share26cuts_2007
FROM sys.share26_2007
);


I would rather not use a user-defined function either, though this came up in other questions.
",5
23,24691229,MonetDB multi-tenancy?,"I am evaluating MonetDB for a multi-tenanted OLAP solution. I understand that there is a concept of schema similar to mysql in MonetDb but is it really scalable in terms of schema's. Can I put a reasonable number of schemas and all performing nearly the same or multiple instances of the monetdb server will be needed ?

Also is it scalable in terms of number of indexes? Coz in a multi-tenanted environment our number of indexes will also increase with number of tenants.

I have looked all over to find out about this but could not get a satisfactory answer.
",-1,-1,-1.0,"MonetDB multi-tenancy?-I am evaluating MonetDB for a multi-tenanted OLAP solution. I understand that there is a concept of schema similar to mysql in MonetDb but is it really scalable in terms of schema's. Can I put a reasonable number of schemas and all performing nearly the same or multiple instances of the monetdb server will be needed ?

Also is it scalable in terms of number of indexes? Coz in a multi-tenanted environment our number of indexes will also increase with number of tenants.

I have looked all over to find out about this but could not get a satisfactory answer.
",5
24,24694751,MonetDB.R bulk insert,"Is there a way to do a bulk insert using MonetDB.R (not via a for loop and dbSendUpdate)?

Does dbWriteTable allow for updates (append=TRUE)?

About ""INSERT INTO"" the MonetDB documentation states:
""The benefit is clear: this is very straightforward.  However, this is a seriously inefficient way of doing things in MonetDB.""

Thanks.
",0,-1,-1.0,"MonetDB.R bulk insert-Is there a way to do a bulk insert using MonetDB.R (not via a for loop and dbSendUpdate)?

Does dbWriteTable allow for updates (append=TRUE)?

About ""INSERT INTO"" the MonetDB documentation states:
""The benefit is clear: this is very straightforward.  However, this is a seriously inefficient way of doing things in MonetDB.""

Thanks.
",4
25,26208810,"R > Monetdb, dbConnect error (package Monetdb.R)","I'm getting an error when trying to connect (dbConnect()) from within R to MonetDB (using MonetDB.R). There is a (related SO question) and I also tryed the sugestions there ( (a) use MonetDB.R beta version 0.9.5 or (a) use the regular MonetDB.R but replace DBI package with an earlier version (0.2-7)) without success. 

This is the code and errors: 

library(MonetDB.R)
options( ""monetdb.sequential"" = TRUE )
setwd(""C:/Users/lucas_000/Desktop/Curso R/importa_RAIS"")
batfile &lt;-
  monetdb.server.setup(
    database.directory = paste( getwd() , ""/MonetDB"", sep="""") ,
    monetdb.program.path = 
      ifelse(.Platform$OS.type == ""windows"" , ""C:/Program Files/MonetDB/MonetDB5"" , """" ) ,
    dbname = ""RAIS"" , dbport = 50003
  )

batfile &lt;- ""C:/Users/lucas_000/Desktop/Curso R/importa_RAIS/MonetDB/RAIS.bat""
dbname &lt;- ""RAIS""
dbport &lt;- 50003  
pid &lt;- as.numeric(monetdb.server.start( batfile ))
# output indicates:  MonetDB 5 server v11.17.21 ""Jan2014-SP3""

db &lt;- dbConnect( MonetDB.R() , ""monetdb://localhost:5003/RAIS"" , wait = TRUE )

Assertion Failed!
Program: C\:Program Files\RStudio\bin\x64\rsession.exe
File: mapi.c, Line 91
Expression: IS_INTEGER(port)
#Then RStudio displays an error: ""R Session Aborted""


Sistem details: 
Windows 8.0, on RStudio, Version 0.98.1062

&gt; sessionInfo()
R version 3.1.1 (2014-07-10)
Platform: x86_64-w64-mingw32/x64 (64-bit)

other attached packages:
 [1] R.utils_1.33.0     R.oo_1.18.0        R.methodsS3_1.6.1  downloader_0.3    
 [5] RCurl_1.95-4.3     bitops_1.0-6       sqlsurvey_0.6-11   survey_3.30-3     
 [9] KernSmooth_2.23-12 MonetDB.R_0.9.4    digest_0.6.4       DBI_0.3.1         

loaded via a namespace (and not attached):
[1] tools_3.1.1


Attempted solutions and respective errors: 

a) TRYING TO INSTALL MonetDB.R_0.9.5.zip (beta version)

library(devtools)
remove.packages(""MonetDB.R"")
install_url(""http://homepages.cwi.nl/~hannes/R/MonetDB.R_0.9.5.zip"")

* installing *binary* package 'MonetDB.R' ...
cp: unknown option -- )
Try `/usr/bin/cp --help' for more information.
Aviso: execução do comando 'cp -R . ""C:/Users/lucas_000/Documents/R/win-        library/3.1/MonetDB.R"" || ( tar cd - .| (cd ""C:/Users/lucas_000/Documents/R/win-library/3.1/MonetDB.R"" &amp;&amp; tar -xf -))' teve status 1
ERROR: installing binary package failed
* removing 'C:/Users/lucas_000/Documents/R/win-library/3.1/MonetDB.R'
Error: Command failed (1)       


b) Keeping the MonetDB.R regular version (cran) but changing the DBI to an earlier version (also sugested on SO):

remove.packages(""DBI"")
library(devtools)
install_url(""cran.r-project.org/src/contrib/Archive/DBI/DBI_0.2-7.tar.gz"")
library(DBI)
db &lt;- dbConnect( MonetDB.R() , ""monetdb://localhost:5003/RAIS"" , wait = TRUE )


# gives same error as above, 
    Assertion Failed!
    Program: C:Program Files\RStudio\bin\x64\rsession.exe
    File: mapi.c, Line 91
    Expression: IS_INTEGER(port)
    #Then RStudio displays an error: ""R Session Aborted""
",-1,-1,-1.0,"R > Monetdb, dbConnect error (package Monetdb.R)-I'm getting an error when trying to connect (dbConnect()) from within R to MonetDB (using MonetDB.R). There is a (related SO question) and I also tryed the sugestions there ( (a) use MonetDB.R beta version 0.9.5 or (a) use the regular MonetDB.R but replace DBI package with an earlier version (0.2-7)) without success. 

This is the code and errors: 

library(MonetDB.R)
options( ""monetdb.sequential"" = TRUE )
setwd(""C:/Users/lucas_000/Desktop/Curso R/importa_RAIS"")
batfile &lt;-
  monetdb.server.setup(
    database.directory = paste( getwd() , ""/MonetDB"", sep="""") ,
    monetdb.program.path = 
      ifelse(.Platform$OS.type == ""windows"" , ""C:/Program Files/MonetDB/MonetDB5"" , """" ) ,
    dbname = ""RAIS"" , dbport = 50003
  )

batfile &lt;- ""C:/Users/lucas_000/Desktop/Curso R/importa_RAIS/MonetDB/RAIS.bat""
dbname &lt;- ""RAIS""
dbport &lt;- 50003  
pid &lt;- as.numeric(monetdb.server.start( batfile ))
# output indicates:  MonetDB 5 server v11.17.21 ""Jan2014-SP3""

db &lt;- dbConnect( MonetDB.R() , ""monetdb://localhost:5003/RAIS"" , wait = TRUE )

Assertion Failed!
Program: C\:Program Files\RStudio\bin\x64\rsession.exe
File: mapi.c, Line 91
Expression: IS_INTEGER(port)
#Then RStudio displays an error: ""R Session Aborted""


Sistem details: 
Windows 8.0, on RStudio, Version 0.98.1062

&gt; sessionInfo()
R version 3.1.1 (2014-07-10)
Platform: x86_64-w64-mingw32/x64 (64-bit)

other attached packages:
 [1] R.utils_1.33.0     R.oo_1.18.0        R.methodsS3_1.6.1  downloader_0.3    
 [5] RCurl_1.95-4.3     bitops_1.0-6       sqlsurvey_0.6-11   survey_3.30-3     
 [9] KernSmooth_2.23-12 MonetDB.R_0.9.4    digest_0.6.4       DBI_0.3.1         

loaded via a namespace (and not attached):
[1] tools_3.1.1


Attempted solutions and respective errors: 

a) TRYING TO INSTALL MonetDB.R_0.9.5.zip (beta version)

library(devtools)
remove.packages(""MonetDB.R"")
install_url(""http://homepages.cwi.nl/~hannes/R/MonetDB.R_0.9.5.zip"")

* installing *binary* package 'MonetDB.R' ...
cp: unknown option -- )
Try `/usr/bin/cp --help' for more information.
Aviso: execução do comando 'cp -R . ""C:/Users/lucas_000/Documents/R/win-        library/3.1/MonetDB.R"" || ( tar cd - .| (cd ""C:/Users/lucas_000/Documents/R/win-library/3.1/MonetDB.R"" &amp;&amp; tar -xf -))' teve status 1
ERROR: installing binary package failed
* removing 'C:/Users/lucas_000/Documents/R/win-library/3.1/MonetDB.R'
Error: Command failed (1)       


b) Keeping the MonetDB.R regular version (cran) but changing the DBI to an earlier version (also sugested on SO):

remove.packages(""DBI"")
library(devtools)
install_url(""cran.r-project.org/src/contrib/Archive/DBI/DBI_0.2-7.tar.gz"")
library(DBI)
db &lt;- dbConnect( MonetDB.R() , ""monetdb://localhost:5003/RAIS"" , wait = TRUE )


# gives same error as above, 
    Assertion Failed!
    Program: C:Program Files\RStudio\bin\x64\rsession.exe
    File: mapi.c, Line 91
    Expression: IS_INTEGER(port)
    #Then RStudio displays an error: ""R Session Aborted""
",3
26,26276789,MonetDB - left/right joins too slow than inner join,"I have been comparing MySQL with MonetDB. Obviously, queries that took minutes in MySQL got executed in a matter of few seconds in Monet. 

However, I found a real blockade with joins. 

I have 2 tables - each with 150 columns. Among these (150+150) columns, around 60 are CHARACTER LARGE OBJECT type. Both the tables are populated with around 50,000 rows - with data in all the 150 columns. The average length of data in a CLOB type column is 9,000 (varying from 2 characters to 20,000 characters). The primary key of both the tables have same values and the join is always based on the primary key. The rows are by default inserted in ascending order on the primary key.

When I ran an inner join query on these two tables with about 5 criteria and with limit 1000, Monet processed this query in 5 seconds, which is completely impressive compared to MySQL's (19 seconds). 

But when I ran the same query with same criteria and limits using a left or right joins, Monet took around 5 minutes, which is clearly way behind MySQL's (just 22 seconds). 

I went through the logs using trace statement, but the traces of inner and left joins are more or less the same, except that time for each action is far higher in left join trace. 

Also, the time taken for the same join query execution varies by 2 or 3 seconds when run at several time intervals.

Having read a lot about Monet's speed compared to traditional relation row based DBs, I could feel that I am missing something, but couldn't figure out what. 

Can anyone please tell me why there is such a huge difference in such query execution time and how I can prevent it?

Much grateful to have any help. Thanks a lot in advance. 

P.S.: I am running Monet on Macbook Pro - 2.3 GHz Core i7 - Quad core processor with 8 GB RAM. 
",1,1,-1.0,"MonetDB - left/right joins too slow than inner join-I have been comparing MySQL with MonetDB. Obviously, queries that took minutes in MySQL got executed in a matter of few seconds in Monet. 

However, I found a real blockade with joins. 

I have 2 tables - each with 150 columns. Among these (150+150) columns, around 60 are CHARACTER LARGE OBJECT type. Both the tables are populated with around 50,000 rows - with data in all the 150 columns. The average length of data in a CLOB type column is 9,000 (varying from 2 characters to 20,000 characters). The primary key of both the tables have same values and the join is always based on the primary key. The rows are by default inserted in ascending order on the primary key.

When I ran an inner join query on these two tables with about 5 criteria and with limit 1000, Monet processed this query in 5 seconds, which is completely impressive compared to MySQL's (19 seconds). 

But when I ran the same query with same criteria and limits using a left or right joins, Monet took around 5 minutes, which is clearly way behind MySQL's (just 22 seconds). 

I went through the logs using trace statement, but the traces of inner and left joins are more or less the same, except that time for each action is far higher in left join trace. 

Also, the time taken for the same join query execution varies by 2 or 3 seconds when run at several time intervals.

Having read a lot about Monet's speed compared to traditional relation row based DBs, I could feel that I am missing something, but couldn't figure out what. 

Can anyone please tell me why there is such a huge difference in such query execution time and how I can prevent it?

Much grateful to have any help. Thanks a lot in advance. 

P.S.: I am running Monet on Macbook Pro - 2.3 GHz Core i7 - Quad core processor with 8 GB RAM. 
",4
27,26725061,How to copy table from MS SQL Server 2012 to MonetDB,"Table dump file is about 30Gib. So, when I load its contents into MonetDB, I get several exceptions ( ""Null byte in input"", ""unexpected ON, expecting '=' in: set ansi_nulls on"", unexpected '[' in: ""create table ["" and etc.), because this file is formated in mssql-way. How to copy from mssql to monetDb?

UPD: To copy from csv, I use these scripts in SQuirreL

CREATE TABLE ""PageTracking""(
    ""PageTrackingID"" bigint,
    ""TimeStamp"" date,
    ""Hash"" varchar(50) ,
    ""UserIP"" varchar(16) ,
    ""UserAgent"" varchar(1000) ,
    ""UserID"" varchar(16) ,
    ""SessionID"" varchar(16) ,
    ""Page"" varchar(20) ,
    ""DocId"" int ,
    ""Url"" varchar(500) ,
    ""Referer"" varchar(500) ,
    ""Rank"" int ,
    ""Total"" int 
) 


And then 

COPY OFFSET 2 INTO ""PageTracking"" FROM 'f:\tmp\pagetracking.csv'


When I use MonetDb Client, I receive: 

sql&gt;copy offset 2 into sys.pagetraking from 'f:\tmp\pagetracking.csv';
COPY INTO: no such table 'pagetraking'

",1,-1,-1.0,"How to copy table from MS SQL Server 2012 to MonetDB-Table dump file is about 30Gib. So, when I load its contents into MonetDB, I get several exceptions ( ""Null byte in input"", ""unexpected ON, expecting '=' in: set ansi_nulls on"", unexpected '[' in: ""create table ["" and etc.), because this file is formated in mssql-way. How to copy from mssql to monetDb?

UPD: To copy from csv, I use these scripts in SQuirreL

CREATE TABLE ""PageTracking""(
    ""PageTrackingID"" bigint,
    ""TimeStamp"" date,
    ""Hash"" varchar(50) ,
    ""UserIP"" varchar(16) ,
    ""UserAgent"" varchar(1000) ,
    ""UserID"" varchar(16) ,
    ""SessionID"" varchar(16) ,
    ""Page"" varchar(20) ,
    ""DocId"" int ,
    ""Url"" varchar(500) ,
    ""Referer"" varchar(500) ,
    ""Rank"" int ,
    ""Total"" int 
) 


And then 

COPY OFFSET 2 INTO ""PageTracking"" FROM 'f:\tmp\pagetracking.csv'


When I use MonetDb Client, I receive: 

sql&gt;copy offset 2 into sys.pagetraking from 'f:\tmp\pagetracking.csv';
COPY INTO: no such table 'pagetraking'

",0
28,27061588,How to use JSON in MonetDB,"MonetDB documentation says, that JSON is supported in MonetDB, but I can`t find any example.
When I try to implement this query in MonetDB client:

   json.filter({ ""store"": {    
    ""bicycle"": {
      ""color"": ""red"",
      ""price"": 19.95
    }}},'$')    


I get this error: syntax error, unexpected IDENT in: ""json""
",-1,-1,-1.0,"How to use JSON in MonetDB-MonetDB documentation says, that JSON is supported in MonetDB, but I can`t find any example.
When I try to implement this query in MonetDB client:

   json.filter({ ""store"": {    
    ""bicycle"": {
      ""color"": ""red"",
      ""price"": 19.95
    }}},'$')    


I get this error: syntax error, unexpected IDENT in: ""json""
",0
29,27101046,how to add dll files in monetdb?,"I have installed ""monetdb5"" and i am getting the error,

      ""The program can't start because libmapi.dll is missing from your computer.Try reinstalling the program to fix this problem"" when i tried to open ""mclient.exe"" and 
     ""The program can't start because libmonetdb5.dll is missing from your computer.Try reinstalling the program to fix this problem"" when i tried to open to ""mserver5.exe"".


I have reinstalled many times and still i am getting the same error.Could anyone suggest me the solution   to solve this issue?
",-1,-1,-1.0,"how to add dll files in monetdb?-I have installed ""monetdb5"" and i am getting the error,

      ""The program can't start because libmapi.dll is missing from your computer.Try reinstalling the program to fix this problem"" when i tried to open ""mclient.exe"" and 
     ""The program can't start because libmonetdb5.dll is missing from your computer.Try reinstalling the program to fix this problem"" when i tried to open to ""mserver5.exe"".


I have reinstalled many times and still i am getting the same error.Could anyone suggest me the solution   to solve this issue?
",3
30,27104851,SSL peer handshake fails when installing MonetDB via Homebrew,"I'm installing MonetDB as per the instructions at [1], but Homebrew says the SSL peer handshake fails:

$ brew install monetdb
==&gt; Downloading https://dev.monetdb.org/downloads/sources/Jan2014-SP3/MonetDB-11.17.21.zip

curl: (35) SSL peer handshake failed, the server most likely requires a client certificate to connect
Error: Failed to download resource ""monetdb""
Download failed: https://dev.monetdb.org/downloads/sources/Jan2014-SP3/MonetDB-11.17.21.zip

",-1,-1,-1.0,"SSL peer handshake fails when installing MonetDB via Homebrew-I'm installing MonetDB as per the instructions at [1], but Homebrew says the SSL peer handshake fails:

$ brew install monetdb
==&gt; Downloading https://dev.monetdb.org/downloads/sources/Jan2014-SP3/MonetDB-11.17.21.zip

curl: (35) SSL peer handshake failed, the server most likely requires a client certificate to connect
Error: Failed to download resource ""monetdb""
Download failed: https://dev.monetdb.org/downloads/sources/Jan2014-SP3/MonetDB-11.17.21.zip

",3
31,27770370,Alter the data type of a column in MonetDB,"How can I alter the type of a column in an existing table in MonetDB? According to the documentation the code should be something like

ALTER TABLE &lt;tablename&gt; ALTER COLUMN &lt;columnname&gt; SET ...


but then I am basically lost because I do not know which standard the SQL used by MonetDB follows here and I get a syntax error. If this statement is not possible I would be grateful for a workaround that is not too slow for large (order of 10^9 records) tables.

Note: I ran into this problem while doing some bulk data imports from csv files into a table in my database. One of the columns is of type INT but the values in the file at some point exceed the INT limit of 2^31-1 (yes, the table is big) and so the transaction aborts. After I found out the reason for this failure, I wanted to change it to BIGINT but all versions of SQL code I tried failed.
",-1,-1,-1.0,"Alter the data type of a column in MonetDB-How can I alter the type of a column in an existing table in MonetDB? According to the documentation the code should be something like

ALTER TABLE &lt;tablename&gt; ALTER COLUMN &lt;columnname&gt; SET ...


but then I am basically lost because I do not know which standard the SQL used by MonetDB follows here and I get a syntax error. If this statement is not possible I would be grateful for a workaround that is not too slow for large (order of 10^9 records) tables.

Note: I ran into this problem while doing some bulk data imports from csv files into a table in my database. One of the columns is of type INT but the values in the file at some point exceed the INT limit of 2^31-1 (yes, the table is big) and so the transaction aborts. After I found out the reason for this failure, I wanted to change it to BIGINT but all versions of SQL code I tried failed.
",4
32,27938291,Creating additional dbfarm in MonetDb,"I have created a dbfarm in MonetDb. then I've moved the directory of the dbfarm to another location, and the dbfarm stopped working. So I'm trying to fix that by deleting the old dbfarm and/or creating a new one
The problem is that when trying to create new dbfarm by

monetdbd start newDbfarm/ 


I get the error:

monetdbd: binding to stream socket port 50000 failed: Address already in use


How can I solve this? 

I'm working with the latest monetDb (MonetDB Oct2014 Release)

Update

I've managed to somehow fix this by using 

monetdbd set port=50001 newDbfarm/


before the

monetdbd start newDbfarm/ 


and then I have to always specify the port when using monetdb:

monetdb -p50001 create voc1


Is there a way to just delete the old dbfarm? or change the default so I will always go to the new dbfarm?
",1,-1,-1.0,"Creating additional dbfarm in MonetDb-I have created a dbfarm in MonetDb. then I've moved the directory of the dbfarm to another location, and the dbfarm stopped working. So I'm trying to fix that by deleting the old dbfarm and/or creating a new one
The problem is that when trying to create new dbfarm by

monetdbd start newDbfarm/ 


I get the error:

monetdbd: binding to stream socket port 50000 failed: Address already in use


How can I solve this? 

I'm working with the latest monetDb (MonetDB Oct2014 Release)

Update

I've managed to somehow fix this by using 

monetdbd set port=50001 newDbfarm/


before the

monetdbd start newDbfarm/ 


and then I have to always specify the port when using monetdb:

monetdb -p50001 create voc1


Is there a way to just delete the old dbfarm? or change the default so I will always go to the new dbfarm?
",3
33,27968344,Trouble reading CSV into Monetdb using R,"I am trying to read a CSV file into a Monetdb data base using R Studio server. The CSV file is 13 columns, and a few hundred thousand rows, consisting of 1 column of strings, and 12 columns of integers. When I use the monet.read.csv function:

monet.read.csv(     #Function
  db ,              #Data Base  
  pde ,             #CSV Name
  paste0( 'pde' , substr( year , 3 , 4 ) ) , #Name of new table
  nrows = sapply( pde , countLines )         #Rows in new table
)


I get the following error:


  Error in .local(conn, statement, ...) : 
   Unable to execute statement 'COPY 10000001 OFFSET 2 RECORDS INTO pde08 FROM '/home/jamie/R/x86_64-pc->linux-gnu-library/3.1/Jamie_...'.
  ' from line 1 field 13 not inserted, expecting type int'.


I have tried using the data.table package and dbWriteTable function, so know that Monetdb itself is working. Does anyone know what is going on? Thanks.
",-1,-1,-1.0,"Trouble reading CSV into Monetdb using R-I am trying to read a CSV file into a Monetdb data base using R Studio server. The CSV file is 13 columns, and a few hundred thousand rows, consisting of 1 column of strings, and 12 columns of integers. When I use the monet.read.csv function:

monet.read.csv(     #Function
  db ,              #Data Base  
  pde ,             #CSV Name
  paste0( 'pde' , substr( year , 3 , 4 ) ) , #Name of new table
  nrows = sapply( pde , countLines )         #Rows in new table
)


I get the following error:


  Error in .local(conn, statement, ...) : 
   Unable to execute statement 'COPY 10000001 OFFSET 2 RECORDS INTO pde08 FROM '/home/jamie/R/x86_64-pc->linux-gnu-library/3.1/Jamie_...'.
  ' from line 1 field 13 not inserted, expecting type int'.


I have tried using the data.table package and dbWriteTable function, so know that Monetdb itself is working. Does anyone know what is going on? Thanks.
",0
34,28054606,SQL query using GROUP BY with standard deviation?,"I am having some issues with the standard deviation function (stddev_samp in MonetDB specifically). I tried the following queries without success:

    select industry, avg(marketcap) as industryavg, stddev_samp(marketcap) as industrysd from cumulativeview group by industry
    select  stddev_samp(marketcap) as industrysd from cumulativeview group by industry


Each gives me a very weird exception and it seems the stddev function does not work on a group by subset, however using the avg function alone seems to work just fine on a group by subset as in the following query:

    select industry, avg(marketcap) as industryavg  from cumulativeview group by industry


And the standard deviation function works just fine when i use a where clause instead of a group by:

    select  stddev_samp(marketcap) as industrysd from cumulativeview where industry='Diversified Investments'


Is there an alternate way to write a query that would give me the average and standard deviation for each industry all at once rather than having to go through and write a seperate query for each industry? I am very confused as to why the average function works with group by and stddev does not...
",-1,-1,-1.0,"SQL query using GROUP BY with standard deviation?-I am having some issues with the standard deviation function (stddev_samp in MonetDB specifically). I tried the following queries without success:

    select industry, avg(marketcap) as industryavg, stddev_samp(marketcap) as industrysd from cumulativeview group by industry
    select  stddev_samp(marketcap) as industrysd from cumulativeview group by industry


Each gives me a very weird exception and it seems the stddev function does not work on a group by subset, however using the avg function alone seems to work just fine on a group by subset as in the following query:

    select industry, avg(marketcap) as industryavg  from cumulativeview group by industry


And the standard deviation function works just fine when i use a where clause instead of a group by:

    select  stddev_samp(marketcap) as industrysd from cumulativeview where industry='Diversified Investments'


Is there an alternate way to write a query that would give me the average and standard deviation for each industry all at once rather than having to go through and write a seperate query for each industry? I am very confused as to why the average function works with group by and stddev does not...
",0
35,28118984,WHILE query syntax in MonetDB,"I am using the latest version of MonetDB for Windows and I have installed it on Windows 7.

Hello guys, I have recently started looking into MonetDB. End goal is to prepare prototype to demonstrate the query performance difference between MonetDB and SQL Server. 

I have went through the MonetDB SQL Reference documentation but it is not clear to me that how should I prepare WHILE query. 

Create table query:

sql&gt;CREATE TABLE TestString ( Name VARCHAR(40) NULL );


Declare and set the local variable:

sql&gt;delcare rowcount;
sql&gt;set rowcount=1;


While query I tried:

sql&gt;WHILE rowcount&lt;1000000
sql&gt;DO
sql&gt;insert TestString Values CAST(uuid() as VARCHAR(50))
sql&gt;set rowcount=rowcount+1
sql&gt;END WHILE


I did tried different variations in the while query by specifying indentation
but it still not right. 

Can someone help me with getting the right syntax or point me to any helpful user manual for this?
",1,-1,-1.0,"WHILE query syntax in MonetDB-I am using the latest version of MonetDB for Windows and I have installed it on Windows 7.

Hello guys, I have recently started looking into MonetDB. End goal is to prepare prototype to demonstrate the query performance difference between MonetDB and SQL Server. 

I have went through the MonetDB SQL Reference documentation but it is not clear to me that how should I prepare WHILE query. 

Create table query:

sql&gt;CREATE TABLE TestString ( Name VARCHAR(40) NULL );


Declare and set the local variable:

sql&gt;delcare rowcount;
sql&gt;set rowcount=1;


While query I tried:

sql&gt;WHILE rowcount&lt;1000000
sql&gt;DO
sql&gt;insert TestString Values CAST(uuid() as VARCHAR(50))
sql&gt;set rowcount=rowcount+1
sql&gt;END WHILE


I did tried different variations in the while query by specifying indentation
but it still not right. 

Can someone help me with getting the right syntax or point me to any helpful user manual for this?
",5
36,28120224,MonetDB OR Clause,"I have a very simple query that in the WHERE clause has something like ""employee_id = 60 and (manager in (-1) or -1 in (-1))"" and this will work fine in databases like SQL server, MySQL, Oracle, etc, bringing back the 1 employee_id record.  The -1's represent a prompt value, if nothing select for manager it defaults to -1 and so therefore no filter for manager is effective.

In MonetDB, it will just bring back all records; completely disregarding the employee_id filter.  I have NO idea why and it's driving me nuts.  The full query is below, if anyone has an idea please let me know.
Thanks,
Matt

select employee_id, manager_id
from employee
where employee_id = 60
and (manager_id in (-1) or -1 in (-1)); 

",1,-1,-1.0,"MonetDB OR Clause-I have a very simple query that in the WHERE clause has something like ""employee_id = 60 and (manager in (-1) or -1 in (-1))"" and this will work fine in databases like SQL server, MySQL, Oracle, etc, bringing back the 1 employee_id record.  The -1's represent a prompt value, if nothing select for manager it defaults to -1 and so therefore no filter for manager is effective.

In MonetDB, it will just bring back all records; completely disregarding the employee_id filter.  I have NO idea why and it's driving me nuts.  The full query is below, if anyone has an idea please let me know.
Thanks,
Matt

select employee_id, manager_id
from employee
where employee_id = 60
and (manager_id in (-1) or -1 in (-1)); 

",3
37,28192387,MonetDB - Insert data to one column,"I have a table with 5 columns:

CREATE TABLE ""voc"".""MyTable"" (
        ""c_1""  TINYINT,
        ""c_2""  TINYINT,
        ""c_3""  TINYINT,
        ""c_4""  TINYINT,
        ""c_5""  TINYINT
);


I want to calculate the values for each column in separate, and insert the values for this column only. e.g.

INSERT INTO ""voc"".""MyTable""(c_1)
SELECT ....


This Insert command inserts 5000 rows into MyTable, with the values for c_1 column and null for all the other columns.
If I run now 

INSERT INTO ""voc"".""MyTable""(c_2)
SELECT ....


Then I have another new 5000 rows. And in total - 10000 rows. I want the new values of c_2 to be set in the same rows as c_1. i.e. to have

c_1 | c_2 | c_3 | c_4 | c_5
1     1     null null  null
2     2     null null  null
1     2     null null  null


I thought it would be possible in monetdb because its a columnar db, but so far I didn't find how to do it.
",-1,0,-1.0,"MonetDB - Insert data to one column-I have a table with 5 columns:

CREATE TABLE ""voc"".""MyTable"" (
        ""c_1""  TINYINT,
        ""c_2""  TINYINT,
        ""c_3""  TINYINT,
        ""c_4""  TINYINT,
        ""c_5""  TINYINT
);


I want to calculate the values for each column in separate, and insert the values for this column only. e.g.

INSERT INTO ""voc"".""MyTable""(c_1)
SELECT ....


This Insert command inserts 5000 rows into MyTable, with the values for c_1 column and null for all the other columns.
If I run now 

INSERT INTO ""voc"".""MyTable""(c_2)
SELECT ....


Then I have another new 5000 rows. And in total - 10000 rows. I want the new values of c_2 to be set in the same rows as c_1. i.e. to have

c_1 | c_2 | c_3 | c_4 | c_5
1     1     null null  null
2     2     null null  null
1     2     null null  null


I thought it would be possible in monetdb because its a columnar db, but so far I didn't find how to do it.
",4
38,28476833,"Building error in make step, gdk, libbat.la, MT_global_exit","i'm trying to build MonetDB from source on CentOS. 
Typically the problems occur in the make step, 
I run the configuration as follows

./configure -prefix=$HOME/MonetDB--disable-geom --disable-strict

This works perfectly fine. However, using ""make"" afterwards leads to an error:

...
make[3]: Entering directory `/users/db01/dm/MonetDB/MonetDB-11.19.9/gdk'
/bin/sh ../libtool  --tag=CC   --mode=link gcc -DLIBGDK  -g -O2   -D_REENTRANT -version-info 11:4:0  -o libbat.la -rpath /users/db01/dm/MonetDB/MDB/lib libbat_la-gdk_batop.lo libbat_la-gdk_select.lo libbat_la-gdk_select_legacy.lo libbat_la-gdk_search.lo libbat_la-gdk_tm.lo libbat_la-gdk_align.lo libbat_la-gdk_bbp.lo libbat_la-gdk_heap.lo libbat_la-gdk_setop.lo libbat_la-gdk_utils.lo libbat_la-gdk_atoms.lo libbat_la-gdk_qsort.lo libbat_la-gdk_ssort.lo libbat_la-gdk_storage.lo libbat_la-gdk_bat.lo libbat_la-gdk_delta.lo libbat_la-gdk_cross.lo libbat_la-gdk_system.lo libbat_la-gdk_value.lo libbat_la-gdk_posix.lo libbat_la-gdk_logger.lo libbat_la-gdk_sample.lo libbat_la-gdk_calc.lo libbat_la-gdk_aggr.lo libbat_la-gdk_group.lo libbat_la-gdk_mapreduce.lo libbat_la-gdk_imprints.lo libbat_la-gdk_join.lo libbat_la-gdk_join_legacy.lo libbat_la-gdk_unique.lo libbat_la-gdk_firstn.lo  ../common/options/libmoptions.la ../common/stream/libstream.la ../common/utils/libmutils.la -lm  -lz   -lbz2  -pthread -ldl   
libtool: link: gcc -shared  -fPIC -DPIC  .libs/libbat_la-gdk_batop.o .libs/libbat_la-gdk_select.o .libs/libbat_la-gdk_select_legacy.o .libs/libbat_la-gdk_search.o .libs/libbat_la-gdk_tm.o .libs/libbat_la-gdk_align.o .libs/libbat_la-gdk_bbp.o .libs/libbat_la-gdk_heap.o .libs/libbat_la-gdk_setop.o .libs/libbat_la-gdk_utils.o .libs/libbat_la-gdk_atoms.o .libs/libbat_la-gdk_qsort.o .libs/libbat_la-gdk_ssort.o .libs/libbat_la-gdk_storage.o .libs/libbat_la-gdk_bat.o .libs/libbat_la-gdk_delta.o .libs/libbat_la-gdk_cross.o .libs/libbat_la-gdk_system.o .libs/libbat_la-gdk_value.o .libs/libbat_la-gdk_posix.o .libs/libbat_la-gdk_logger.o .libs/libbat_la-gdk_sample.o .libs/libbat_la-gdk_calc.o .libs/libbat_la-gdk_aggr.o .libs/libbat_la-gdk_group.o .libs/libbat_la-gdk_mapreduce.o .libs/libbat_la-gdk_imprints.o .libs/libbat_la-gdk_join.o .libs/libbat_la-gdk_join_legacy.o .libs/libbat_la-gdk_unique.o .libs/libbat_la-gdk_firstn.o  -Wl,--whole-archive ../common/options/.libs/libmoptions.a ../common/utils/.libs/libmutils.a -Wl,--no-whole-archive  -Wl,-rpath -Wl,/users/db01/dm/MonetDB/MonetDB-11.19.9/common/stream/.libs -Wl,-rpath -Wl,/users/db01/dm/MonetDB/MDB/lib ../common/stream/.libs/libstream.so -L/usr/kerberos/lib64 -lssl -lcrypto -lm -lz -lbz2 -ldl  -O2 -pthread   -pthread -Wl,-soname -Wl,libbat.so.11 -o .libs/libbat.so.11.0.4
/usr/bin/ld: .libs/libbat_la-gdk_utils.o: relocation R_X86_64_PC32 against `MT_global_exit' can not be used when making a shared object; recompile with -fPIC
/usr/bin/ld: final link failed: Bad value
collect2: ld returned 1 exit status
make[3]: *** [libbat.la] Error 1
make[3]: Leaving directory `/users/db01/dm/MonetDB/MonetDB-11.19.9/gdk'
make[2]: *** [all] Error 2
make[2]: Leaving directory `/users/db01/dm/MonetDB/MonetDB-11.19.9/gdk'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/users/db01/dm/MonetDB/MonetDB-11.19.9'
make: *** [all] Error 2


I found a similar error, containing MT_global_exit in the web: https://www.monetdb.org/pipermail/users-list/2014-June/007334.html

Trying the mentioned suggestion by deleting __attribute__((__visibility__(""hidden"")))
from the gdk/gdk_private.h was
lead to several different errors (in gdk_private.h) during the make process.

If you have any suggestions, I'd be happy to hear them!

best regards 
",-1,-1,-1.0,"Building error in make step, gdk, libbat.la, MT_global_exit-i'm trying to build MonetDB from source on CentOS. 
Typically the problems occur in the make step, 
I run the configuration as follows

./configure -prefix=$HOME/MonetDB--disable-geom --disable-strict

This works perfectly fine. However, using ""make"" afterwards leads to an error:

...
make[3]: Entering directory `/users/db01/dm/MonetDB/MonetDB-11.19.9/gdk'
/bin/sh ../libtool  --tag=CC   --mode=link gcc -DLIBGDK  -g -O2   -D_REENTRANT -version-info 11:4:0  -o libbat.la -rpath /users/db01/dm/MonetDB/MDB/lib libbat_la-gdk_batop.lo libbat_la-gdk_select.lo libbat_la-gdk_select_legacy.lo libbat_la-gdk_search.lo libbat_la-gdk_tm.lo libbat_la-gdk_align.lo libbat_la-gdk_bbp.lo libbat_la-gdk_heap.lo libbat_la-gdk_setop.lo libbat_la-gdk_utils.lo libbat_la-gdk_atoms.lo libbat_la-gdk_qsort.lo libbat_la-gdk_ssort.lo libbat_la-gdk_storage.lo libbat_la-gdk_bat.lo libbat_la-gdk_delta.lo libbat_la-gdk_cross.lo libbat_la-gdk_system.lo libbat_la-gdk_value.lo libbat_la-gdk_posix.lo libbat_la-gdk_logger.lo libbat_la-gdk_sample.lo libbat_la-gdk_calc.lo libbat_la-gdk_aggr.lo libbat_la-gdk_group.lo libbat_la-gdk_mapreduce.lo libbat_la-gdk_imprints.lo libbat_la-gdk_join.lo libbat_la-gdk_join_legacy.lo libbat_la-gdk_unique.lo libbat_la-gdk_firstn.lo  ../common/options/libmoptions.la ../common/stream/libstream.la ../common/utils/libmutils.la -lm  -lz   -lbz2  -pthread -ldl   
libtool: link: gcc -shared  -fPIC -DPIC  .libs/libbat_la-gdk_batop.o .libs/libbat_la-gdk_select.o .libs/libbat_la-gdk_select_legacy.o .libs/libbat_la-gdk_search.o .libs/libbat_la-gdk_tm.o .libs/libbat_la-gdk_align.o .libs/libbat_la-gdk_bbp.o .libs/libbat_la-gdk_heap.o .libs/libbat_la-gdk_setop.o .libs/libbat_la-gdk_utils.o .libs/libbat_la-gdk_atoms.o .libs/libbat_la-gdk_qsort.o .libs/libbat_la-gdk_ssort.o .libs/libbat_la-gdk_storage.o .libs/libbat_la-gdk_bat.o .libs/libbat_la-gdk_delta.o .libs/libbat_la-gdk_cross.o .libs/libbat_la-gdk_system.o .libs/libbat_la-gdk_value.o .libs/libbat_la-gdk_posix.o .libs/libbat_la-gdk_logger.o .libs/libbat_la-gdk_sample.o .libs/libbat_la-gdk_calc.o .libs/libbat_la-gdk_aggr.o .libs/libbat_la-gdk_group.o .libs/libbat_la-gdk_mapreduce.o .libs/libbat_la-gdk_imprints.o .libs/libbat_la-gdk_join.o .libs/libbat_la-gdk_join_legacy.o .libs/libbat_la-gdk_unique.o .libs/libbat_la-gdk_firstn.o  -Wl,--whole-archive ../common/options/.libs/libmoptions.a ../common/utils/.libs/libmutils.a -Wl,--no-whole-archive  -Wl,-rpath -Wl,/users/db01/dm/MonetDB/MonetDB-11.19.9/common/stream/.libs -Wl,-rpath -Wl,/users/db01/dm/MonetDB/MDB/lib ../common/stream/.libs/libstream.so -L/usr/kerberos/lib64 -lssl -lcrypto -lm -lz -lbz2 -ldl  -O2 -pthread   -pthread -Wl,-soname -Wl,libbat.so.11 -o .libs/libbat.so.11.0.4
/usr/bin/ld: .libs/libbat_la-gdk_utils.o: relocation R_X86_64_PC32 against `MT_global_exit' can not be used when making a shared object; recompile with -fPIC
/usr/bin/ld: final link failed: Bad value
collect2: ld returned 1 exit status
make[3]: *** [libbat.la] Error 1
make[3]: Leaving directory `/users/db01/dm/MonetDB/MonetDB-11.19.9/gdk'
make[2]: *** [all] Error 2
make[2]: Leaving directory `/users/db01/dm/MonetDB/MonetDB-11.19.9/gdk'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/users/db01/dm/MonetDB/MonetDB-11.19.9'
make: *** [all] Error 2


I found a similar error, containing MT_global_exit in the web: https://www.monetdb.org/pipermail/users-list/2014-June/007334.html

Trying the mentioned suggestion by deleting __attribute__((__visibility__(""hidden"")))
from the gdk/gdk_private.h was
lead to several different errors (in gdk_private.h) during the make process.

If you have any suggestions, I'd be happy to hear them!

best regards 
",0
39,28550103,How to show available tables in monetdb using python api?,"When using mclient it is possible to list all tables in database by issuing command '\d'. I'm using python-monetdb package and I don't know how the same can be accomplished. I've seen example like ""SELECT * FROM TABLES;"" but I get an error that ""tables"" table does not exist.
",-1,-1,-1.0,"How to show available tables in monetdb using python api?-When using mclient it is possible to list all tables in database by issuing command '\d'. I'm using python-monetdb package and I don't know how the same can be accomplished. I've seen example like ""SELECT * FROM TABLES;"" but I get an error that ""tables"" table does not exist.
",5
40,26341286,Syntax errors whilst creating a table in MonetDB,"This is driving me mad and I'm at the point where I'm thinking I must just be missing something very obvious. We are setting up a MonetDB environment with SQiurrel. I though the challenge would be wiring that all up and getting the drivers to work, but as it turns out that is running and I can see the DB in all its glory.

I have a DB in MySQL that I need to rebuild so I just generated the code:

CREATE TABLE ""some_database"".""some_table"" (
  key int(11) NOT NULL AUTO_INCREMENT,
  column_1 varchar(10) DEFAULT NULL,
  column_2 varchar(10) DEFAULT NULL,
  column_3 varchar(10) DEFAULT NULL,
  column_4 varchar(10) DEFAULT NULL,
  column_5 varchar(10) DEFAULT NULL,
  column_6 int(11) DEFAULT NULL,
  column_7 decimal(10,2) DEFAULT NULL,
  column_8 decimal(10,2) DEFAULT NULL,
  column_9 int(11) DEFAULT NULL,
  PRIMARY KEY (key)
) ENGINE=InnoDB AUTO_INCREMENT=20189170 DEFAULT CHARSET=utf8;


The only difference is that I've changed the column and table names. I'm not sure if this is all compatible for a start but I figured I would just work my way around it as it chucked errors. The first was about using a `. MonetDB seems to not like you. 

I removed those and now I get:

Error: syntax error, unexpected '(', expecting ')' or ',' in: ""create table ""some_database"".""some_table"" (
SQLState:  42000
ErrorCode: 0
Error:   fact_key int(""
SQLState:  22000
ErrorCode: 0 


For the ""key"" column I'm also getting the int(11) turn red and tell me I have an ""EOF Expected""

If I quickly type out my own CREATE TABLE statement I can create a tables with a type varchar. As soon as I add in an int type it goes mad again. 

So for example I just created this table in MonetDB:

CREATE TABLE ""some_database"".""some_table""
(
something varchar(10),
something2 varchar(10)
); 


That worked fine. As soon as I add an int type:

CREATE TABLE ""some_database"".""some_table""
(
something varchar(10),
something2 varchar(10),
something3 int(10)
);


It goes a bit mental again:

Error: syntax error, unexpected '(', expecting ')' or ',' in: ""create table ""some_database"".""some_table""
SQLState:  42000
ErrorCode: 0
Error: (
SQLState:  22000
ErrorCode: 0
Error: something varchar(10),
SQLState:  22000
ErrorCode: 0
Error: something2 varchar(10),
SQLState:  22000
ErrorCode: 0
Error: something3 int(""
SQLState:  22000
ErrorCode: 0


So my question is have I set something up wrong? MonetDB seems to be running well and I can explore everything as one would expect in SQiurrel. I can create basic tables with varchar but as soon as I bring in an int the computer says no. I also don't understand what EOF means? I assumed it was expecting an , but it has that?

Thanks in advance. I'm hoping I just need a fresh mind who knows MonetDB to tell me why I'm missing the obvious!
",1,-1,-1.0,"Syntax errors whilst creating a table in MonetDB-This is driving me mad and I'm at the point where I'm thinking I must just be missing something very obvious. We are setting up a MonetDB environment with SQiurrel. I though the challenge would be wiring that all up and getting the drivers to work, but as it turns out that is running and I can see the DB in all its glory.

I have a DB in MySQL that I need to rebuild so I just generated the code:

CREATE TABLE ""some_database"".""some_table"" (
  key int(11) NOT NULL AUTO_INCREMENT,
  column_1 varchar(10) DEFAULT NULL,
  column_2 varchar(10) DEFAULT NULL,
  column_3 varchar(10) DEFAULT NULL,
  column_4 varchar(10) DEFAULT NULL,
  column_5 varchar(10) DEFAULT NULL,
  column_6 int(11) DEFAULT NULL,
  column_7 decimal(10,2) DEFAULT NULL,
  column_8 decimal(10,2) DEFAULT NULL,
  column_9 int(11) DEFAULT NULL,
  PRIMARY KEY (key)
) ENGINE=InnoDB AUTO_INCREMENT=20189170 DEFAULT CHARSET=utf8;


The only difference is that I've changed the column and table names. I'm not sure if this is all compatible for a start but I figured I would just work my way around it as it chucked errors. The first was about using a `. MonetDB seems to not like you. 

I removed those and now I get:

Error: syntax error, unexpected '(', expecting ')' or ',' in: ""create table ""some_database"".""some_table"" (
SQLState:  42000
ErrorCode: 0
Error:   fact_key int(""
SQLState:  22000
ErrorCode: 0 


For the ""key"" column I'm also getting the int(11) turn red and tell me I have an ""EOF Expected""

If I quickly type out my own CREATE TABLE statement I can create a tables with a type varchar. As soon as I add in an int type it goes mad again. 

So for example I just created this table in MonetDB:

CREATE TABLE ""some_database"".""some_table""
(
something varchar(10),
something2 varchar(10)
); 


That worked fine. As soon as I add an int type:

CREATE TABLE ""some_database"".""some_table""
(
something varchar(10),
something2 varchar(10),
something3 int(10)
);


It goes a bit mental again:

Error: syntax error, unexpected '(', expecting ')' or ',' in: ""create table ""some_database"".""some_table""
SQLState:  42000
ErrorCode: 0
Error: (
SQLState:  22000
ErrorCode: 0
Error: something varchar(10),
SQLState:  22000
ErrorCode: 0
Error: something2 varchar(10),
SQLState:  22000
ErrorCode: 0
Error: something3 int(""
SQLState:  22000
ErrorCode: 0


So my question is have I set something up wrong? MonetDB seems to be running well and I can explore everything as one would expect in SQiurrel. I can create basic tables with varchar but as soon as I bring in an int the computer says no. I also don't understand what EOF means? I assumed it was expecting an , but it has that?

Thanks in advance. I'm hoping I just need a fresh mind who knows MonetDB to tell me why I'm missing the obvious!
",0
41,26062348,monetdb error - wrong format ( ),"I was running a long SQL query in monetdb to create a flat table from normalized tables.  I kicked it off and left for the day.  This morning the query had died with the following:
sql>\&lt; flat.sql
wrong format ( )
sql>

There is no additional information in the log and I have no idea how long it was running before it died.  The sql requires joining several tables together and does have an order by at the end.  Any information that could help with where to start looking would be great.
",1,-1,-1.0,"monetdb error - wrong format ( )-I was running a long SQL query in monetdb to create a flat table from normalized tables.  I kicked it off and left for the day.  This morning the query had died with the following:
sql>\&lt; flat.sql
wrong format ( )
sql>

There is no additional information in the log and I have no idea how long it was running before it died.  The sql requires joining several tables together and does have an order by at the end.  Any information that could help with where to start looking would be great.
",4
42,25882427,Can't connect to a local database using Monetdb.R,"I'm trying to set a local connection to a database using Monetdb.R, but for some reason it is not working. I'm using the latest version of monetdb (MonetDB5 64 bits ""Jan2014-SP3"", 2014-07-25 release) in a Windows 7. 

Here it is a short reproducible example:

&gt; library(MonetDB.R)
Carregando pacotes exigidos: DBI
Carregando pacotes exigidos: digest
&gt; conn &lt;- dbConnect(dbDriver(""MonetDB""), ""monetdb://localhost/demo"")
Error in .mapiRead(con) : ERROR reading MAPI block header (0)


I haven't seen this error occuring with other users... 

&gt; sessionInfo()
R version 3.1.1 (2014-07-10)
Platform: x86_64-w64-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=Portuguese_Brazil.1252  LC_CTYPE=Portuguese_Brazil.1252        LC_MONETARY=Portuguese_Brazil.1252
[4] LC_NUMERIC=C                       LC_TIME=Portuguese_Brazil.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] MonetDB.R_0.9.4 digest_0.6.4    DBI_0.3.0      

loaded via a namespace (and not attached):
[1] tools_3.1.1

",-1,-1,-1.0,"Can't connect to a local database using Monetdb.R-I'm trying to set a local connection to a database using Monetdb.R, but for some reason it is not working. I'm using the latest version of monetdb (MonetDB5 64 bits ""Jan2014-SP3"", 2014-07-25 release) in a Windows 7. 

Here it is a short reproducible example:

&gt; library(MonetDB.R)
Carregando pacotes exigidos: DBI
Carregando pacotes exigidos: digest
&gt; conn &lt;- dbConnect(dbDriver(""MonetDB""), ""monetdb://localhost/demo"")
Error in .mapiRead(con) : ERROR reading MAPI block header (0)


I haven't seen this error occuring with other users... 

&gt; sessionInfo()
R version 3.1.1 (2014-07-10)
Platform: x86_64-w64-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=Portuguese_Brazil.1252  LC_CTYPE=Portuguese_Brazil.1252        LC_MONETARY=Portuguese_Brazil.1252
[4] LC_NUMERIC=C                       LC_TIME=Portuguese_Brazil.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] MonetDB.R_0.9.4 digest_0.6.4    DBI_0.3.0      

loaded via a namespace (and not attached):
[1] tools_3.1.1

",3
43,28819523,setting up remote connection with an existing monetdb db,"I create a monetdb database using mserver5 (in actual fact I use R and MonetDB.R for this part).
Retrospectively (once the db has been created) I would like to do the following:


set a remote connection to the db
set a passphrase for the remote connection (apparently necessary)


Please note that from the manuals I think I can do the above on a new dbFarm created with monetdbd.
My problem is to do the above retrospectively on an existing db.

To start I tried to use monetdbd and pointing it to the db folder (created by mserver5) with

monetdbd get all myFolderCreatedWithmserver5


But I get 

unable to read properties from myFolderCreatedWithmserver5: no such file or directory

",-1,-1,-1.0,"setting up remote connection with an existing monetdb db-I create a monetdb database using mserver5 (in actual fact I use R and MonetDB.R for this part).
Retrospectively (once the db has been created) I would like to do the following:


set a remote connection to the db
set a passphrase for the remote connection (apparently necessary)


Please note that from the manuals I think I can do the above on a new dbFarm created with monetdbd.
My problem is to do the above retrospectively on an existing db.

To start I tried to use monetdbd and pointing it to the db folder (created by mserver5) with

monetdbd get all myFolderCreatedWithmserver5


But I get 

unable to read properties from myFolderCreatedWithmserver5: no such file or directory

",3
44,28987479,Issue (bug?) with MonetDB.R and dbWriteTable with csvdump=TRUE,"We are managing to write 1.7 M rows in 30s or so (on a MacBook Pro) using R and MonetDB.R within a shiny application:

dbWriteTable(conn, tableName, Dt,overwrite=TRUE, csvdump=TRUE)


As we understand the MonetDB.R code saves first in a /tmp folder the table in a csv format, then is loaded onto the MonetDB database with COPY INTO 

We have just tried on a centos server and RStudio Server and we got an access right error on the temporary folder in /tmp.

We resolved the problem with the classic

chmod -R 777 /tmp


But it seems we have to do it again if we run this part of the app within shiny hence it does not look a scalable solution.

Would it be possible to get a more stable &amp; scalable solution?

(also, this feature was documented in MonetDB 0.94 but it does not appear anywhere in the 0.95 document on CRAN - can we safely assume that this is a typo and the feature is going to stay?)
",-1,-1,-1.0,"Issue (bug?) with MonetDB.R and dbWriteTable with csvdump=TRUE-We are managing to write 1.7 M rows in 30s or so (on a MacBook Pro) using R and MonetDB.R within a shiny application:

dbWriteTable(conn, tableName, Dt,overwrite=TRUE, csvdump=TRUE)


As we understand the MonetDB.R code saves first in a /tmp folder the table in a csv format, then is loaded onto the MonetDB database with COPY INTO 

We have just tried on a centos server and RStudio Server and we got an access right error on the temporary folder in /tmp.

We resolved the problem with the classic

chmod -R 777 /tmp


But it seems we have to do it again if we run this part of the app within shiny hence it does not look a scalable solution.

Would it be possible to get a more stable &amp; scalable solution?

(also, this feature was documented in MonetDB 0.94 but it does not appear anywhere in the 0.95 document on CRAN - can we safely assume that this is a typo and the feature is going to stay?)
",5
45,29160604,MonetDB install with Java 1.8 Error - Unsupported major.minor version 52.0,"I am following the MonetDB install procedure described by Hannes Mühleisen by running commands 1 to 6 described below. 

how do I install MonetDB on Centos 6.5? 


sudo yum install openssl-devel pcre-devel
tar xvf MonetDB-.tar.
cd MonetDB-*
./configure
make
sudo make install ---> Fails in this Step


The machines Java Home is /usr/lib/java/jdk1.8.0_25. Apparently, the install is trying to find a 1.7 version somewhere else

Here is the error text

make[4]: Entering directory `/usr/local/MonetDB-11.15.19/java/tests'
make  all-am
make[5]: Entering directory `/usr/local/MonetDB-11.15.19/java/tests'
""/usr/local/ant/bin/ant"" -f ""`readlink -f ./build.xml`"" -Dbuilddir=""`readlink -f /usr/local/MonetDB-11.15.19/java/tests/jar_jdbctests`"" -Djardir=""`readlink -f /usr/local/MonetDB-11.15.19/java/tests`"" -Dbasedir=""`readlink -f .`"" jar_jdbctests
Unable to locate tools.jar. Expected to find it in /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.75.x86_64/lib/tools.jar
Buildfile: /usr/local/MonetDB-11.15.19/java/tests/build.xml

prepare:

find_driver:

BUILD FAILED
/usr/local/MonetDB-11.15.19/java/tests/build.xml:87: java.lang.UnsupportedClassVersionError: nl/cwi/monetdb/jdbc/MonetDriver : Unsupported major.minor version 52.0
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:800)
    at org.apache.tools.ant.AntClassLoader.defineClassFromData(AntClassLoader.java:1136)
    at org.apache.tools.ant.AntClassLoader.getClassFromStream(AntClassLoader.java:1307)
    at org.apache.tools.ant.AntClassLoader.findClassInComponents(AntClassLoader.java:1362)
    at org.apache.tools.ant.AntClassLoader.findClass(AntClassLoader.java:1323)
    at org.apache.tools.ant.AntClassLoader.loadClass(AntClassLoader.java:1076)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:358)
    at org.apache.tools.ant.taskdefs.Available.checkClass(Available.java:454)
    at org.apache.tools.ant.taskdefs.Available.eval(Available.java:285)
    at org.apache.tools.ant.taskdefs.condition.And.eval(And.java:42)
    at org.apache.tools.ant.taskdefs.ConditionTask.execute(ConditionTask.java:120)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:606)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.TaskAdapter.execute(TaskAdapter.java:154)
    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:292)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:606)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.Target.execute(Target.java:435)
    at org.apache.tools.ant.Target.performTasks(Target.java:456)
    at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1393)
    at org.apache.tools.ant.Project.executeTarget(Project.java:1364)
    at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
    at org.apache.tools.ant.Project.executeTargets(Project.java:1248)
    at org.apache.tools.ant.Main.runBuild(Main.java:851)
    at org.apache.tools.ant.Main.startAnt(Main.java:235)
    at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
    at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)

",-1,-1,-1.0,"MonetDB install with Java 1.8 Error - Unsupported major.minor version 52.0-I am following the MonetDB install procedure described by Hannes Mühleisen by running commands 1 to 6 described below. 

how do I install MonetDB on Centos 6.5? 


sudo yum install openssl-devel pcre-devel
tar xvf MonetDB-.tar.
cd MonetDB-*
./configure
make
sudo make install ---> Fails in this Step


The machines Java Home is /usr/lib/java/jdk1.8.0_25. Apparently, the install is trying to find a 1.7 version somewhere else

Here is the error text

make[4]: Entering directory `/usr/local/MonetDB-11.15.19/java/tests'
make  all-am
make[5]: Entering directory `/usr/local/MonetDB-11.15.19/java/tests'
""/usr/local/ant/bin/ant"" -f ""`readlink -f ./build.xml`"" -Dbuilddir=""`readlink -f /usr/local/MonetDB-11.15.19/java/tests/jar_jdbctests`"" -Djardir=""`readlink -f /usr/local/MonetDB-11.15.19/java/tests`"" -Dbasedir=""`readlink -f .`"" jar_jdbctests
Unable to locate tools.jar. Expected to find it in /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.75.x86_64/lib/tools.jar
Buildfile: /usr/local/MonetDB-11.15.19/java/tests/build.xml

prepare:

find_driver:

BUILD FAILED
/usr/local/MonetDB-11.15.19/java/tests/build.xml:87: java.lang.UnsupportedClassVersionError: nl/cwi/monetdb/jdbc/MonetDriver : Unsupported major.minor version 52.0
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:800)
    at org.apache.tools.ant.AntClassLoader.defineClassFromData(AntClassLoader.java:1136)
    at org.apache.tools.ant.AntClassLoader.getClassFromStream(AntClassLoader.java:1307)
    at org.apache.tools.ant.AntClassLoader.findClassInComponents(AntClassLoader.java:1362)
    at org.apache.tools.ant.AntClassLoader.findClass(AntClassLoader.java:1323)
    at org.apache.tools.ant.AntClassLoader.loadClass(AntClassLoader.java:1076)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:358)
    at org.apache.tools.ant.taskdefs.Available.checkClass(Available.java:454)
    at org.apache.tools.ant.taskdefs.Available.eval(Available.java:285)
    at org.apache.tools.ant.taskdefs.condition.And.eval(And.java:42)
    at org.apache.tools.ant.taskdefs.ConditionTask.execute(ConditionTask.java:120)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:606)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.TaskAdapter.execute(TaskAdapter.java:154)
    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:292)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:606)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.Target.execute(Target.java:435)
    at org.apache.tools.ant.Target.performTasks(Target.java:456)
    at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1393)
    at org.apache.tools.ant.Project.executeTarget(Project.java:1364)
    at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
    at org.apache.tools.ant.Project.executeTargets(Project.java:1248)
    at org.apache.tools.ant.Main.runBuild(Main.java:851)
    at org.apache.tools.ant.Main.startAnt(Main.java:235)
    at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
    at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)

",3
46,29177412,Terminating (graciously) MonetDB process in R,"I'm using MonetDB on a variety of platform (e.g. OS X and Linux Centos) with a shiny application.

It is difficult to disconnect the db all the times, so currently my approach is to terminate the shiny app without disconnecting the db.

This means that the shiny app before accessing the data tries to stop any ""old"" process with:

monetdb.server.stop(pid)


From the source of the command I understand that it basically kills the process associated to the pid provided (which means among other things  that the user running the app must have access to the kill function).

This works OK some of the times, but sometimes when I try to start MonetDB again, I get

!FATAL: GDKlockHome: Database lock '.gdk_lock' denied

Warning in socketConnection(host = host, port = port, blocking = TRUE, open = ""r+b"",  :
  localhost:50000 cannot be opened
Error in socketConnection(host = host, port = port, blocking = TRUE, open = ""r+b"",  : 
  cannot open the connection


Is there a way to avoid this error (without forcibly disconnecting the database all the time I use it in shiny)?
",-1,-1,-1.0,"Terminating (graciously) MonetDB process in R-I'm using MonetDB on a variety of platform (e.g. OS X and Linux Centos) with a shiny application.

It is difficult to disconnect the db all the times, so currently my approach is to terminate the shiny app without disconnecting the db.

This means that the shiny app before accessing the data tries to stop any ""old"" process with:

monetdb.server.stop(pid)


From the source of the command I understand that it basically kills the process associated to the pid provided (which means among other things  that the user running the app must have access to the kill function).

This works OK some of the times, but sometimes when I try to start MonetDB again, I get

!FATAL: GDKlockHome: Database lock '.gdk_lock' denied

Warning in socketConnection(host = host, port = port, blocking = TRUE, open = ""r+b"",  :
  localhost:50000 cannot be opened
Error in socketConnection(host = host, port = port, blocking = TRUE, open = ""r+b"",  : 
  cannot open the connection


Is there a way to avoid this error (without forcibly disconnecting the database all the time I use it in shiny)?
",3
47,29383302,"MonetDB, data loss in restart server","I have been using MonetDB in production for some time now, and I have nothing to complain about.
My database has tables with more than 30 columns and 30 million records, and I perform analysis through cubes in Pentaho / Saiku.
I have restarted the server several times before, and never had any problem with data loss. However, after running a query today that was consuming a lot of resources, I decided to stop the database, and when I restarted it, data from some columns have disappeared. How can that happen? Were the data still uncommitted?
I am concerned that running the query in MonetDB has changed the data or reorganised the database.
",1,-1,-1.0,"MonetDB, data loss in restart server-I have been using MonetDB in production for some time now, and I have nothing to complain about.
My database has tables with more than 30 columns and 30 million records, and I perform analysis through cubes in Pentaho / Saiku.
I have restarted the server several times before, and never had any problem with data loss. However, after running a query today that was consuming a lot of resources, I decided to stop the database, and when I restarted it, data from some columns have disappeared. How can that happen? Were the data still uncommitted?
I am concerned that running the query in MonetDB has changed the data or reorganised the database.
",5
48,29501779,Command Not Found error when calling monetdb.server.start in R,"I am trying to replicate CMS publications and require the use of MonetDB to do so, but am having trouble starting the server. I set up the server as follows:

library(R.utils)
library(MonetDB.R)
batfile &lt;-
monetdb.server.setup(
                database.directory = paste0( getwd() , ""/MonetDB"" ) ,
                monetdb.program.path = 
                    ifelse( 
                        .Platform$OS.type == ""windows"" , 
                        ""C:/Program Files/MonetDB/MonetDB5"" , 
                        """" 
                    ) ,
                dbname = ""bsapuf"" ,
                dbport = 50003
)


The error occurs when I try to startup the server using the following code:

pid &lt;- monetdb.server.start( batfile )


And is as follows:

/Users/ktrahair/Documents/2.1_AEUM_CLASS/Final_Project/MonetDB/bsapuf.sh: line   2: mserver5: command not found
Read 1 item


The content of the text file that is being accessed is:

#!/bin/sh

mserver5 --set prefix= --set exec_prefix= --dbpath /Users/ktrahair/Documents/2.1_AEUM_CLASS/Final_Project/MonetDB/bsapuf --set mapi_port=50003 --daemon yes &gt; /dev/null &amp;

echo $! &gt; /Users/ktrahair/Documents/2.1_AEUM_CLASS/Final_Project/MonetDB/mserver5.started.from.R.pid


This is my first time using StackOverflow, any help would be appreciated.

Thanks!
Kyle
",-1,-1,-1.0,"Command Not Found error when calling monetdb.server.start in R-I am trying to replicate CMS publications and require the use of MonetDB to do so, but am having trouble starting the server. I set up the server as follows:

library(R.utils)
library(MonetDB.R)
batfile &lt;-
monetdb.server.setup(
                database.directory = paste0( getwd() , ""/MonetDB"" ) ,
                monetdb.program.path = 
                    ifelse( 
                        .Platform$OS.type == ""windows"" , 
                        ""C:/Program Files/MonetDB/MonetDB5"" , 
                        """" 
                    ) ,
                dbname = ""bsapuf"" ,
                dbport = 50003
)


The error occurs when I try to startup the server using the following code:

pid &lt;- monetdb.server.start( batfile )


And is as follows:

/Users/ktrahair/Documents/2.1_AEUM_CLASS/Final_Project/MonetDB/bsapuf.sh: line   2: mserver5: command not found
Read 1 item


The content of the text file that is being accessed is:

#!/bin/sh

mserver5 --set prefix= --set exec_prefix= --dbpath /Users/ktrahair/Documents/2.1_AEUM_CLASS/Final_Project/MonetDB/bsapuf --set mapi_port=50003 --daemon yes &gt; /dev/null &amp;

echo $! &gt; /Users/ktrahair/Documents/2.1_AEUM_CLASS/Final_Project/MonetDB/mserver5.started.from.R.pid


This is my first time using StackOverflow, any help would be appreciated.

Thanks!
Kyle
",3
49,29556258,monetdb bulk copy | bulk copy with python,"Am facing issue with file loading for bulk import in monetdb table. provided below are details for re creation of issue:

I have installed monetdb version 11.19.9 and python client for monetdb is 11.19.9 too.

Created dbform and it's working fine, I have connected to monetdb shell and through python api.

Now am trying to import dumped CSV file, content of the csv file are presented below:

44444444|ALI
55555555|JAFFRI


Table schema is defined as: * ""Table already have 50 million rows, while csv have only two rows""

CREATE TABLE ""voc"".""test"" (
    ""id""   INTEGER,
    ""data"" VARCHAR(30)
);



username and database name both are ""voc""


command used to import file is as listed below.

root@monetdb:~# mclient -u voc -d voc -s  ""COPY INTO test FROM STDIN"" - &lt; test.csv
password:
NULL byte in input
root@monetdb:~# mclient -u voc -d voc -s  ""COPY INTO test FROM STDIN NULL AS ''"" - &lt; test.csv
password:
NULL byte in input


Error ""NULL byte in input"" is thrown and nothing is added to table.

For Python I have tried using following command:

import monetdb.sql
connection = monetdb.sql.connect(username=""voc"", password=""voc"", hostname=""localhost"", database=""voc"")
cursor = connection.cursor()
cursor.execute(""COPY INTO test FROM 'test.csv'"")
connection.commit()


This code throw Perm Exception:

COPY INTO: insufficient privileges: COPY INTO from file(s) requires database administrator rights, use 'COPY INTO ""test"" FROM STDIN' instead


Now I didn't found any example for python code to use with STDIN, Monetdb cursor does not offer copy_from unlike PostgreSQL where you can Pass file separately. Is there any solution for python?

OS?

uname -a
Linux monetdb 3.13.0-43-generic #72-Ubuntu SMP Mon Dec 8 19:35:06 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux


*** Python example worked fine with user monetdb but for terminal ""NULL byte in input"" is still exist.
",-1,-1,-1.0,"monetdb bulk copy | bulk copy with python-Am facing issue with file loading for bulk import in monetdb table. provided below are details for re creation of issue:

I have installed monetdb version 11.19.9 and python client for monetdb is 11.19.9 too.

Created dbform and it's working fine, I have connected to monetdb shell and through python api.

Now am trying to import dumped CSV file, content of the csv file are presented below:

44444444|ALI
55555555|JAFFRI


Table schema is defined as: * ""Table already have 50 million rows, while csv have only two rows""

CREATE TABLE ""voc"".""test"" (
    ""id""   INTEGER,
    ""data"" VARCHAR(30)
);



username and database name both are ""voc""


command used to import file is as listed below.

root@monetdb:~# mclient -u voc -d voc -s  ""COPY INTO test FROM STDIN"" - &lt; test.csv
password:
NULL byte in input
root@monetdb:~# mclient -u voc -d voc -s  ""COPY INTO test FROM STDIN NULL AS ''"" - &lt; test.csv
password:
NULL byte in input


Error ""NULL byte in input"" is thrown and nothing is added to table.

For Python I have tried using following command:

import monetdb.sql
connection = monetdb.sql.connect(username=""voc"", password=""voc"", hostname=""localhost"", database=""voc"")
cursor = connection.cursor()
cursor.execute(""COPY INTO test FROM 'test.csv'"")
connection.commit()


This code throw Perm Exception:

COPY INTO: insufficient privileges: COPY INTO from file(s) requires database administrator rights, use 'COPY INTO ""test"" FROM STDIN' instead


Now I didn't found any example for python code to use with STDIN, Monetdb cursor does not offer copy_from unlike PostgreSQL where you can Pass file separately. Is there any solution for python?

OS?

uname -a
Linux monetdb 3.13.0-43-generic #72-Ubuntu SMP Mon Dec 8 19:35:06 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux


*** Python example worked fine with user monetdb but for terminal ""NULL byte in input"" is still exist.
",0
50,30939682,Create function in MonetDB,"I'm trying to add a simple function in to monetDB at database level, which just does sum(n) and returns the result

create function sys.foo(number int)
returns int
begin
declare tsum int;
set tsum = 0;
while number &gt; 0 do
set tsum = tsum + number;
set number = number -1;
end while;
return tsum;
end;


While attempting to execute the above code i'm seeing error as follows


  [Error Code: 0, SQL State: 42000]  syntax error, unexpected $end, expecting WHILE: end of input stream in ""create function sys.foo(number int)


I could add the same function in to MySQL, and it works!!

&gt;select sys.foo(10) 
sys.foo(10)
-----------
55


Could some one please let me know whats going wrong here?
",-1,-1,-1.0,"Create function in MonetDB-I'm trying to add a simple function in to monetDB at database level, which just does sum(n) and returns the result

create function sys.foo(number int)
returns int
begin
declare tsum int;
set tsum = 0;
while number &gt; 0 do
set tsum = tsum + number;
set number = number -1;
end while;
return tsum;
end;


While attempting to execute the above code i'm seeing error as follows


  [Error Code: 0, SQL State: 42000]  syntax error, unexpected $end, expecting WHILE: end of input stream in ""create function sys.foo(number int)


I could add the same function in to MySQL, and it works!!

&gt;select sys.foo(10) 
sys.foo(10)
-----------
55


Could some one please let me know whats going wrong here?
",0
51,31060854,monetdb embedded R,"I am trying to use the embedded R feature in Windows 7. I start the server with 

mserver5 --set embedded_r=true


I do not see the message # MonetDB/R   module loaded though.

Then I wanted to test the example rapi00 provided here: 

CREATE FUNCTION rapi00() RETURNS TABLE (d INTEGER) LANGUAGE R {
    seq(1,10);
};


runs well. However, when I execute 

SELECT d FROM rapi00() AS r WHERE d &gt; 5;


I get the following error message 

TypeException:user.s10_1[2]:'rapi.eval' undefined in: _4:bat[:oid,:int] := rapi.
eval(_5:ptr, _6:str)
program contains errors


I wonder if the this feature is implemented at all in Windows (it runs well in mac os). Can someone please help?
",1,-1,-1.0,"monetdb embedded R-I am trying to use the embedded R feature in Windows 7. I start the server with 

mserver5 --set embedded_r=true


I do not see the message # MonetDB/R   module loaded though.

Then I wanted to test the example rapi00 provided here: 

CREATE FUNCTION rapi00() RETURNS TABLE (d INTEGER) LANGUAGE R {
    seq(1,10);
};


runs well. However, when I execute 

SELECT d FROM rapi00() AS r WHERE d &gt; 5;


I get the following error message 

TypeException:user.s10_1[2]:'rapi.eval' undefined in: _4:bat[:oid,:int] := rapi.
eval(_5:ptr, _6:str)
program contains errors


I wonder if the this feature is implemented at all in Windows (it runs well in mac os). Can someone please help?
",3
52,31344061,"monetdb with web.py (raise UnknownDB, dbn issue)","I tried using web.py framework to the monetdb.

This is my implementation code :

import web

render = web.template.render('templates/')
db       = web.database(dbn = 'monetdbd', user = 'monetdb', pw = 'monetdb', db = 'test')

urls = (
    '/','index'
)


class index:
    def GET(self,name):
        xSelect = db.select(x)
        return render.index(xSelect)

if __name__ == ""__main__"":
    app = web.application(urls,globals())
    app.run()


I have got the following error message while running python code.py

Traceback (most recent call last):
  File ""code.py"", line 4, in &lt;module&gt;
    db       = web.database(dbn = 'monetdbd', user = 'monetdb', pw = 'monetdb', db = 'test')
  File ""/usr/local/lib/python2.7/dist-packages/web.py-0.37-py2.7.egg/web/db.py"", line 1145, in database
    raise UnknownDB, dbn
web.db.UnknownDB: monetdbd


The database server is running:

bmartis@bmartis-VirtualBox:~/Desktop/Monetdb/web$ ps ucx| grep -i monetdb
bmartis   2482  0.0  0.0  63956  2476 ?        Ssl  Jun29   0:33 monetdbd
bmartis@bmartis-VirtualBox:~/Desktop/Monetdb/web$


I don't understand what is wrong with db definition here. What's the right syntax or monetdb doesn't have a support for this?
",-1,-1,-1.0,"monetdb with web.py (raise UnknownDB, dbn issue)-I tried using web.py framework to the monetdb.

This is my implementation code :

import web

render = web.template.render('templates/')
db       = web.database(dbn = 'monetdbd', user = 'monetdb', pw = 'monetdb', db = 'test')

urls = (
    '/','index'
)


class index:
    def GET(self,name):
        xSelect = db.select(x)
        return render.index(xSelect)

if __name__ == ""__main__"":
    app = web.application(urls,globals())
    app.run()


I have got the following error message while running python code.py

Traceback (most recent call last):
  File ""code.py"", line 4, in &lt;module&gt;
    db       = web.database(dbn = 'monetdbd', user = 'monetdb', pw = 'monetdb', db = 'test')
  File ""/usr/local/lib/python2.7/dist-packages/web.py-0.37-py2.7.egg/web/db.py"", line 1145, in database
    raise UnknownDB, dbn
web.db.UnknownDB: monetdbd


The database server is running:

bmartis@bmartis-VirtualBox:~/Desktop/Monetdb/web$ ps ucx| grep -i monetdb
bmartis   2482  0.0  0.0  63956  2476 ?        Ssl  Jun29   0:33 monetdbd
bmartis@bmartis-VirtualBox:~/Desktop/Monetdb/web$


I don't understand what is wrong with db definition here. What's the right syntax or monetdb doesn't have a support for this?
",2
53,31552094,How to improve performance with MonetDB on OSX?,"I am using monetdb on a 16GB Macbook Pro with OSX 10.10.4 Yosemite. 

I execute queries with SQLWorkbenchJ (configured with a minimum of 2048M RAM).

I find the performance overall erratic:


performance is acceptable / good with small size tables (&lt;100K rows)
abysmal with tables with many rows: a query with a join of two tables (8670 rows and 242K rows) and a simple sum took  1H 20m!!


My 16GB of memory notwithstanding, in one run I never saw MSERVER5 using more than 35MB  of RAM, 450MB in another.  On the other hand the time is consumed swapping data onto disk (according to Activity Monitor over 160GB of data!).

There are a number of performance-related issues that I would like to understand better:


I have the impression that MonetDB struggles with understanding how much RAM to use / is available in OSX.  How can I ""force"" MonetDB to use more RAM?
I use MonetDB through R.  The MonetDB.R driver converts all the character fields into CLOB.  I wonder if CLOBs create memory allocation issues?
I find difficult to explain the many GBs of writes (as mentioned >150GB!!) even for index creation or temporary results.  On the other hand when I create the DB and load the tables overall the DB is &lt;50MB. Should I create an artificial integer key and set it as index? 
I join 2 tables on a timestamp field (e.g. ""2015/01/01 01:00"") that again is seen as a text CLOB by MonetDb / MonetDb.R. Should I just convert it to integer before saving it to MonetDb? 
I have configured each table with a primary key, using a field of type integer. MonetDB (as a typical columnar database) doesn't need the user to specify an index.  Is there any other way to improve performance?


Any recommendation is welcome.

For clarity the two tables I join have the following layout:

Calendar # classic calendar table with one entry per our in a year = 8760 rows
Fields: datetime, date, month, weekbyhour, monthbyday, yearbyweek, yearbymonth # all fields are CLOBs as mentioned

Activity # around 200K rows
Fields: company, department, subdepartment, function, subfunction, activityname, activityunits, datetime, duration # all CLOBs except activityunits; datetime refers to when the activity has occurred

I have tied various types of join syntax, but an example would (`*` used for brevity)
select * from Activity as a, Calendar as b where a.datetime=b.datetime

",1,-1,-1.0,"How to improve performance with MonetDB on OSX?-I am using monetdb on a 16GB Macbook Pro with OSX 10.10.4 Yosemite. 

I execute queries with SQLWorkbenchJ (configured with a minimum of 2048M RAM).

I find the performance overall erratic:


performance is acceptable / good with small size tables (&lt;100K rows)
abysmal with tables with many rows: a query with a join of two tables (8670 rows and 242K rows) and a simple sum took  1H 20m!!


My 16GB of memory notwithstanding, in one run I never saw MSERVER5 using more than 35MB  of RAM, 450MB in another.  On the other hand the time is consumed swapping data onto disk (according to Activity Monitor over 160GB of data!).

There are a number of performance-related issues that I would like to understand better:


I have the impression that MonetDB struggles with understanding how much RAM to use / is available in OSX.  How can I ""force"" MonetDB to use more RAM?
I use MonetDB through R.  The MonetDB.R driver converts all the character fields into CLOB.  I wonder if CLOBs create memory allocation issues?
I find difficult to explain the many GBs of writes (as mentioned >150GB!!) even for index creation or temporary results.  On the other hand when I create the DB and load the tables overall the DB is &lt;50MB. Should I create an artificial integer key and set it as index? 
I join 2 tables on a timestamp field (e.g. ""2015/01/01 01:00"") that again is seen as a text CLOB by MonetDb / MonetDb.R. Should I just convert it to integer before saving it to MonetDb? 
I have configured each table with a primary key, using a field of type integer. MonetDB (as a typical columnar database) doesn't need the user to specify an index.  Is there any other way to improve performance?


Any recommendation is welcome.

For clarity the two tables I join have the following layout:

Calendar # classic calendar table with one entry per our in a year = 8760 rows
Fields: datetime, date, month, weekbyhour, monthbyday, yearbyweek, yearbymonth # all fields are CLOBs as mentioned

Activity # around 200K rows
Fields: company, department, subdepartment, function, subfunction, activityname, activityunits, datetime, duration # all CLOBs except activityunits; datetime refers to when the activity has occurred

I have tied various types of join syntax, but an example would (`*` used for brevity)
select * from Activity as a, Calendar as b where a.datetime=b.datetime

",4
54,31845151,monetdb failed to bulk load 42000 syntax error,"I'm trying to bulk load some data into monetdb.
I followed this example.
It works for my test data. But when I use the data from production environment, I get exceptions.

Caused by: java.lang.Exception: 42000!syntax error, unexpected IDENT, expecting DELIMITERS in: ""copy into dm.fact_sem_keyword_collection from stdin using delimters""
25005!current transaction is aborted (please ROLLBACK)
at com.lietou.bi.dw.task.common.dataexchange.MonetDBBulkLoadWriter.flush(MonetDBBulkLoadWriter.java:140)
... 12 more


and I found the following log from the debug log.

20150804x_m_0001323100000001255480000000001310100152015-08-05 10:28:44
20150804x_z_0002000000000001000000000000000002015-08-05 10:28:44
20150804xn_cd_01000000000002000000000000000002015-08-05 10:28:44
20150804z_s_0002000000000001000000000000000002015-08-05 10:28:44

RD 1438779576672: read final block: 190 bytes
RX 1438779576672: !42000!syntax error, unexpected IDENT, expecting DELIMITERS in: ""copy into dm.fact_sem_keyword_collection from stdin using delimters""
!25005!current transaction is aborted (please ROLLBACK)

RD 1438779576672: inserting prompt


I think there must be some bad data, but I don't know how to find more details to help me locate it.

And there is one more thing. Monetdb seems to read data using a buffer size of 8190 bytes. But right before the exception, there is a write final block of different size. Logs are showed below. What does this mean?

...
TD 1438779576129: write block: 8190 bytes
TX 1438779576129:
... 
TD 1438779576137: write block: 8190 bytes
TX 1438779576137:
...
TD 1438779576137: write final block: 5921 bytes
TX 1438779576137:
...

",1,-1,-1.0,"monetdb failed to bulk load 42000 syntax error-I'm trying to bulk load some data into monetdb.
I followed this example.
It works for my test data. But when I use the data from production environment, I get exceptions.

Caused by: java.lang.Exception: 42000!syntax error, unexpected IDENT, expecting DELIMITERS in: ""copy into dm.fact_sem_keyword_collection from stdin using delimters""
25005!current transaction is aborted (please ROLLBACK)
at com.lietou.bi.dw.task.common.dataexchange.MonetDBBulkLoadWriter.flush(MonetDBBulkLoadWriter.java:140)
... 12 more


and I found the following log from the debug log.

20150804x_m_0001323100000001255480000000001310100152015-08-05 10:28:44
20150804x_z_0002000000000001000000000000000002015-08-05 10:28:44
20150804xn_cd_01000000000002000000000000000002015-08-05 10:28:44
20150804z_s_0002000000000001000000000000000002015-08-05 10:28:44

RD 1438779576672: read final block: 190 bytes
RX 1438779576672: !42000!syntax error, unexpected IDENT, expecting DELIMITERS in: ""copy into dm.fact_sem_keyword_collection from stdin using delimters""
!25005!current transaction is aborted (please ROLLBACK)

RD 1438779576672: inserting prompt


I think there must be some bad data, but I don't know how to find more details to help me locate it.

And there is one more thing. Monetdb seems to read data using a buffer size of 8190 bytes. But right before the exception, there is a write final block of different size. Logs are showed below. What does this mean?

...
TD 1438779576129: write block: 8190 bytes
TX 1438779576129:
... 
TD 1438779576137: write block: 8190 bytes
TX 1438779576137:
...
TD 1438779576137: write final block: 5921 bytes
TX 1438779576137:
...

",0
55,32086678,MonetDB parallel query high IO write activity,"While testing Monetdb on Linux I can see a lot of IO write activity. The data set is 2GB (30 Million rows) and system has 120GB free RAM

The query: 

select sum(hits) from (select ""hour"",""minute"",""second"", server, count(*) as hits from iislogs group by server, ""hour"",""minute"",""second"") as xxx;


I run a single query it takes ~400 ms to scan 30 Mil rows, but if i run same query 10 times in parallel each takes 30 s! 
The 48 CPUs are at 15% and I can see lots of disk writes, no swap activity. 
I've looking for tweaking some kind of setting or limitation without any luck.

Any idea about why ?

UPDATE:

I've disabled logging and write active has lowered but still having some and no improvement at all.
",1,-1,-1.0,"MonetDB parallel query high IO write activity-While testing Monetdb on Linux I can see a lot of IO write activity. The data set is 2GB (30 Million rows) and system has 120GB free RAM

The query: 

select sum(hits) from (select ""hour"",""minute"",""second"", server, count(*) as hits from iislogs group by server, ""hour"",""minute"",""second"") as xxx;


I run a single query it takes ~400 ms to scan 30 Mil rows, but if i run same query 10 times in parallel each takes 30 s! 
The 48 CPUs are at 15% and I can see lots of disk writes, no swap activity. 
I've looking for tweaking some kind of setting or limitation without any luck.

Any idea about why ?

UPDATE:

I've disabled logging and write active has lowered but still having some and no improvement at all.
",4
56,32116883,Union and limit in one query in MonetDB,"How can I write following query in MonetDB:
CREATE TABLE &quot;sampled&quot; AS (
 SELECT *
 FROM   &quot;base&quot;
 WHERE  &quot;target&quot; = 'B'
 LIMIT  30
) UNION ALL (
 SELECT * 
 FROM &quot;base&quot; 
 WHERE &quot;target&quot; = 'A' 
 LIMIT 30 
) WITH DATA

?
When I attempt to execute the above query on:

MonetDB Database Server Toolkit v1.1 (Oct2014-SP2)
OS X 10.9.5

I am getting:
Error: syntax error, unexpected LIMIT, expecting INTERSECT or EXCEPT or UNION or ')' in: &quot;create table &quot;sampled&quot; as (
SQLState:  42000
ErrorCode: 0 
Error:      select * 
SQLState:  22000 
ErrorCode: 0 
Error: from   &quot;predictor_factory&quot;.&quot;base&quot;&quot; 
SQLState:  22000 
ErrorCode: 0

Union alone works as expected:
SELECT *
FROM   &quot;base&quot;
WHERE  &quot;target&quot; = 'B'
UNION ALL
SELECT * 
FROM   &quot;base&quot;
WHERE  &quot;target&quot; = 'A'

Limit alone also works well:
SELECT * 
FROM   &quot;base&quot;
WHERE  &quot;target&quot; = 'A'
LIMIT  30

It's the combination that is troublesome for me.
",-1,-1,-1.0,"Union and limit in one query in MonetDB-How can I write following query in MonetDB:
CREATE TABLE &quot;sampled&quot; AS (
 SELECT *
 FROM   &quot;base&quot;
 WHERE  &quot;target&quot; = 'B'
 LIMIT  30
) UNION ALL (
 SELECT * 
 FROM &quot;base&quot; 
 WHERE &quot;target&quot; = 'A' 
 LIMIT 30 
) WITH DATA

?
When I attempt to execute the above query on:

MonetDB Database Server Toolkit v1.1 (Oct2014-SP2)
OS X 10.9.5

I am getting:
Error: syntax error, unexpected LIMIT, expecting INTERSECT or EXCEPT or UNION or ')' in: &quot;create table &quot;sampled&quot; as (
SQLState:  42000
ErrorCode: 0 
Error:      select * 
SQLState:  22000 
ErrorCode: 0 
Error: from   &quot;predictor_factory&quot;.&quot;base&quot;&quot; 
SQLState:  22000 
ErrorCode: 0

Union alone works as expected:
SELECT *
FROM   &quot;base&quot;
WHERE  &quot;target&quot; = 'B'
UNION ALL
SELECT * 
FROM   &quot;base&quot;
WHERE  &quot;target&quot; = 'A'

Limit alone also works well:
SELECT * 
FROM   &quot;base&quot;
WHERE  &quot;target&quot; = 'A'
LIMIT  30

It's the combination that is troublesome for me.
",0
57,32160221,dbListConnections & MonetDB - which user is connected?,"I am using MonetDB with R thanks to the library MonetDB.R.

I do not seem to be able to use dbListConnections

I get:

&gt; dbListConnections(dbDriver(""MonetDB.R""))
Error in (function (classes, fdef, mtable)  : 
  unable to find an inherited method for function ‘dbListConnections’ for signature ‘""MonetDBDriver""’


Should I assume that dbListConnections is not implemented in MonetDB.R?

My challenge is to try to implement a multi-connection application using R and Shiny Server Pro: it would be useful to know which connections are established at a given time and with which user.

Are there alternative ways to establish which user is connected?

BTW, I've also tried to use the queries:

SELECT * FROM sys.connections; -- * used for brevity, or

SELECT * FROM sys.sessions; -- * used for brevity


But both return NULL...
",-1,-1,-1.0,"dbListConnections & MonetDB - which user is connected?-I am using MonetDB with R thanks to the library MonetDB.R.

I do not seem to be able to use dbListConnections

I get:

&gt; dbListConnections(dbDriver(""MonetDB.R""))
Error in (function (classes, fdef, mtable)  : 
  unable to find an inherited method for function ‘dbListConnections’ for signature ‘""MonetDBDriver""’


Should I assume that dbListConnections is not implemented in MonetDB.R?

My challenge is to try to implement a multi-connection application using R and Shiny Server Pro: it would be useful to know which connections are established at a given time and with which user.

Are there alternative ways to establish which user is connected?

BTW, I've also tried to use the queries:

SELECT * FROM sys.connections; -- * used for brevity, or

SELECT * FROM sys.sessions; -- * used for brevity


But both return NULL...
",3
58,32165339,Grant privileges to users on MonetDB,"I am trying to grant admin, i.e. ""monetdb"" privileges to users, without any success so far (the privileges should extend to all the tables of the sys schema).
As I have a schema with many tables would be very complex to give explicit  rights (e.g. SELECT ) to all the users mentioning all the tables:  I need to find an efficient way to do this.

I log into MonetDB with SQLWorkbenchJ using the superuser monetdb.
I have also tried to directly send queries using R and the MonetDB.R package (with no difference).

I create a user associated to a schema (e.g. the sys schema) as

CREATE USER ""user1"" WITH PASSWORD 'user1' NAME 'user one' SCHEMA ""sys"";


Then I try to GRANT ""monetdb"" privileges to user1

GRANT   monetdb TO ""user1"";


And I do not get any error.

If I log into MonetDb as user1 and try a simple select (on a pre-existing table of the sys schema) I get:

SELECT * FROM sys.departmentfunctionindex
SELECT: access denied for user1 to table 'sys.departmentfunctionindex'


Clearly I'm missing something.   

Any suggestion is welcome.
",1,-1,-1.0,"Grant privileges to users on MonetDB-I am trying to grant admin, i.e. ""monetdb"" privileges to users, without any success so far (the privileges should extend to all the tables of the sys schema).
As I have a schema with many tables would be very complex to give explicit  rights (e.g. SELECT ) to all the users mentioning all the tables:  I need to find an efficient way to do this.

I log into MonetDB with SQLWorkbenchJ using the superuser monetdb.
I have also tried to directly send queries using R and the MonetDB.R package (with no difference).

I create a user associated to a schema (e.g. the sys schema) as

CREATE USER ""user1"" WITH PASSWORD 'user1' NAME 'user one' SCHEMA ""sys"";


Then I try to GRANT ""monetdb"" privileges to user1

GRANT   monetdb TO ""user1"";


And I do not get any error.

If I log into MonetDb as user1 and try a simple select (on a pre-existing table of the sys schema) I get:

SELECT * FROM sys.departmentfunctionindex
SELECT: access denied for user1 to table 'sys.departmentfunctionindex'


Clearly I'm missing something.   

Any suggestion is welcome.
",4
59,32362216,Connect to MonetDb Virtualbox from node.js server app,"I am trying to connect Monetdb database, and I would like to use it with a node.js server app.

I currently set up a VirtualBox environment with monetdb package, as described here, and it works well: https://www.monetdbsolutions.com/solutions/cloud/vm
I can connect to this VM with putty with root@localhost:2222, and it works.

However, I cannot find the way to connect to the VM and to my database using node monetdb package: https://www.npmjs.com/package/monetdb

I used:
var options = {
    host     : 'localhost', 
    port     : 2222, 
    dbname   : 'mydb', 
    user     : 'root', 
    password : 'monetdb'
};

I cannot find the way to make it work.
When I use: 

var conn = require('monetdb').connect(options , function(err) {
    if (!err) console.log('connected');
});


It does not trigger any error, nor launches any connection. 

I think I am missing something when I access to the Virtual machine root@localhost:2222. It works with SSH, but I am not sure the access with monetdb node package is similar.

Is it even possible to connect to this VM from node.js? Maybe I should try another way to try this database with node.

They made a ""docker container"". I never used that kind of thing, but it may be suitable as well... 

Any help on how I can solve this would be a lot appreciated! 
Thanks very much on this.

Best regards
",1,-1,-1.0,"Connect to MonetDb Virtualbox from node.js server app-I am trying to connect Monetdb database, and I would like to use it with a node.js server app.

I currently set up a VirtualBox environment with monetdb package, as described here, and it works well: https://www.monetdbsolutions.com/solutions/cloud/vm
I can connect to this VM with putty with root@localhost:2222, and it works.

However, I cannot find the way to connect to the VM and to my database using node monetdb package: https://www.npmjs.com/package/monetdb

I used:
var options = {
    host     : 'localhost', 
    port     : 2222, 
    dbname   : 'mydb', 
    user     : 'root', 
    password : 'monetdb'
};

I cannot find the way to make it work.
When I use: 

var conn = require('monetdb').connect(options , function(err) {
    if (!err) console.log('connected');
});


It does not trigger any error, nor launches any connection. 

I think I am missing something when I access to the Virtual machine root@localhost:2222. It works with SSH, but I am not sure the access with monetdb node package is similar.

Is it even possible to connect to this VM from node.js? Maybe I should try another way to try this database with node.

They made a ""docker container"". I never used that kind of thing, but it may be suitable as well... 

Any help on how I can solve this would be a lot appreciated! 
Thanks very much on this.

Best regards
",3
60,33027517,How to manage schemas in R & MonetDB?,"I've asked a similar question recently, more geared toward dplyr. 

See dplyr &amp; monetdb - appropriate syntax for querying schema.table?

As dplyr &amp; MonetDB (according to @Hannes Mühleisen reply above) don't have a proper way to manage schemas, I resolved to use MonetDB.R / DBI native functions.

Also in this case the results have been somewhat problematic: it seems that at this moment MonetDB.R is capable to manage properly only one schema per database.

Let's see some code.  I create two schemas, and I create the same table name in each (standard sql practice).  I then try to write data into each.

&gt; conn &lt;– dbConnect(MonetDB.R(), ""db.url"", user= ""monetdb"", password=""monetdb"")
&gt; df &lt;- data.frame(i=10,j=20)
&gt; q &lt;- dbGetQuery(conn, ""CREATE SCHEMA foo;"")
&gt; q &lt;- dbGetQuery(conn, ""SET SCHEMA foo;"")
&gt; q &lt;- dbGetQuery(conn, ""CREATE TABLE mytable (i int, j int);"")
&gt; q &lt;- dbWriteTable(conn,  ""mytable"",df,overwrite=TRUE)
&gt; q &lt;- dbGetQuery(conn, ""CREATE SCHEMA bar;"")
&gt; q &lt;- dbGetQuery(conn, ""SET SCHEMA bar;"")
&gt; q &lt;- dbGetQuery(conn, ""CREATE TABLE mytable (i int, j int);"")


At this stage I should have two tables with identical names but in two distinct schemas.  This is confirmed by dbListTables (it would be nice to see the schemas but I can live without it):

&gt; dbListTables(conn)
[1] ""mytable"" ""mytable""


But as soon as I try to write to mytable with an identical query to the one used before, disaster!

&gt; q &lt;- dbWriteTable(conn,  ""mytable"",df,overwrite=TRUE)
Error in .local(conn, statement, ...) : 
  Unable to execute statement 'INSERT INTO mytable VALUES (10, 20)'.
Server says 'INSERT INTO: no such table 'mytable'' [#42S02].


At this point the DB is left in a messy state and is asking to roll back the transaction.

Let's try with overwrite=FALSE, just to see if there is anything different:

&gt; df &lt;- data.frame(i=10,j=20)
&gt; q &lt;- dbGetQuery(conn, ""CREATE SCHEMA foo;"")
&gt; q &lt;- dbGetQuery(conn, ""SET SCHEMA foo;"")
&gt; q &lt;- dbGetQuery(conn, ""CREATE TABLE mytable (i int, j int);"")
&gt; q &lt;- dbWriteTable(conn,  ""mytable"",df,overwrite=TRUE)
&gt; q &lt;- dbGetQuery(conn, ""CREATE SCHEMA bar;"")
&gt; q &lt;- dbGetQuery(conn, ""SET SCHEMA bar;"")
&gt; q &lt;- dbGetQuery(conn, ""CREATE TABLE mytable (i int, j int);"")
&gt; dbListTables(conn)
[1] ""mytable"" ""mytable""
&gt; q &lt;- dbWriteTable(conn,  ""mytable"",df,overwrite=FALSE)
Error in .local(conn, name, value, ...) : 
  Table mytable already exists. Set overwrite=TRUE if you want 
      to remove the existing table. Set append=TRUE if you would like to add the new data to the 
      existing table.


I've hit the mother lode with append=true

&gt; df &lt;- data.frame(i=10,j=20)
&gt; q &lt;- dbGetQuery(conn, ""CREATE SCHEMA foo;"")
&gt; q &lt;- dbGetQuery(conn, ""SET SCHEMA foo;"")
&gt; q &lt;- dbGetQuery(conn, ""CREATE TABLE mytable (i int, j int);"")
&gt; q &lt;- dbWriteTable(conn,  ""mytable"",df,overwrite=TRUE)
&gt; q &lt;- dbGetQuery(conn, ""CREATE SCHEMA bar;"")
&gt; q &lt;- dbGetQuery(conn, ""SET SCHEMA bar;"")
&gt; q &lt;- dbGetQuery(conn, ""CREATE TABLE mytable (i int, j int);"")
&gt; dbListTables(conn)
[1] ""mytable"" ""mytable""
&gt; q &lt;- dbWriteTable(conn,  ""mytable"",df,append=TRUE)


The latter sequence seems to work and load the data into the bar schema without problems. 
But is you use (as I normally do) csvdump=TRUE you get another error:

Error in .local(conn, statement, ...) : 
Unable to execute statement 'COPY 15 RECORDS INTO mytable FROM '/var/folders/m4/yfyjwcpj6rv5nq730bl9vr1h000...'.
Server says 'COPY INTO: no such table 'mytable'' [#42S02].


I could always avoid to use csvdump but I need to write big tables...

I've tried also with copy_to &amp; dplyr, but I get errors as well.

Not surprisingly, seen the problems with csvdump I got similar errors also using monetdb.read.csv: you get error if you try to load a csv when the same name table exists in another schema.

Am I doing something wrong?  Are there better way to do things? Is this a bug?

Any help is welcome.
",1,-1,-1.0,"How to manage schemas in R & MonetDB?-I've asked a similar question recently, more geared toward dplyr. 

See dplyr &amp; monetdb - appropriate syntax for querying schema.table?

As dplyr &amp; MonetDB (according to @Hannes Mühleisen reply above) don't have a proper way to manage schemas, I resolved to use MonetDB.R / DBI native functions.

Also in this case the results have been somewhat problematic: it seems that at this moment MonetDB.R is capable to manage properly only one schema per database.

Let's see some code.  I create two schemas, and I create the same table name in each (standard sql practice).  I then try to write data into each.

&gt; conn &lt;– dbConnect(MonetDB.R(), ""db.url"", user= ""monetdb"", password=""monetdb"")
&gt; df &lt;- data.frame(i=10,j=20)
&gt; q &lt;- dbGetQuery(conn, ""CREATE SCHEMA foo;"")
&gt; q &lt;- dbGetQuery(conn, ""SET SCHEMA foo;"")
&gt; q &lt;- dbGetQuery(conn, ""CREATE TABLE mytable (i int, j int);"")
&gt; q &lt;- dbWriteTable(conn,  ""mytable"",df,overwrite=TRUE)
&gt; q &lt;- dbGetQuery(conn, ""CREATE SCHEMA bar;"")
&gt; q &lt;- dbGetQuery(conn, ""SET SCHEMA bar;"")
&gt; q &lt;- dbGetQuery(conn, ""CREATE TABLE mytable (i int, j int);"")


At this stage I should have two tables with identical names but in two distinct schemas.  This is confirmed by dbListTables (it would be nice to see the schemas but I can live without it):

&gt; dbListTables(conn)
[1] ""mytable"" ""mytable""


But as soon as I try to write to mytable with an identical query to the one used before, disaster!

&gt; q &lt;- dbWriteTable(conn,  ""mytable"",df,overwrite=TRUE)
Error in .local(conn, statement, ...) : 
  Unable to execute statement 'INSERT INTO mytable VALUES (10, 20)'.
Server says 'INSERT INTO: no such table 'mytable'' [#42S02].


At this point the DB is left in a messy state and is asking to roll back the transaction.

Let's try with overwrite=FALSE, just to see if there is anything different:

&gt; df &lt;- data.frame(i=10,j=20)
&gt; q &lt;- dbGetQuery(conn, ""CREATE SCHEMA foo;"")
&gt; q &lt;- dbGetQuery(conn, ""SET SCHEMA foo;"")
&gt; q &lt;- dbGetQuery(conn, ""CREATE TABLE mytable (i int, j int);"")
&gt; q &lt;- dbWriteTable(conn,  ""mytable"",df,overwrite=TRUE)
&gt; q &lt;- dbGetQuery(conn, ""CREATE SCHEMA bar;"")
&gt; q &lt;- dbGetQuery(conn, ""SET SCHEMA bar;"")
&gt; q &lt;- dbGetQuery(conn, ""CREATE TABLE mytable (i int, j int);"")
&gt; dbListTables(conn)
[1] ""mytable"" ""mytable""
&gt; q &lt;- dbWriteTable(conn,  ""mytable"",df,overwrite=FALSE)
Error in .local(conn, name, value, ...) : 
  Table mytable already exists. Set overwrite=TRUE if you want 
      to remove the existing table. Set append=TRUE if you would like to add the new data to the 
      existing table.


I've hit the mother lode with append=true

&gt; df &lt;- data.frame(i=10,j=20)
&gt; q &lt;- dbGetQuery(conn, ""CREATE SCHEMA foo;"")
&gt; q &lt;- dbGetQuery(conn, ""SET SCHEMA foo;"")
&gt; q &lt;- dbGetQuery(conn, ""CREATE TABLE mytable (i int, j int);"")
&gt; q &lt;- dbWriteTable(conn,  ""mytable"",df,overwrite=TRUE)
&gt; q &lt;- dbGetQuery(conn, ""CREATE SCHEMA bar;"")
&gt; q &lt;- dbGetQuery(conn, ""SET SCHEMA bar;"")
&gt; q &lt;- dbGetQuery(conn, ""CREATE TABLE mytable (i int, j int);"")
&gt; dbListTables(conn)
[1] ""mytable"" ""mytable""
&gt; q &lt;- dbWriteTable(conn,  ""mytable"",df,append=TRUE)


The latter sequence seems to work and load the data into the bar schema without problems. 
But is you use (as I normally do) csvdump=TRUE you get another error:

Error in .local(conn, statement, ...) : 
Unable to execute statement 'COPY 15 RECORDS INTO mytable FROM '/var/folders/m4/yfyjwcpj6rv5nq730bl9vr1h000...'.
Server says 'COPY INTO: no such table 'mytable'' [#42S02].


I could always avoid to use csvdump but I need to write big tables...

I've tried also with copy_to &amp; dplyr, but I get errors as well.

Not surprisingly, seen the problems with csvdump I got similar errors also using monetdb.read.csv: you get error if you try to load a csv when the same name table exists in another schema.

Am I doing something wrong?  Are there better way to do things? Is this a bug?

Any help is welcome.
",5
61,32924039,Getting started with Datacell on MonetDB,"I am a master student working with MonetDB for my thesis. I installed MonetDB and now I need to work with the DataCell extension to proceed. I am on Lubuntu 15.04 and started the MonetDB tutorial, however when I begin to work with the DataCell (https://www.monetdb.org/Documentation/Extensions/Streams), I keep finding errors.

For example, on the ""set optimizer = 'datacell_pipe';"" instruction, I get the error ""optimizer 'datacell_pipe' unknown"". I also tried the ""sensor --host=localhost --port=50500 --events=1000 --columns=3 &amp; "" command, which is not found. 

I am using the July 2015 release, and I installed every package related to the MonetDB on Linux repositories.

Thanks in advance!
",-1,-1,-1.0,"Getting started with Datacell on MonetDB-I am a master student working with MonetDB for my thesis. I installed MonetDB and now I need to work with the DataCell extension to proceed. I am on Lubuntu 15.04 and started the MonetDB tutorial, however when I begin to work with the DataCell (https://www.monetdb.org/Documentation/Extensions/Streams), I keep finding errors.

For example, on the ""set optimizer = 'datacell_pipe';"" instruction, I get the error ""optimizer 'datacell_pipe' unknown"". I also tried the ""sensor --host=localhost --port=50500 --events=1000 --columns=3 &amp; "" command, which is not found. 

I am using the July 2015 release, and I installed every package related to the MonetDB on Linux repositories.

Thanks in advance!
",3
62,32883918,How to install Tachograph (a monitoring tool of MonetDB Jul2015 release) in Ubuntu 14.04,"I have installed the latest Jul2015 release, and I would like to use the
latest tools tachograph to determine the progress of query execution. 

According to https://www.monetdb.org/Documentation/Manuals/MonetDB/Profiler/tachograph,
Tachograph is available as of Jul2015 release

But I do not know how to install it. My system is ubuntu 14.04.

I have tried to use sudo apt-get install monetdb-tools but failed to
locate the package monetdb-tools.

Any suggestion would be helpful. Thanks.
",-1,-1,-1.0,"How to install Tachograph (a monitoring tool of MonetDB Jul2015 release) in Ubuntu 14.04-I have installed the latest Jul2015 release, and I would like to use the
latest tools tachograph to determine the progress of query execution. 

According to https://www.monetdb.org/Documentation/Manuals/MonetDB/Profiler/tachograph,
Tachograph is available as of Jul2015 release

But I do not know how to install it. My system is ubuntu 14.04.

I have tried to use sudo apt-get install monetdb-tools but failed to
locate the package monetdb-tools.

Any suggestion would be helpful. Thanks.
",3
63,33960368,Unable to combine large survey dataframes in R using MonetDB and MonetDBLite,"I am trying to concatenate or rbind 12 years of survey data, each with several million observations and a hundred or so variables so as to analyze annual trends while accounting for the survey structure.  The recent release of MonetDBLite for R seems like a great opportunity to implement column-based DBMS for this large dataset. I am, though, having difficulty in combining the data sets.  

In brief, using plyr::r.bind.fill to DBI:dbWriteTable returns a truncated table.  r.bind.fill is ideal because the data sets differ in variables from year to year.  Using dplyr::rbind_all does not seem to work at all. A less useful approach (but still acceptable) involves removing columns to make the tables identical and using a straight-ahead UNION ALL SQL operation.  But this returns syntax errors.  

I am very new to dplyr and MonetDB so this is surely due to my own ignorance, but I've spent a couple of days scouring the web without luck, so any help would be greatly appreciated.

Following is a reproducible example.

Cheers

Charles

# install.packages(""MonetDB.R"", repos=""http://dev.monetdb.org/Assets/R/"")
# install.packages(""MonetDBLite"", repos=""http://dev.monetdb.org/Assets/R/"")
library(MonetDBLite)
library(MonetDB.R)
library(dplyr)
library(plyr)
library(zoo)


mtcars1&lt;-mtcars[,-11] # create 2 slightly different versions of mtcars
mtcars2&lt;-mtcars[,-10]

mtcars1&lt;-coredata(mtcars1)[rep(seq(nrow(mtcars1)),200000),] # create large versions of those dataframes
mtcars2&lt;-coredata(mtcars2)[rep(seq(nrow(mtcars2)),200000),]

dbdir &lt;- tempdir() # create a temporary directory
con &lt;- dbConnect(MonetDB.R(), embedded=dbdir) # use DBI to connect to MonetDB

dbWriteTable(con, ""mtcars1"", mtcars1) #  write the dataframes to column-based MonetDB tables
dbWriteTable(con, ""mtcars2"", mtcars2) 
dbListTables(con)

ms &lt;- src_monetdb(embedded=dbdir) # create a dplyr::tbl version tables
mt1 &lt;- tbl(ms, ""mtcars1"") 
mt2&lt;-tbl(ms, ""mtcars2"")

# try plyr::rbind.fill to concatenate tables
dbWriteTable(con, ""mt_1_2"", rbind.fill(as.data.frame(mt1, mt2)))

# Warning message:
# Only first 6,400,000 results retrieved. Use n = -1 to retrieve all.

dbGetQuery(con, ""SELECT COUNT(*) FROM mt_1_2 "" )
#      L1
# 1 1e+05

dbRemoveTable(con, ""mt_1_2"") # remove table to re-try

# try dbFetch(res, n=-1) to retrieve all results
dbFetch(dbWriteTable(con, ""mt_1_2"", rbind.fill(as.data.frame(mt1, mt2))), n=-1)

# Error in (function (classes, fdef, mtable)  :
#   unable to find an inherited method for function ‘dbFetch’ for signature ‘""logical"", ""numeric""’
# In addition: Warning message:
# Only first 6,400,000 results retrieved. Use n = -1 to retrieve all.

dbRemoveTable(con, ""mt_1_2"") # remove table to re-try

dbListFields(con, ""mtcars1"") # remove fields to make table columns identical
dbListFields(con, ""mtcars2"")

dbGetQuery(con, ""
ALTER TABLE mtcars1
DROP COLUMN gear
"")

dbGetQuery(con, ""
ALTER TABLE mtcars2
DROP COLUMN carb
"")

dbGetQuery(con,
    ""CREATE TABLE mt_1_2 WITH 
    Select * FROM mtcars1
    UNION ALL
    Select * FROM mtcars2"")


# Error in .local(conn, statement, ...) :
#   Unable to execute statement 'CREATE TABLE mt_1_2 AS
#   Select * FROM mtcars1
#   UNION ALL
#   Select * FROM mtcars2'.
# Server says 'syntax error, unexpected SCOLON, expecting WITH in: ""create table mt_1_2 as
#   select * from mtcars1
#   union all
#   select * from mtcars2""
# ' [#42000].

",-1,-1,-1.0,"Unable to combine large survey dataframes in R using MonetDB and MonetDBLite-I am trying to concatenate or rbind 12 years of survey data, each with several million observations and a hundred or so variables so as to analyze annual trends while accounting for the survey structure.  The recent release of MonetDBLite for R seems like a great opportunity to implement column-based DBMS for this large dataset. I am, though, having difficulty in combining the data sets.  

In brief, using plyr::r.bind.fill to DBI:dbWriteTable returns a truncated table.  r.bind.fill is ideal because the data sets differ in variables from year to year.  Using dplyr::rbind_all does not seem to work at all. A less useful approach (but still acceptable) involves removing columns to make the tables identical and using a straight-ahead UNION ALL SQL operation.  But this returns syntax errors.  

I am very new to dplyr and MonetDB so this is surely due to my own ignorance, but I've spent a couple of days scouring the web without luck, so any help would be greatly appreciated.

Following is a reproducible example.

Cheers

Charles

# install.packages(""MonetDB.R"", repos=""http://dev.monetdb.org/Assets/R/"")
# install.packages(""MonetDBLite"", repos=""http://dev.monetdb.org/Assets/R/"")
library(MonetDBLite)
library(MonetDB.R)
library(dplyr)
library(plyr)
library(zoo)


mtcars1&lt;-mtcars[,-11] # create 2 slightly different versions of mtcars
mtcars2&lt;-mtcars[,-10]

mtcars1&lt;-coredata(mtcars1)[rep(seq(nrow(mtcars1)),200000),] # create large versions of those dataframes
mtcars2&lt;-coredata(mtcars2)[rep(seq(nrow(mtcars2)),200000),]

dbdir &lt;- tempdir() # create a temporary directory
con &lt;- dbConnect(MonetDB.R(), embedded=dbdir) # use DBI to connect to MonetDB

dbWriteTable(con, ""mtcars1"", mtcars1) #  write the dataframes to column-based MonetDB tables
dbWriteTable(con, ""mtcars2"", mtcars2) 
dbListTables(con)

ms &lt;- src_monetdb(embedded=dbdir) # create a dplyr::tbl version tables
mt1 &lt;- tbl(ms, ""mtcars1"") 
mt2&lt;-tbl(ms, ""mtcars2"")

# try plyr::rbind.fill to concatenate tables
dbWriteTable(con, ""mt_1_2"", rbind.fill(as.data.frame(mt1, mt2)))

# Warning message:
# Only first 6,400,000 results retrieved. Use n = -1 to retrieve all.

dbGetQuery(con, ""SELECT COUNT(*) FROM mt_1_2 "" )
#      L1
# 1 1e+05

dbRemoveTable(con, ""mt_1_2"") # remove table to re-try

# try dbFetch(res, n=-1) to retrieve all results
dbFetch(dbWriteTable(con, ""mt_1_2"", rbind.fill(as.data.frame(mt1, mt2))), n=-1)

# Error in (function (classes, fdef, mtable)  :
#   unable to find an inherited method for function ‘dbFetch’ for signature ‘""logical"", ""numeric""’
# In addition: Warning message:
# Only first 6,400,000 results retrieved. Use n = -1 to retrieve all.

dbRemoveTable(con, ""mt_1_2"") # remove table to re-try

dbListFields(con, ""mtcars1"") # remove fields to make table columns identical
dbListFields(con, ""mtcars2"")

dbGetQuery(con, ""
ALTER TABLE mtcars1
DROP COLUMN gear
"")

dbGetQuery(con, ""
ALTER TABLE mtcars2
DROP COLUMN carb
"")

dbGetQuery(con,
    ""CREATE TABLE mt_1_2 WITH 
    Select * FROM mtcars1
    UNION ALL
    Select * FROM mtcars2"")


# Error in .local(conn, statement, ...) :
#   Unable to execute statement 'CREATE TABLE mt_1_2 AS
#   Select * FROM mtcars1
#   UNION ALL
#   Select * FROM mtcars2'.
# Server says 'syntax error, unexpected SCOLON, expecting WITH in: ""create table mt_1_2 as
#   select * from mtcars1
#   union all
#   select * from mtcars2""
# ' [#42000].

",4
64,34448735,Unable to Bulk Import Free flow text MonetDB.R,"I am trying to import a dataset of 217,000 records (Jeopardy Dataset) into MonetDB through the MonetDB.R interface.

The file is a CSV file with top two lines as folows:

show_nos, air_dt, rnd, category, prize, ques, ans,x1,x2,x3
4680,12/31/2004,Jeopardy!,THE COMPANY LINE,$200 ,""In 1963, live on """"The Art Linkletter Show"""", this company served its billionth burger"",McDonald's,,,

4680,12/31/2004,Jeopardy!,EPITAPHS &amp; TRIBUTES,$200 ,""Signer of the Dec. of Indep., framer of the Constitution of Mass., second President of the United States"",John Adams,,,


The problem I face is while importing the ques column (data between "" ""). That column has multiple commas and punctuations, and monet.read.csv is unable to import that column.

I tried importing a few records without the ques column, and it works perfectly.

Can you please suggest on how to import such columns with free flow text in monetdb? Once imported I intend to perform some text analysis on the column.
",-1,-1,-1.0,"Unable to Bulk Import Free flow text MonetDB.R-I am trying to import a dataset of 217,000 records (Jeopardy Dataset) into MonetDB through the MonetDB.R interface.

The file is a CSV file with top two lines as folows:

show_nos, air_dt, rnd, category, prize, ques, ans,x1,x2,x3
4680,12/31/2004,Jeopardy!,THE COMPANY LINE,$200 ,""In 1963, live on """"The Art Linkletter Show"""", this company served its billionth burger"",McDonald's,,,

4680,12/31/2004,Jeopardy!,EPITAPHS &amp; TRIBUTES,$200 ,""Signer of the Dec. of Indep., framer of the Constitution of Mass., second President of the United States"",John Adams,,,


The problem I face is while importing the ques column (data between "" ""). That column has multiple commas and punctuations, and monet.read.csv is unable to import that column.

I tried importing a few records without the ques column, and it works perfectly.

Can you please suggest on how to import such columns with free flow text in monetdb? Once imported I intend to perform some text analysis on the column.
",0
65,34600542,R package calls for library update,"So I'm trying to implement some R script that you can see here. I'm using R 3.2.3 on Mac OS 10.10.5. 

But an error is stopping me, and it involves a part of the library I'm not familiar with. The problem comes up when I try and load MonetDBLite with the following line:

&gt; library(MonetDBLite)


At that point, I get a long error, but the gist of it is this:

Reason: Incompatible library version: libmonetdb5.so 
requires version 8.0.0 or later, but liblzma.5.dylib 
provides version 6.0.0


I tried updating the whole Mac OS system, but that didn't do it. Am I supposed to update liblzma? Any other ideas?
",-1,-1,-1.0,"R package calls for library update-So I'm trying to implement some R script that you can see here. I'm using R 3.2.3 on Mac OS 10.10.5. 

But an error is stopping me, and it involves a part of the library I'm not familiar with. The problem comes up when I try and load MonetDBLite with the following line:

&gt; library(MonetDBLite)


At that point, I get a long error, but the gist of it is this:

Reason: Incompatible library version: libmonetdb5.so 
requires version 8.0.0 or later, but liblzma.5.dylib 
provides version 6.0.0


I tried updating the whole Mac OS system, but that didn't do it. Am I supposed to update liblzma? Any other ideas?
",3
66,34737232,MonetDB - COPY INTO bulk insert with special char \,"I'm using COPY INTO to bulk insert some data into MonetDB. The csv that I'm copying from has some special characters like \ in some string fields and it broke the insertion. The error that I got is:


  Failed to import table line 1 field 11 'clob' expected in 'data here'


and when I replace \ with / it is working fine, I think the problem related to Java because \ is using as escape character but I'm not sure!

this is the command I used for bulk load :

COPY INTO line : copy into dbtest.dbo.table3 from '/home/etltest/out.csv' using delimiters ';','\n','""';


and this is a sample row :

""452475"";""0047748"";""002"";""2014-01-01 00:16:00.000"";""2"";""2014-01-01 00:16:16.090"";""1"";""1"";""0"";""testfile.xml"";""~/uploads/Su/F0047748\2014\1"";""3d67502‌​e-94ed-4e3d"";""2014-01-01 00:15:25.283"" 


I found a work around which use REPLACE function in the SQL to replace \ with / but this is too heavy processing function when handling millions of rows

Why is this happening and is there any way rather than replace the \ ?
",-1,-1,-1.0,"MonetDB - COPY INTO bulk insert with special char \-I'm using COPY INTO to bulk insert some data into MonetDB. The csv that I'm copying from has some special characters like \ in some string fields and it broke the insertion. The error that I got is:


  Failed to import table line 1 field 11 'clob' expected in 'data here'


and when I replace \ with / it is working fine, I think the problem related to Java because \ is using as escape character but I'm not sure!

this is the command I used for bulk load :

COPY INTO line : copy into dbtest.dbo.table3 from '/home/etltest/out.csv' using delimiters ';','\n','""';


and this is a sample row :

""452475"";""0047748"";""002"";""2014-01-01 00:16:00.000"";""2"";""2014-01-01 00:16:16.090"";""1"";""1"";""0"";""testfile.xml"";""~/uploads/Su/F0047748\2014\1"";""3d67502‌​e-94ed-4e3d"";""2014-01-01 00:15:25.283"" 


I found a work around which use REPLACE function in the SQL to replace \ with / but this is too heavy processing function when handling millions of rows

Why is this happening and is there any way rather than replace the \ ?
",0
67,35087473,MonetDB test client application not linking,"I tried to compile test application for MonetDB under Ubuntu 14.04 LTS Trusty Tahr. I followed the download instructions from official site, installation was successful, then I installed a bunch of other packages in order to copmpile it. Now when I try to compile and link test application I get the following errors:

libtool: compile:  gcc -c -I/usr/include/monetdb test.c  -fPIC -DPIC -o .libs/test.o
libtool: compile:  gcc -c -I/usr/include/monetdb test.c -o test.o &gt;/dev/null 2&gt;&amp;1
libtool: link: gcc -o test test.o  -lmapi -lstream -lssl -lcrypto -lcurl -lz
test.o: In function `die':
test.c:(.text+0x1c): undefined reference to `mapi_explain_query'
test.c:(.text+0x27): undefined reference to `mapi_result_error'
test.c:(.text+0x3f): undefined reference to `mapi_explain_result'
test.c:(.text+0x4a): undefined reference to `mapi_next_result'
test.c:(.text+0x5a): undefined reference to `mapi_close_handle'
test.c:(.text+0x65): undefined reference to `mapi_destroy'
test.c:(.text+0x81): undefined reference to `mapi_explain'
test.c:(.text+0x8c): undefined reference to `mapi_destroy'
test.o: In function `query':
test.c:(.text+0xde): undefined reference to `mapi_query'
test.c:(.text+0xf2): undefined reference to `mapi_error'
test.o: In function `update':
test.c:(.text+0x133): undefined reference to `mapi_close_handle'
test.o: In function `main':
test.c:(.text+0x190): undefined reference to `mapi_connect'
test.c:(.text+0x1a0): undefined reference to `mapi_error'
test.c:(.text+0x222): undefined reference to `mapi_fetch_field'
test.c:(.text+0x23a): undefined reference to `mapi_fetch_field'
test.c:(.text+0x266): undefined reference to `mapi_fetch_row'
test.c:(.text+0x276): undefined reference to `mapi_close_handle'
test.c:(.text+0x282): undefined reference to `mapi_destroy'
collect2: error: ld returned 1 exit status
./t.sh: 11: ./t.sh: ./test: not found


What I'm doing wrong? What should I additionally install or change in compilation options for successful linking of test example?
",-1,-1,-1.0,"MonetDB test client application not linking-I tried to compile test application for MonetDB under Ubuntu 14.04 LTS Trusty Tahr. I followed the download instructions from official site, installation was successful, then I installed a bunch of other packages in order to copmpile it. Now when I try to compile and link test application I get the following errors:

libtool: compile:  gcc -c -I/usr/include/monetdb test.c  -fPIC -DPIC -o .libs/test.o
libtool: compile:  gcc -c -I/usr/include/monetdb test.c -o test.o &gt;/dev/null 2&gt;&amp;1
libtool: link: gcc -o test test.o  -lmapi -lstream -lssl -lcrypto -lcurl -lz
test.o: In function `die':
test.c:(.text+0x1c): undefined reference to `mapi_explain_query'
test.c:(.text+0x27): undefined reference to `mapi_result_error'
test.c:(.text+0x3f): undefined reference to `mapi_explain_result'
test.c:(.text+0x4a): undefined reference to `mapi_next_result'
test.c:(.text+0x5a): undefined reference to `mapi_close_handle'
test.c:(.text+0x65): undefined reference to `mapi_destroy'
test.c:(.text+0x81): undefined reference to `mapi_explain'
test.c:(.text+0x8c): undefined reference to `mapi_destroy'
test.o: In function `query':
test.c:(.text+0xde): undefined reference to `mapi_query'
test.c:(.text+0xf2): undefined reference to `mapi_error'
test.o: In function `update':
test.c:(.text+0x133): undefined reference to `mapi_close_handle'
test.o: In function `main':
test.c:(.text+0x190): undefined reference to `mapi_connect'
test.c:(.text+0x1a0): undefined reference to `mapi_error'
test.c:(.text+0x222): undefined reference to `mapi_fetch_field'
test.c:(.text+0x23a): undefined reference to `mapi_fetch_field'
test.c:(.text+0x266): undefined reference to `mapi_fetch_row'
test.c:(.text+0x276): undefined reference to `mapi_close_handle'
test.c:(.text+0x282): undefined reference to `mapi_destroy'
collect2: error: ld returned 1 exit status
./t.sh: 11: ./t.sh: ./test: not found


What I'm doing wrong? What should I additionally install or change in compilation options for successful linking of test example?
",1
68,35317193,R: Installing MonetDBLite under Ubuntu 14.04 LTS,"I try to use MonetDBLite for R to analyze survey data for free on an Ubuntu 14.04 OS.

Installing MonetDBLite from source via

install.packages(""MonetDBLite"",
                 repos=c(""http://dev.monetdb.org/Assets/R/"",
                         ""http://cran.rstudio.com/""),
                 type=""source"")


results in the following error.

/usr/bin/ld: cannot find -lcurl
/usr/bin/ld: cannot find -luuid

",-1,-1,-1.0,"R: Installing MonetDBLite under Ubuntu 14.04 LTS-I try to use MonetDBLite for R to analyze survey data for free on an Ubuntu 14.04 OS.

Installing MonetDBLite from source via

install.packages(""MonetDBLite"",
                 repos=c(""http://dev.monetdb.org/Assets/R/"",
                         ""http://cran.rstudio.com/""),
                 type=""source"")


results in the following error.

/usr/bin/ld: cannot find -lcurl
/usr/bin/ld: cannot find -luuid

",3
69,35571560,Type hugeint is not defined in MonetDB,"I am facing one problem while running the query from Django-Python. I am getting error ""Type hugeint is not defined"" using database Monetdb. Can anyone suggest why this error is coming.
",-1,-1,-1.0,"Type hugeint is not defined in MonetDB-I am facing one problem while running the query from Django-Python. I am getting error ""Type hugeint is not defined"" using database Monetdb. Can anyone suggest why this error is coming.
",0
70,35582371,Using custom function in mutate() with dplyr & monetDB,"I am just beginning to discover all the advantages of using R &amp; monetDB/monetDBLite package - great stuff!
I was curious however if it's possible to use a custom defined function in dplyr's mutate() i.e.  

# Connect to monetDBLite
db &lt;- src_monetdb(embedded = db.dir)
data &lt;- tbl(db, ""my.table"")

# Try to make a new column using custom defined function  
data %&gt;% group_by(colX) %&gt;% mutate(NewCol = customFunc())  


Results in the following error:  

Error in .local(conn, statement, ...) : 
Unable to execute statement 'SELECT colA colB colC...'.
Server says 'ParseException:SQLparser:SELECT: no such operator 'customFunc''.


It seems like the SQL parser has a problem finding the custom function. Am I overseeing something (declare R code in a SQL function definition etc.) ? Is it possible to use custom defined functions with the monetDBLite package like this?
",-1,1,-1.0,"Using custom function in mutate() with dplyr & monetDB-I am just beginning to discover all the advantages of using R &amp; monetDB/monetDBLite package - great stuff!
I was curious however if it's possible to use a custom defined function in dplyr's mutate() i.e.  

# Connect to monetDBLite
db &lt;- src_monetdb(embedded = db.dir)
data &lt;- tbl(db, ""my.table"")

# Try to make a new column using custom defined function  
data %&gt;% group_by(colX) %&gt;% mutate(NewCol = customFunc())  


Results in the following error:  

Error in .local(conn, statement, ...) : 
Unable to execute statement 'SELECT colA colB colC...'.
Server says 'ParseException:SQLparser:SELECT: no such operator 'customFunc''.


It seems like the SQL parser has a problem finding the custom function. Am I overseeing something (declare R code in a SQL function definition etc.) ? Is it possible to use custom defined functions with the monetDBLite package like this?
",4
71,35697454,MonetDB storage() function,"From MonetDB docs 
https://www.monetdb.org/Documentation/Cookbooks/SQLrecipes/storage-model,  

The storage footprint for any given database schema
can be obtained by inspecting the table producing 
function storage()


Here's a sample query from the documentation:

select * from storage() where ""table"" = 'lineitem';


But when I try a similar query,  I get below error:

SELECT: no such operator 'storage'


What am I missing?
",-1,-1,-1.0,"MonetDB storage() function-From MonetDB docs 
https://www.monetdb.org/Documentation/Cookbooks/SQLrecipes/storage-model,  

The storage footprint for any given database schema
can be obtained by inspecting the table producing 
function storage()


Here's a sample query from the documentation:

select * from storage() where ""table"" = 'lineitem';


But when I try a similar query,  I get below error:

SELECT: no such operator 'storage'


What am I missing?
",4
72,35939772,R: Installing MonetDBLite 0.2.0 under Red Hat Enterprise Linux Server 6.7,"I am trying to install/compile the MonetDBLite package version 0.2.0 under R version 3.2.1 (the most recent one provided by the cluster on which I am working) on a system running Red Hat Enterprise Linux Server 6.7. However the Intel C++ Compiler stops with the following warning:

icc: command line warning #10006: ignoring unknown option '-foutput'
icc: error #10236: File not found:  'libmonetdb5.so'


I guess the problem starts a bit earlier with the following warnings:

Makefile:1032: warning: overriding commands for target `all'
Makefile:523: warning: ignoring old commands for target `all'
make[2]: Leaving directory `/scratch/Rtmp4Nlu3l/R.INSTALL6e966e9f4376/MonetDBLite/src'
/opt/bwhpc/common/math/R/3.2.1-mkl-11.2.3-intel-15.0/lib64/R/bin/R CMD SHLIB --output libmonetdb5.so -Wl,--whole-archive `find buildtools common clients gdk monetdb5 sql tools -name ""*.o"" | xargs echo` -Wl,--no-whole-archive -lz -lpcre
make[2]: Entering directory `/scratch/Rtmp4Nlu3l/R.INSTALL6e966e9f4376/MonetDBLite/src'
icc -std=gnu99 -shared -L/opt/bwhpc/common/math/R/3.2.1-mkl-11.2.3-intel-15.0/lib64/R/lib 

(...)

icc: command line warning #10006: ignoring unknown option '-foutput'
icc: error #10236: File not found:  'libmonetdb5.so


I'm not sure whether the libmonetdb5.so file gets written into the wrong directory and then cannot be accessed by the compiler that gets started in a deeper directory. However, even if that would be the case I have no clue how to fix this, so I would be grateful for any suggestions about the causes of this problem and how to fix this.
",-1,-1,-1.0,"R: Installing MonetDBLite 0.2.0 under Red Hat Enterprise Linux Server 6.7-I am trying to install/compile the MonetDBLite package version 0.2.0 under R version 3.2.1 (the most recent one provided by the cluster on which I am working) on a system running Red Hat Enterprise Linux Server 6.7. However the Intel C++ Compiler stops with the following warning:

icc: command line warning #10006: ignoring unknown option '-foutput'
icc: error #10236: File not found:  'libmonetdb5.so'


I guess the problem starts a bit earlier with the following warnings:

Makefile:1032: warning: overriding commands for target `all'
Makefile:523: warning: ignoring old commands for target `all'
make[2]: Leaving directory `/scratch/Rtmp4Nlu3l/R.INSTALL6e966e9f4376/MonetDBLite/src'
/opt/bwhpc/common/math/R/3.2.1-mkl-11.2.3-intel-15.0/lib64/R/bin/R CMD SHLIB --output libmonetdb5.so -Wl,--whole-archive `find buildtools common clients gdk monetdb5 sql tools -name ""*.o"" | xargs echo` -Wl,--no-whole-archive -lz -lpcre
make[2]: Entering directory `/scratch/Rtmp4Nlu3l/R.INSTALL6e966e9f4376/MonetDBLite/src'
icc -std=gnu99 -shared -L/opt/bwhpc/common/math/R/3.2.1-mkl-11.2.3-intel-15.0/lib64/R/lib 

(...)

icc: command line warning #10006: ignoring unknown option '-foutput'
icc: error #10236: File not found:  'libmonetdb5.so


I'm not sure whether the libmonetdb5.so file gets written into the wrong directory and then cannot be accessed by the compiler that gets started in a deeper directory. However, even if that would be the case I have no clue how to fix this, so I would be grateful for any suggestions about the causes of this problem and how to fix this.
",3
73,35981741,Add a new data type in monetdb?,"I want to add a new custom data type into monetdb. Do you know the procedure?
I have tried to add it using the gdk_atoms.c but with no luck. 
",0,-1,-1.0,"Add a new data type in monetdb?-I want to add a new custom data type into monetdb. Do you know the procedure?
I have tried to add it using the gdk_atoms.c but with no luck. 
",4
74,36419553,MONETDB unexpected IDENT in: error on insert,"I have a table and want to insert some data from a file, but I am getting some very odd error messages, I cant understand

CREATE TABLE ""MCS_HHGRID_MASTER"" (
 ""FAMSRNO"" VARCHAR(7),
 ""PNUM"" INT ,
 ""PSEX"" SMALLINT ,
 ""PDOBD"" SMALLINT ,
 ""PDOBM"" SMALLINT ,
 ""PDOBY"" INT ,
 ""PDIED"" SMALLINT ,
 ""PDODD"" SMALLINT ,
 ""PDODM"" SMALLINT ,
 ""PDODY"" INT ,
 ""PCOBS"" VARCHAR(4) ,
 ""PCOBN"" INT ,
 ""PETHNICC"" SMALLINT ,
 ""PETHNIC"" SMALLINT ,
 ""PETHNIC06"" SMALLINT ,
 ""PETHNIC08"" SMALLINT ,
 ""PETHNIC11"" SMALLINT ,
 ""PRELCM"" SMALLINT ,
 ""PNAME"" VARCHAR(30) ,
 ""PRES1"" SMALLINT ,
 ""PRES2"" SMALLINT ,
 ""PRES3"" SMALLINT ,
 ""PRES4"" SMALLINT ,
 ""PRES5"" SMALLINT
 );


example data from file:

M10107X|1|2|1|1|1968|||||XE|||||||7|tom|1|1|1|1|
M10107X|2|2|1|5|1997||||||||||||11|dick|1|1|1|1|
M10107X|3|2|1|1|1995||||||||||||11|harry|1|1|1|1|
M10107X|4|1|1|3|1967||||||||||||7|mary|1|1|1|1|
M10107X|100|1|1|9|2000||||||||||||96|joanne|1|1|1|1|

mclient -u monetdb -d mcs ""COPY INTO MCS_HHGRID_MASTER from STDIN"" - &lt; pathtofile/MCS_HHGRID_MASTER.csv


Error Message:

COPY INTO MCS_HHGRID_MASTER from STDIN: cannot open
syntax error, unexpected IDENT in : m10107x

",-1,-1,-1.0,"MONETDB unexpected IDENT in: error on insert-I have a table and want to insert some data from a file, but I am getting some very odd error messages, I cant understand

CREATE TABLE ""MCS_HHGRID_MASTER"" (
 ""FAMSRNO"" VARCHAR(7),
 ""PNUM"" INT ,
 ""PSEX"" SMALLINT ,
 ""PDOBD"" SMALLINT ,
 ""PDOBM"" SMALLINT ,
 ""PDOBY"" INT ,
 ""PDIED"" SMALLINT ,
 ""PDODD"" SMALLINT ,
 ""PDODM"" SMALLINT ,
 ""PDODY"" INT ,
 ""PCOBS"" VARCHAR(4) ,
 ""PCOBN"" INT ,
 ""PETHNICC"" SMALLINT ,
 ""PETHNIC"" SMALLINT ,
 ""PETHNIC06"" SMALLINT ,
 ""PETHNIC08"" SMALLINT ,
 ""PETHNIC11"" SMALLINT ,
 ""PRELCM"" SMALLINT ,
 ""PNAME"" VARCHAR(30) ,
 ""PRES1"" SMALLINT ,
 ""PRES2"" SMALLINT ,
 ""PRES3"" SMALLINT ,
 ""PRES4"" SMALLINT ,
 ""PRES5"" SMALLINT
 );


example data from file:

M10107X|1|2|1|1|1968|||||XE|||||||7|tom|1|1|1|1|
M10107X|2|2|1|5|1997||||||||||||11|dick|1|1|1|1|
M10107X|3|2|1|1|1995||||||||||||11|harry|1|1|1|1|
M10107X|4|1|1|3|1967||||||||||||7|mary|1|1|1|1|
M10107X|100|1|1|9|2000||||||||||||96|joanne|1|1|1|1|

mclient -u monetdb -d mcs ""COPY INTO MCS_HHGRID_MASTER from STDIN"" - &lt; pathtofile/MCS_HHGRID_MASTER.csv


Error Message:

COPY INTO MCS_HHGRID_MASTER from STDIN: cannot open
syntax error, unexpected IDENT in : m10107x

",0
75,36454583,MonetDB replication,"Does anyone create replication with MonetDB?
I've tried many times but still cannot run MonetDB in master-slave mode(replication).

I have such errors when start slave server:


!mvc_init: unable to create system tables
!SQLException:SQLinit:Catalogue initialization failed


I've done all that written in https://www.monetdb.org/Documentation/Cookbooks/SQLrecipes/TransactionReplication but in does no works.

Does anyone can help me?
",-1,-1,-1.0,"MonetDB replication-Does anyone create replication with MonetDB?
I've tried many times but still cannot run MonetDB in master-slave mode(replication).

I have such errors when start slave server:


!mvc_init: unable to create system tables
!SQLException:SQLinit:Catalogue initialization failed


I've done all that written in https://www.monetdb.org/Documentation/Cookbooks/SQLrecipes/TransactionReplication but in does no works.

Does anyone can help me?
",5
76,37302096,MonetDB connect to GO.db within R code that is run in-database,"I am trying to run some R code in database.
Most of it is going pretty well, but I seem to have stumbled on a bug.
I cannot load the following package, which is a dependency for some of my code.
WGCNA

I have been chasing it down, and it seems to be due to an error when trying to load GO.db.

I get the following error:

Error in .local(conn, statement, ...) : 
  Unable to execute statement 'SELECT * FROM tmp_test();'.
Server says '!Error running R expression. Error message: Error in as.data.frame((function() { : '.


Digging a bit further it seems to be due to the following statement:

dbconn &lt;- dbFileConnect(dbfile)


Error can be reproduced using:

functionDef &lt;- paste(
""CREATE FUNCTION tmp_test() "",
""RETURNS TABLE(output STRING)"",
""LANGUAGE R "",
""{"", 
""library(AnnotationDbi)"",
""datacache &lt;- new.env(hash=TRUE, parent=emptyenv())"",
""pkgname &lt;- 'GO.db'"",
""libname &lt;- .libPaths()[1]"",
""dbfile &lt;- system.file('extdata', 'GO.sqlite', package=pkgname, lib.loc=libname)"",
""assign('dbfile', dbfile, envir=datacache)"",
""dbconn &lt;- dbFileConnect(dbfile)"",
""};"", sep = ""\n"")

dbGetQuery(conn, functionDef)

dbGetQuery(conn, ""SELECT * FROM tmp_test();"")


By the way, installing GO.db from within MonetDB works just fine.
And can be done using the following R code:

source(""https://bioconductor.org/biocLite.R"")
biocLite(""GO.db"")


Hints on how to resolve this are greatly appreciated.

As to what datacache is supposed to do here, this was part of my debugging efforts. The code is part of zzz.R in the GO.db package. Another way to get this error is trying to load the GO.db package.

I tried the code from Hannes Mühleisen and I get the following result:
I restarted monetdbd first.


  dbGetQuery(conn, ""SELECT * FROM tmp_test()"")
  QQ: 'SELECT * FROM tmp_test()' Error in .local(conn, statement, ...) :
  Unable to execute statement 'SELECT * FROM tmp_test()'. Server says
  '!Error running R expression. Error message: Error in
  dbConnect(SQLite(), dbname = dbfile, cache_size = 64000, synchronous =
  ""off"",  : '.


Then I just tried again and got this error:


  dbGetQuery(conn, ""SELECT * FROM tmp_test()"") QQ: 'SELECT * FROM
  tmp_test()' Error in .local(conn, statement, ...) :    Unable to
  execute statement 'SELECT * FROM tmp_test()'. Server says '!Error
  running R expression. Error message: Error in
  as.data.frame((function() { : '.


After I restart monetdbd I can reproduce this cycle.
",-1,-1,-1.0,"MonetDB connect to GO.db within R code that is run in-database-I am trying to run some R code in database.
Most of it is going pretty well, but I seem to have stumbled on a bug.
I cannot load the following package, which is a dependency for some of my code.
WGCNA

I have been chasing it down, and it seems to be due to an error when trying to load GO.db.

I get the following error:

Error in .local(conn, statement, ...) : 
  Unable to execute statement 'SELECT * FROM tmp_test();'.
Server says '!Error running R expression. Error message: Error in as.data.frame((function() { : '.


Digging a bit further it seems to be due to the following statement:

dbconn &lt;- dbFileConnect(dbfile)


Error can be reproduced using:

functionDef &lt;- paste(
""CREATE FUNCTION tmp_test() "",
""RETURNS TABLE(output STRING)"",
""LANGUAGE R "",
""{"", 
""library(AnnotationDbi)"",
""datacache &lt;- new.env(hash=TRUE, parent=emptyenv())"",
""pkgname &lt;- 'GO.db'"",
""libname &lt;- .libPaths()[1]"",
""dbfile &lt;- system.file('extdata', 'GO.sqlite', package=pkgname, lib.loc=libname)"",
""assign('dbfile', dbfile, envir=datacache)"",
""dbconn &lt;- dbFileConnect(dbfile)"",
""};"", sep = ""\n"")

dbGetQuery(conn, functionDef)

dbGetQuery(conn, ""SELECT * FROM tmp_test();"")


By the way, installing GO.db from within MonetDB works just fine.
And can be done using the following R code:

source(""https://bioconductor.org/biocLite.R"")
biocLite(""GO.db"")


Hints on how to resolve this are greatly appreciated.

As to what datacache is supposed to do here, this was part of my debugging efforts. The code is part of zzz.R in the GO.db package. Another way to get this error is trying to load the GO.db package.

I tried the code from Hannes Mühleisen and I get the following result:
I restarted monetdbd first.


  dbGetQuery(conn, ""SELECT * FROM tmp_test()"")
  QQ: 'SELECT * FROM tmp_test()' Error in .local(conn, statement, ...) :
  Unable to execute statement 'SELECT * FROM tmp_test()'. Server says
  '!Error running R expression. Error message: Error in
  dbConnect(SQLite(), dbname = dbfile, cache_size = 64000, synchronous =
  ""off"",  : '.


Then I just tried again and got this error:


  dbGetQuery(conn, ""SELECT * FROM tmp_test()"") QQ: 'SELECT * FROM
  tmp_test()' Error in .local(conn, statement, ...) :    Unable to
  execute statement 'SELECT * FROM tmp_test()'. Server says '!Error
  running R expression. Error message: Error in
  as.data.frame((function() { : '.


After I restart monetdbd I can reproduce this cycle.
",0
77,37302261,MonetDB embedded R code debugging,"In my efforts to work around the issue mentioned here:
MonetDB connect to GO.db within R code that is run in-database

I went ahead and copied the code from WGCNA that I needed to my own package and installed it. Obviously, I now can load the package without any issues (since I didn't need the GO.db part).

However, I seem to run into another issue:


  Server says '!Error running R expression. Error message: Error in
  .C(""corFast"", x = as.double(x), nrow = as.integer(nrow(x)), ncolx =
  as.integer(ncol(x)),  : '.


I indeed wanted to use the faster cor function from WGCNA, but apparently the C call now creates another issue.
Unfortunately, the message is not informative. I already tried to run the query interactively and adding debug to the statement. This did not provide me with more information.

Is there anything that I can do to increase the verbosity, so that I can debug the proces?

I also tried:

options(monetdb.debug.query=F)


This resulted in a bit of extra output prior to the query, but no extra output on the error that occurred.

Using the suggestion of Hannes Muehleisen I added:

options(monetdb.debug.mapi=T)


It does add a little more information, which allowed me to proceed a bit further. I am now stuck with the following error, which seems again truncated.


  QQ: 'SELECT * FROM cor_test();' TX: 'sSELECT * FROM cor_test(); ; RX:
  '!Error running R expression. Error message: Error in .C(""corFast"", x
  = as.double(x), nrow = as.integer(nrow(x)), ncolx = as.integer(ncol(x)),  :  !  ""corFast"" not available for .C() for
  package ""MRMRF Error in .local(conn, statement, ...) :    Unable to
  execute statement 'SELECT * FROM cor_test();'. Server says '!Error
  running R expression. Error message: Error in .C(""corFast"", x =
  as.double(x), nrow = as.integer(nrow(x)), ncolx = as.integer(ncol(x)),
  : '.

",-1,-1,-1.0,"MonetDB embedded R code debugging-In my efforts to work around the issue mentioned here:
MonetDB connect to GO.db within R code that is run in-database

I went ahead and copied the code from WGCNA that I needed to my own package and installed it. Obviously, I now can load the package without any issues (since I didn't need the GO.db part).

However, I seem to run into another issue:


  Server says '!Error running R expression. Error message: Error in
  .C(""corFast"", x = as.double(x), nrow = as.integer(nrow(x)), ncolx =
  as.integer(ncol(x)),  : '.


I indeed wanted to use the faster cor function from WGCNA, but apparently the C call now creates another issue.
Unfortunately, the message is not informative. I already tried to run the query interactively and adding debug to the statement. This did not provide me with more information.

Is there anything that I can do to increase the verbosity, so that I can debug the proces?

I also tried:

options(monetdb.debug.query=F)


This resulted in a bit of extra output prior to the query, but no extra output on the error that occurred.

Using the suggestion of Hannes Muehleisen I added:

options(monetdb.debug.mapi=T)


It does add a little more information, which allowed me to proceed a bit further. I am now stuck with the following error, which seems again truncated.


  QQ: 'SELECT * FROM cor_test();' TX: 'sSELECT * FROM cor_test(); ; RX:
  '!Error running R expression. Error message: Error in .C(""corFast"", x
  = as.double(x), nrow = as.integer(nrow(x)), ncolx = as.integer(ncol(x)),  :  !  ""corFast"" not available for .C() for
  package ""MRMRF Error in .local(conn, statement, ...) :    Unable to
  execute statement 'SELECT * FROM cor_test();'. Server says '!Error
  running R expression. Error message: Error in .C(""corFast"", x =
  as.double(x), nrow = as.integer(nrow(x)), ncolx = as.integer(ncol(x)),
  : '.

",0
78,37386462,monetdbd: internal error while starting mserver,"I am following the MonetDB tutorial but after executing this command:

shell&gt; mclient -u monetdb -d voc


and inserting the password I receive the following error

monetdbd: internal error while starting mserver


This is the error in the log file. How can I solve this? Thank a lot!!

2016-05-23 08:41:39 MSG voc[1060]: !IOException:mal_mapi.listen:operation failed: binding to UNIX socket file /vagrant/mydbfarm/voc/.mapi.sock failed: No such file or directory

2016-05-23 08:41:39 MSG merovingian[1054]: database 'voc' (1060) has exited with exit status 0

2016-05-23 08:41:39 MSG merovingian[1054]: database 'voc' has shut down

2016-05-23 08:41:39 ERR merovingian[1054]: client error: database 'voc' started up, but failed to open up a communication channel

",-1,-1,-1.0,"monetdbd: internal error while starting mserver-I am following the MonetDB tutorial but after executing this command:

shell&gt; mclient -u monetdb -d voc


and inserting the password I receive the following error

monetdbd: internal error while starting mserver


This is the error in the log file. How can I solve this? Thank a lot!!

2016-05-23 08:41:39 MSG voc[1060]: !IOException:mal_mapi.listen:operation failed: binding to UNIX socket file /vagrant/mydbfarm/voc/.mapi.sock failed: No such file or directory

2016-05-23 08:41:39 MSG merovingian[1054]: database 'voc' (1060) has exited with exit status 0

2016-05-23 08:41:39 MSG merovingian[1054]: database 'voc' has shut down

2016-05-23 08:41:39 ERR merovingian[1054]: client error: database 'voc' started up, but failed to open up a communication channel

",5
79,37574844,Monetdb.read.csv error in importing .csv file to a new monetdb table,"I am trying to import in a table a large csv file to monetdb. I am using monetdb.R to so.

monetdb.read.csv(conn, file=""C:/CoreData/data_master.csv"", ""coredata"", 1000, delim="","")


However I get the following error:

Error in .local(conn, statement, ...) :Unable to execute statement 'COPY OFFSET 2 INTO coredata FROM 'C:\CoreData\data_master.csv' USING DELIMITERS ',','\n','""' NULL as...'. Server says '!could not open file 'C:CoreDatadata_master.csv': No such file or directory'


My system specifications are as follows:

Sys.info()
                 sysname                      release                      version                     nodename 
               ""Windows""                      ""7 x64"" ""build 7601, Service Pack 1""               ""thepc"" 
                 machine                        login                         user               effective_user 
                ""x86-64""                  ""theuser""  ""R version 3.2.5 (2016-04-14)""                  ""theuser""                  ""theuser"" 


I have the impression that the directory error that is throwns has to do with the parsing of the directory address. Or perhaps the command reads only from a specific location that I do not know.

I have also tried to declare newlines, na.strings etc without any success.
Any help will be much appreciated
",1,-1,-1.0,"Monetdb.read.csv error in importing .csv file to a new monetdb table-I am trying to import in a table a large csv file to monetdb. I am using monetdb.R to so.

monetdb.read.csv(conn, file=""C:/CoreData/data_master.csv"", ""coredata"", 1000, delim="","")


However I get the following error:

Error in .local(conn, statement, ...) :Unable to execute statement 'COPY OFFSET 2 INTO coredata FROM 'C:\CoreData\data_master.csv' USING DELIMITERS ',','\n','""' NULL as...'. Server says '!could not open file 'C:CoreDatadata_master.csv': No such file or directory'


My system specifications are as follows:

Sys.info()
                 sysname                      release                      version                     nodename 
               ""Windows""                      ""7 x64"" ""build 7601, Service Pack 1""               ""thepc"" 
                 machine                        login                         user               effective_user 
                ""x86-64""                  ""theuser""  ""R version 3.2.5 (2016-04-14)""                  ""theuser""                  ""theuser"" 


I have the impression that the directory error that is throwns has to do with the parsing of the directory address. Or perhaps the command reads only from a specific location that I do not know.

I have also tried to declare newlines, na.strings etc without any success.
Any help will be much appreciated
",0
80,37734772,Error: 'MonetDBLite' is not an exported object from 'namespace:MonetDBLite',"Working through a download script for CPS data found here. Using the script verbatim, per recent update, except for the Java modification that I added for my environment (below) to fix a previous error in loadnamespace. While I am familiar with the basics of R, this is my first foray into MonetDBLite.

# configure Java
if (Sys.getenv(""JAVA_HOME"")!="""")
  Sys.setenv(JAVA_HOME="""")
library(rJava)


Now I am getting the following error, which generally comes after 380,000 of the 400,000 cps asec lines are processed.

Warning message:
In readLines(url) :
  incomplete final line found on 'http://thedataweb.rm.census.gov/pub/cps/march/asec2015early_pubuse.dd.txt'
Error in dbConnect(MonetDBLite::MonetDBLite(), dbfolder) : 
  error in evaluating the argument 'drv' in selecting a method for function 'dbConnect': Error: 'MonetDBLite' is not an exported object from 'namespace:MonetDBLite'

",-1,-1,-1.0,"Error: 'MonetDBLite' is not an exported object from 'namespace:MonetDBLite'-Working through a download script for CPS data found here. Using the script verbatim, per recent update, except for the Java modification that I added for my environment (below) to fix a previous error in loadnamespace. While I am familiar with the basics of R, this is my first foray into MonetDBLite.

# configure Java
if (Sys.getenv(""JAVA_HOME"")!="""")
  Sys.setenv(JAVA_HOME="""")
library(rJava)


Now I am getting the following error, which generally comes after 380,000 of the 400,000 cps asec lines are processed.

Warning message:
In readLines(url) :
  incomplete final line found on 'http://thedataweb.rm.census.gov/pub/cps/march/asec2015early_pubuse.dd.txt'
Error in dbConnect(MonetDBLite::MonetDBLite(), dbfolder) : 
  error in evaluating the argument 'drv' in selecting a method for function 'dbConnect': Error: 'MonetDBLite' is not an exported object from 'namespace:MonetDBLite'

",0
81,37733504,Is there a way to view MonetDB Function signatures,"I have tried to locate a source for MonetDB function signatures.
Some can be found by querying the sys.functions table, but date and time functions are missing the signatures.
for instance if you look at the ""month"" function in that table there are 4 listed in the table.

| id   | name       | func  | mod   | lang | type | side_e | varres | vararg |&gt;
:      :            :       :       : uage :      : ffect  :        :        :&gt;
+======+============+=======+=======+======+======+========+========+========    +
|  901 | month      | month | mtime |    0 |    1 | false  | false  | false  |
|  910 | month      | month | mtime |    0 |    1 | false  | false  | false  |
|  916 | month      | month | mtime |    0 |    1 | false  | false  | false  |
|  922 | month      | month | mtime |    0 |    1 | false  | false  | false  |
|  930 | dayofmonth | day   | mtime |    0 |    1 | false  | false  | false  |
+------+------------+-------+-------+------+------+--------+--------+--------


I took a guess that ""month"" could be used like:
    SELECT ""month""(now());

And I was right - but I cannot find a list of the parameter the ""month"" functions take or what exactly they return.

This question is not only about ""month"" I would like a source to find the function utilization for all functions in the sys.function table.

Other RDBMS vendor have fleshed-out explanations for these types of functions - I find nothing like this for MonetDB, I can only assume I am looking in the wrong place. I read their documentation on the website and searched their website for this info, but I cannot find it.

Thank you
",-1,-1,-1.0,"Is there a way to view MonetDB Function signatures-I have tried to locate a source for MonetDB function signatures.
Some can be found by querying the sys.functions table, but date and time functions are missing the signatures.
for instance if you look at the ""month"" function in that table there are 4 listed in the table.

| id   | name       | func  | mod   | lang | type | side_e | varres | vararg |&gt;
:      :            :       :       : uage :      : ffect  :        :        :&gt;
+======+============+=======+=======+======+======+========+========+========    +
|  901 | month      | month | mtime |    0 |    1 | false  | false  | false  |
|  910 | month      | month | mtime |    0 |    1 | false  | false  | false  |
|  916 | month      | month | mtime |    0 |    1 | false  | false  | false  |
|  922 | month      | month | mtime |    0 |    1 | false  | false  | false  |
|  930 | dayofmonth | day   | mtime |    0 |    1 | false  | false  | false  |
+------+------------+-------+-------+------+------+--------+--------+--------


I took a guess that ""month"" could be used like:
    SELECT ""month""(now());

And I was right - but I cannot find a list of the parameter the ""month"" functions take or what exactly they return.

This question is not only about ""month"" I would like a source to find the function utilization for all functions in the sys.function table.

Other RDBMS vendor have fleshed-out explanations for these types of functions - I find nothing like this for MonetDB, I can only assume I am looking in the wrong place. I read their documentation on the website and searched their website for this info, but I cannot find it.

Thank you
",5
82,38517672,"""ORDER BY"" in subquery - not avaliable in MonetDB?","I found that, when using order-by directly, it is ok.

SELECT t0.""D"" AS fd,
  SUM(t0.""SD"") AS top
FROM ""mock_table_1"" AS t0
GROUP BY t0.""D""
ORDER BY top ASC
LIMIT 10


but when using it in a subquery, an syntax error is reported.

SELECT * FROM (
  SELECT t0.""D"" AS fd,
    SUM(t0.""SD"") AS top
  FROM ""mock_table_1"" AS t0
  GROUP BY t0.""D""
  ORDER BY top ASC
  LIMIT 10
)


here is the error message.

syntax error, unexpected ORDER, expecting UNION or EXCEPT or INTERSECT or ')' in: ""select t0.""A"" as d0,


So, I wonder if monetdb is designed to be like this, or it is a bug?
",-1,-1,-1.0,"""ORDER BY"" in subquery - not avaliable in MonetDB?-I found that, when using order-by directly, it is ok.

SELECT t0.""D"" AS fd,
  SUM(t0.""SD"") AS top
FROM ""mock_table_1"" AS t0
GROUP BY t0.""D""
ORDER BY top ASC
LIMIT 10


but when using it in a subquery, an syntax error is reported.

SELECT * FROM (
  SELECT t0.""D"" AS fd,
    SUM(t0.""SD"") AS top
  FROM ""mock_table_1"" AS t0
  GROUP BY t0.""D""
  ORDER BY top ASC
  LIMIT 10
)


here is the error message.

syntax error, unexpected ORDER, expecting UNION or EXCEPT or INTERSECT or ')' in: ""select t0.""A"" as d0,


So, I wonder if monetdb is designed to be like this, or it is a bug?
",0
83,38569347,how to add a column after another one in monetDB,"I am trying to add a new column in a monetDB database and I want it positioned after a specific one. In mysql this is possible using the AFTER keyword.

ALTER TABLE myTable ADD myNewColumn VARCHAR(255) AFTER myOtherColumn


I am trying this in the mclient:

sql&gt;ALTER TABLE dbname.table_name ADD COLUMN new_name AFTER existing_name SET DEFAULT NULL;


What I get is a syntax error:

syntax error, unexpected AFTER in: ""ALTER TABLE dbname.table_name ADD COLUMN new_name AFTER""


It is true that the ALTER documentation does not specify that AFTER exists, but I am hoping that anybody knows an alternative. 
",-1,-1,-1.0,"how to add a column after another one in monetDB-I am trying to add a new column in a monetDB database and I want it positioned after a specific one. In mysql this is possible using the AFTER keyword.

ALTER TABLE myTable ADD myNewColumn VARCHAR(255) AFTER myOtherColumn


I am trying this in the mclient:

sql&gt;ALTER TABLE dbname.table_name ADD COLUMN new_name AFTER existing_name SET DEFAULT NULL;


What I get is a syntax error:

syntax error, unexpected AFTER in: ""ALTER TABLE dbname.table_name ADD COLUMN new_name AFTER""


It is true that the ALTER documentation does not specify that AFTER exists, but I am hoping that anybody knows an alternative. 
",4
84,38622913,MonetDB BEFORE INSERT TRIGGERs are just not working and I need some hlep to sort it out,"in the MonetDB docs there is a simple ""AFTER UPDATE"" trigger example:

https://www.monetdb.org/Documentation/SQLreference/Triggers

That one works, but I tried to change this to a BEFORE INSERT, and FOR EACH ROW:

create the table:

CREATE TABLE t1 (id INT, name VARCHAR(1024));

Insert some values: 

INSERT INTO t1 VALUES(10, 'monetdb');

INSERT INTO t1 VALUES(20, 'monet');

create the trigger:

CREATE TRIGGER 
   test5
BEFORE INSERT ON t1
FOR EACH ROW
  INSERT INTO t1 VALUES(4, 'update_when_statement_true');

Insert some stuff to check the trigger functionality:

INSERT INTO t1 SELECT * FROM t1;

Select some stuff to see what happened:

SELECT * FROM t1;
Results:


+------+---------+
| id   | name    |
+======+=========+
|   10 | monetdb |
|   20 | monet   |
|   10 | monetdb |
|   20 | monet   |
+------+---------+

So basically nothing happened that I can tell with the trigger.
I have tried all kinds of things in the trigger like BEGIN ATOMIC...END, calling a procedure that inserts that row, using functions and nothing I find has worked.

What the bad part is is that this is not even close to what I want to accomplish with a before insert trigger, this is just seeing if I can get it to work.
The thing I really want to do is catch a row and insert it into another table if I don't like some of the values.
I do this in postgres already, and I am evaluating if MonetDB can give me similar functionality.
Many Thanks.
",-1,-1,-1.0,"MonetDB BEFORE INSERT TRIGGERs are just not working and I need some hlep to sort it out-in the MonetDB docs there is a simple ""AFTER UPDATE"" trigger example:

https://www.monetdb.org/Documentation/SQLreference/Triggers

That one works, but I tried to change this to a BEFORE INSERT, and FOR EACH ROW:

create the table:

CREATE TABLE t1 (id INT, name VARCHAR(1024));

Insert some values: 

INSERT INTO t1 VALUES(10, 'monetdb');

INSERT INTO t1 VALUES(20, 'monet');

create the trigger:

CREATE TRIGGER 
   test5
BEFORE INSERT ON t1
FOR EACH ROW
  INSERT INTO t1 VALUES(4, 'update_when_statement_true');

Insert some stuff to check the trigger functionality:

INSERT INTO t1 SELECT * FROM t1;

Select some stuff to see what happened:

SELECT * FROM t1;
Results:


+------+---------+
| id   | name    |
+======+=========+
|   10 | monetdb |
|   20 | monet   |
|   10 | monetdb |
|   20 | monet   |
+------+---------+

So basically nothing happened that I can tell with the trigger.
I have tried all kinds of things in the trigger like BEGIN ATOMIC...END, calling a procedure that inserts that row, using functions and nothing I find has worked.

What the bad part is is that this is not even close to what I want to accomplish with a before insert trigger, this is just seeing if I can get it to work.
The thing I really want to do is catch a row and insert it into another table if I don't like some of the values.
I do this in postgres already, and I am evaluating if MonetDB can give me similar functionality.
Many Thanks.
",4
85,39979709,Incompatible server error R MonetDBLite(),"I have a large MonetDB database I created last year using R DBI::dbWriteTable.  When I try to establish a connection with  

dbConnect(MonetDBLite(), ""~/myfile"") 


returns the error:

Error in monetdb_embedded_startup(embedded, !getOption(""monetdb.debug.embedded"",  : 
  Failed to initialize embedded MonetDB !FATAL: BBPinit: database created with incompatible server:
expected max. integer size 8, got 16.


I don't get this error with more recently created Monet databases.  Is this due to a major recent revision? Is there a (relatively) easy way to update the database version?  

At terminal  monetdb --version returns ""MonetDB Database Server Toolkit v1.1 (Oct2014)"". I'm running most recent release of MonetDBLite, DBI etc.. 

Sorry I'm not including a reproducible example. The database itself is 64GB and I don't know how to randomly sample from it from terminal.

Thanks

Charles
",-1,-1,-1.0,"Incompatible server error R MonetDBLite()-I have a large MonetDB database I created last year using R DBI::dbWriteTable.  When I try to establish a connection with  

dbConnect(MonetDBLite(), ""~/myfile"") 


returns the error:

Error in monetdb_embedded_startup(embedded, !getOption(""monetdb.debug.embedded"",  : 
  Failed to initialize embedded MonetDB !FATAL: BBPinit: database created with incompatible server:
expected max. integer size 8, got 16.


I don't get this error with more recently created Monet databases.  Is this due to a major recent revision? Is there a (relatively) easy way to update the database version?  

At terminal  monetdb --version returns ""MonetDB Database Server Toolkit v1.1 (Oct2014)"". I'm running most recent release of MonetDBLite, DBI etc.. 

Sorry I'm not including a reproducible example. The database itself is 64GB and I don't know how to randomly sample from it from terminal.

Thanks

Charles
",3
86,41574348,How to implement AUTO_INCREMENT properly in MonetDB?,"I have two MonetDB tables using auto-increment to generate unique IDs for each row. Each row in the child table refers to one row in the parent table (modeling a 1:n relationship):

CREATE SEQUENCE ""test"".""seq_parent"" as integer START WITH 1;

CREATE TABLE ""test"".""parent"" (
    ""id"" INT NOT NULL DEFAULT next value for ""test"".""seq_parent"",
    ""name"" STRING,
    PRIMARY KEY (""id"")
);

CREATE SEQUENCE ""test"".""seq_child"" as integer START WITH 1;

CREATE TABLE ""test"".""child"" (
    ""id"" INT NOT NULL DEFAULT next value for ""test"".""seq_child"",
    ""parent_id"" INT NOT NULL,
    ""name"" STRING,
    PRIMARY KEY (""id"")
);


When I import (parent, child_1, …, child_n) tuples to this database, I need first to INSERT the parent and then INSERT all the children using the ID of the parent I just created.

The problem now is: How do I get the ID of the row I just INSERTed? In MySQL, there is LAST_INSERT_ID() for that. However, I could not find something like this in MonetDB.

I tried SELECT next value for ""test"".""seq_parent"", which gives an ID but increments the sequence at the same time. I also tried SELECT MAX(""id"") FROM ""test"".""parent"" right after executing the INSERT, but this is fragile as it breaks if another client is connected and inserts data to the parent table at the same time.
",-1,-1,-1.0,"How to implement AUTO_INCREMENT properly in MonetDB?-I have two MonetDB tables using auto-increment to generate unique IDs for each row. Each row in the child table refers to one row in the parent table (modeling a 1:n relationship):

CREATE SEQUENCE ""test"".""seq_parent"" as integer START WITH 1;

CREATE TABLE ""test"".""parent"" (
    ""id"" INT NOT NULL DEFAULT next value for ""test"".""seq_parent"",
    ""name"" STRING,
    PRIMARY KEY (""id"")
);

CREATE SEQUENCE ""test"".""seq_child"" as integer START WITH 1;

CREATE TABLE ""test"".""child"" (
    ""id"" INT NOT NULL DEFAULT next value for ""test"".""seq_child"",
    ""parent_id"" INT NOT NULL,
    ""name"" STRING,
    PRIMARY KEY (""id"")
);


When I import (parent, child_1, …, child_n) tuples to this database, I need first to INSERT the parent and then INSERT all the children using the ID of the parent I just created.

The problem now is: How do I get the ID of the row I just INSERTed? In MySQL, there is LAST_INSERT_ID() for that. However, I could not find something like this in MonetDB.

I tried SELECT next value for ""test"".""seq_parent"", which gives an ID but increments the sequence at the same time. I also tried SELECT MAX(""id"") FROM ""test"".""parent"" right after executing the INSERT, but this is fragile as it breaks if another client is connected and inserts data to the parent table at the same time.
",4
87,41614815,Problems with user-defined aggregate functions,"I'm having some trouble when defining aggregate functions. Here’s a reproducible example:

library(MonetDBLite)
library(dplyr)
library(DBI)

dbdir &lt;- tempdir()
con &lt;- dbConnect(MonetDBLite())
dbWriteTable(con, ""mtcars"", mtcars, overwrite = TRUE)
ms &lt;- src_monetdblite(dbdir)
mt &lt;- tbl(ms, ""mtcars"")

dbSendUpdate(con, ""CREATE AGGREGATE rapi04(val DOUBLE) RETURNS DOUBLE LANGUAGE R {
    aggregate(val, by=list(aggr_group), FUN=median)$x
};"")

mt %&gt;% group_by(carb) %&gt;% summarise(rapi04(wt))


Executing this code yields the following error:

Error in .local(conn, statement, ...) : 
  Unable to execute statement 'SELECT *
FROM (SELECT ""carb"", RAPI04(""wt"")
FROM (SELECT * FROM ""mtcars"") AS ""_W3""
GROUP BY ""carb"") A...'.
Server says 'SQLException:SQLparser:Errors encountered in query'.


If I use MonetDB’s median function in the summarise statement it works perfectly, but if I define the function it doesn’t. What is the right way to define an aggregate function inside MonetDBLite?
",-1,-1,-1.0,"Problems with user-defined aggregate functions-I'm having some trouble when defining aggregate functions. Here’s a reproducible example:

library(MonetDBLite)
library(dplyr)
library(DBI)

dbdir &lt;- tempdir()
con &lt;- dbConnect(MonetDBLite())
dbWriteTable(con, ""mtcars"", mtcars, overwrite = TRUE)
ms &lt;- src_monetdblite(dbdir)
mt &lt;- tbl(ms, ""mtcars"")

dbSendUpdate(con, ""CREATE AGGREGATE rapi04(val DOUBLE) RETURNS DOUBLE LANGUAGE R {
    aggregate(val, by=list(aggr_group), FUN=median)$x
};"")

mt %&gt;% group_by(carb) %&gt;% summarise(rapi04(wt))


Executing this code yields the following error:

Error in .local(conn, statement, ...) : 
  Unable to execute statement 'SELECT *
FROM (SELECT ""carb"", RAPI04(""wt"")
FROM (SELECT * FROM ""mtcars"") AS ""_W3""
GROUP BY ""carb"") A...'.
Server says 'SQLException:SQLparser:Errors encountered in query'.


If I use MonetDB’s median function in the summarise statement it works perfectly, but if I define the function it doesn’t. What is the right way to define an aggregate function inside MonetDBLite?
",4
88,41614996,Loading TPCH in MonetDB,"i am having trouble importing the data of the TPCH-Benchmark into my monetDB-Database.

I am creating the first table like this: 

CREATE TABLE ""tpch"".""customer"" ( ""c_custkey""    INTEGER       NOT NULL,  ""c_name""       VARCHAR(25)   NOT NULL,""c_address""    VARCHAR(40)   NOT NULL,""c_nationkey""  INTEGER       NOT NULL,""c_phone""      VARCHAR(15)   NOT NULL,""c_acctbal""    DOUBLE        NOT NULL,""c_mktsegment"" VARCHAR(10)   NOT NULL,""c_comment""    VARCHAR(117)  NOT NULL);


and then when i try to insert data into it with the following:

COPY INTO tpch.customer FROM 'PATH/tpcdskew/customer.tbl' using delimiters '|','\n';


i get the following error: 


  'ailed to import table Leftover data '


the ""f"" that seems to be missing at the start is actually missing for me and the ' are there in the output too.

thank you :)
",-1,-1,-1.0,"Loading TPCH in MonetDB-i am having trouble importing the data of the TPCH-Benchmark into my monetDB-Database.

I am creating the first table like this: 

CREATE TABLE ""tpch"".""customer"" ( ""c_custkey""    INTEGER       NOT NULL,  ""c_name""       VARCHAR(25)   NOT NULL,""c_address""    VARCHAR(40)   NOT NULL,""c_nationkey""  INTEGER       NOT NULL,""c_phone""      VARCHAR(15)   NOT NULL,""c_acctbal""    DOUBLE        NOT NULL,""c_mktsegment"" VARCHAR(10)   NOT NULL,""c_comment""    VARCHAR(117)  NOT NULL);


and then when i try to insert data into it with the following:

COPY INTO tpch.customer FROM 'PATH/tpcdskew/customer.tbl' using delimiters '|','\n';


i get the following error: 


  'ailed to import table Leftover data '


the ""f"" that seems to be missing at the start is actually missing for me and the ' are there in the output too.

thank you :)
",0
89,41967887,Selecting single row by ID in MonetDB,"It seems MonetDB still performs full table scans even where one record has to be pulled by some ID column. 

select a, b, c from mytable where id = 100;

Is there anything that can be done to improve performance here? It doesn't seem like creating an index does anything in this case.
",-1,-1,-1.0,"Selecting single row by ID in MonetDB-It seems MonetDB still performs full table scans even where one record has to be pulled by some ID column. 

select a, b, c from mytable where id = 100;

Is there anything that can be done to improve performance here? It doesn't seem like creating an index does anything in this case.
",4
90,42280091,MonetDB database shut down error,"After cleaning up some tables in MonetDB, trying to connect to mclient and getting kicked out.

monetdbd: internal error while starting mserver, please refer to the logs

merovingian.log -> 

2017-02-16 16:40:54 MSG ame[1672]: # MonetDB 5 server v11.21.13 ""Jul2015-SP2""
2017-02-16 16:40:54 MSG ame[1672]: # Serving database 'ame', using 8 threads
2017-02-16 16:40:54 MSG ame[1672]: # Compiled for x86_64-pc-linux-gnu/64bit with 64bit OIDs and 128bit integers dynamically linked
2017-02-16 16:40:54 MSG ame[1672]: # Found 29.453 GiB available main-memory.
2017-02-16 16:40:54 MSG ame[1672]: # Copyright (c) 1993-July 2008 CWI.
2017-02-16 16:40:54 MSG ame[1672]: # Copyright (c) August 2008-2015 MonetDB B.V., all rights reserved
2017-02-16 16:40:54 MSG ame[1672]: # Visit http://www.monetdb.org/ for further information
2017-02-16 16:40:54 MSG ame[1672]: # Listening for UNIX domain connection requests on mapi:monetdb:///ebs_data/monetdb/ame/.mapi.sock
2017-02-16 16:40:54 MSG ame[1672]: # Start processing logs sql/sql_logs version 52200
2017-02-16 16:40:54 MSG merovingian[1233]: database 'ame' (1672) has exited with exit status 1
2017-02-16 16:40:59 ERR merovingian[1233]: client error: database 'ame' appears to shut itself down after starting, check monetdbd's logfile for possible hints


I can't find any other logs. There is nothing in sql/sql_logs.
",-1,-1,-1.0,"MonetDB database shut down error-After cleaning up some tables in MonetDB, trying to connect to mclient and getting kicked out.

monetdbd: internal error while starting mserver, please refer to the logs

merovingian.log -> 

2017-02-16 16:40:54 MSG ame[1672]: # MonetDB 5 server v11.21.13 ""Jul2015-SP2""
2017-02-16 16:40:54 MSG ame[1672]: # Serving database 'ame', using 8 threads
2017-02-16 16:40:54 MSG ame[1672]: # Compiled for x86_64-pc-linux-gnu/64bit with 64bit OIDs and 128bit integers dynamically linked
2017-02-16 16:40:54 MSG ame[1672]: # Found 29.453 GiB available main-memory.
2017-02-16 16:40:54 MSG ame[1672]: # Copyright (c) 1993-July 2008 CWI.
2017-02-16 16:40:54 MSG ame[1672]: # Copyright (c) August 2008-2015 MonetDB B.V., all rights reserved
2017-02-16 16:40:54 MSG ame[1672]: # Visit http://www.monetdb.org/ for further information
2017-02-16 16:40:54 MSG ame[1672]: # Listening for UNIX domain connection requests on mapi:monetdb:///ebs_data/monetdb/ame/.mapi.sock
2017-02-16 16:40:54 MSG ame[1672]: # Start processing logs sql/sql_logs version 52200
2017-02-16 16:40:54 MSG merovingian[1233]: database 'ame' (1672) has exited with exit status 1
2017-02-16 16:40:59 ERR merovingian[1233]: client error: database 'ame' appears to shut itself down after starting, check monetdbd's logfile for possible hints


I can't find any other logs. There is nothing in sql/sql_logs.
",5
91,42367733,Monetdb query cancelling,"I am using Monetdb in a java application via the JDBC driver.
I need to cancel long running queries, or queries that are no longer relevant.
Since monetdb JDBC driver does not support jdbc statement cancelling, I have implemented my query cancelling mechanism following what described here: 
https://www.monetdb.org/Documentation/Cookbooks/SQLrecipes/monitor

First, I retrieve the qtag of the query to cancel, and then execute the command call sys.stop(&lt;qtag&gt;).

I have monitored the queue of active queries via the queries

select * from sys.queue()

I see many cancelled queries are in a stopping status, and they stay there for a really long time (much more than it takes for the query to complete), and possibly forever, preventing genuine queries to be executed it seems.
Closing the JDBC connection clear these queries in this stopping state: I am aware that when you cancel a query, you cannot interrupt the current MAL operation which is executed, but I don't understand what this stopping state means, and why cancelled queries stay there for such a long time.
Am I doing something wrong ? Why closing the jdbc connection remove all these queries in a stopping status ? How can I effectively cancel queries without compromising the monetdb server.
",-1,-1,-1.0,"Monetdb query cancelling-I am using Monetdb in a java application via the JDBC driver.
I need to cancel long running queries, or queries that are no longer relevant.
Since monetdb JDBC driver does not support jdbc statement cancelling, I have implemented my query cancelling mechanism following what described here: 
https://www.monetdb.org/Documentation/Cookbooks/SQLrecipes/monitor

First, I retrieve the qtag of the query to cancel, and then execute the command call sys.stop(&lt;qtag&gt;).

I have monitored the queue of active queries via the queries

select * from sys.queue()

I see many cancelled queries are in a stopping status, and they stay there for a really long time (much more than it takes for the query to complete), and possibly forever, preventing genuine queries to be executed it seems.
Closing the JDBC connection clear these queries in this stopping state: I am aware that when you cancel a query, you cannot interrupt the current MAL operation which is executed, but I don't understand what this stopping state means, and why cancelled queries stay there for such a long time.
Am I doing something wrong ? Why closing the jdbc connection remove all these queries in a stopping status ? How can I effectively cancel queries without compromising the monetdb server.
",0
92,42421179,Monetdb unable to execute queries with a where clause against remote tables,"I have been trying remote tables in monetdb. I have setup a remote table mapped to an existing table on a monetdb instance running on another host.

I am able to perform some basic queries, However I am unable to use the where clause: If I try to execute a simple query like :

select * from  ""T1"" where product_id &gt; 1757;


The query execution fails with the error  (of course the query runs fine on the local table):

TypeException:user.l4[6]:'algebra.thetasubselect' undefined in:     algebra.thetasubselect(X_40:bat[:int],X_41:any,""&gt;"":str);
SQLState:  22000
ErrorCode: 0
Error: (mapi:monetdb://monetdb@192.168.1.46/visokio) 'algebra.thetasubselect' undefined in:     algebra.thetasubselect(X_46:bat[:int],X_47:any,""&gt;"":str);
SQLState:  22000
ErrorCode: 0


I receive similar errors on every query containing a where clause.

Am I doing something wrong? Is there a reason why I cannot execute a query containing a where clause? 

Thank you for your help.
",-1,-1,-1.0,"Monetdb unable to execute queries with a where clause against remote tables-I have been trying remote tables in monetdb. I have setup a remote table mapped to an existing table on a monetdb instance running on another host.

I am able to perform some basic queries, However I am unable to use the where clause: If I try to execute a simple query like :

select * from  ""T1"" where product_id &gt; 1757;


The query execution fails with the error  (of course the query runs fine on the local table):

TypeException:user.l4[6]:'algebra.thetasubselect' undefined in:     algebra.thetasubselect(X_40:bat[:int],X_41:any,""&gt;"":str);
SQLState:  22000
ErrorCode: 0
Error: (mapi:monetdb://monetdb@192.168.1.46/visokio) 'algebra.thetasubselect' undefined in:     algebra.thetasubselect(X_46:bat[:int],X_47:any,""&gt;"":str);
SQLState:  22000
ErrorCode: 0


I receive similar errors on every query containing a where clause.

Am I doing something wrong? Is there a reason why I cannot execute a query containing a where clause? 

Thank you for your help.
",3
93,42575647,Dplyr backend is not able to find applicable method for 'sql_translate_env',"I try to run a simple dplyr command, on an monetdb SQL-backend. The connection itself seems to work, but the dplyr call fails. I restarted the RSession and tried to reinstall the MonetDB.R package again, without success.

library(dplyr)
db &lt;- MonetDB.R::src_monetdb(""ai_db"", user=""analyst"", host=""monetdb.local"", password=""mypassword"")

## works!
DBI::dbGetQuery(db$con, ""SELECT count(*) from users"")

## fails
db %&gt;% tbl(""users"") %&gt;% mutate(n= n())



  Source:   query [?? x 7] Database: MonetDB 11.25.5 (Dec2016-SP1)
  
  Error in UseMethod(""sql_translate_env"") :    no applicable method for
  'sql_translate_env' applied to an object of class ""MonetDBConnection""


I installed dplyr using the default repository/settings (packages.install(""dplyr"")) in a docker container (rocker/verse:3.3.2).

UPDATE 1: MonetDBLite instead od MonetDB.R

Now I installed MonetDBLite and I use the following code to create a connection: 

con &lt;- mc(dbname=""ai_db"", user=""analyst"", password=""mypassword"", host=""monetdb.local"",
          timeout=86400000)
db &lt;- MonetDBLite::src_monetdb(""ai_db"",con=con)


I set a quite high timeout, because of a error message indicating a to low one (see below). However, the command fails again and I don't think that it is related to the timeout, because it fails immediately.

## fails
db %&gt;% tbl(""users"") %&gt;% mutate(n= n())



  Source:   query [?? x 7] Database: MonetDB 11.25.5 (Dec2016-SP1)
  
  Error in .mapiRead(conObj@connenv$socket) :    Empty response from
  MonetDB server, probably a timeout. You can increase the time to wait
  for responses with the 'timeout' parameter to 'dbConnect()'.


The dataset is really small (just 5000 entries) so this should not be a big deal. MonetDB is installed ont he same server and works great, also the DBI interface works (and returns the result within a second):

DBI::dbGetQuery(con, ""SELECT count(*) from videos"")


UPDATE 2:

Now I tried both, the dev-version of MonetdbLite and the stable CRAN-version from the repository. Both fail, but with different errors.

packages.install(""MonetDBLite"")
db &lt;- MonetDBLite::src_monetdb(""ai_db"", user=""analyst"", password=""mypassword"", host=""monetdb.local"")
db %&gt;% tbl(""users"") %&gt;% mutate(n= n())



  Source:   query [?? x 7] Database: MonetDB 11.25.5 (Dec2016-SP1)
  
  Error in .mapiRead(conObj@connenv$socket) :    Empty response from
  MonetDB server, probably a timeout. You can increase the time to wait
  for responses with the 'timeout' parameter to 'dbConnect()'.


devtools::install_github( ""hannesmuehleisen/MonetDBLite"" )
db &lt;- MonetDBLite::src_monetdb(""ai_db"", user=""analyst"", password=""mypassword"", host=""monetdb.local"")
db %&gt;% tbl(""users"") %&gt;% mutate(n= n())



  Source:   query [?? x 7] Error in inherits(con_acquire(x),
  ""MonetDBEmbeddedConnection"") :    could not find function
  ""con_acquire""

",-1,-1,-1.0,"Dplyr backend is not able to find applicable method for 'sql_translate_env'-I try to run a simple dplyr command, on an monetdb SQL-backend. The connection itself seems to work, but the dplyr call fails. I restarted the RSession and tried to reinstall the MonetDB.R package again, without success.

library(dplyr)
db &lt;- MonetDB.R::src_monetdb(""ai_db"", user=""analyst"", host=""monetdb.local"", password=""mypassword"")

## works!
DBI::dbGetQuery(db$con, ""SELECT count(*) from users"")

## fails
db %&gt;% tbl(""users"") %&gt;% mutate(n= n())



  Source:   query [?? x 7] Database: MonetDB 11.25.5 (Dec2016-SP1)
  
  Error in UseMethod(""sql_translate_env"") :    no applicable method for
  'sql_translate_env' applied to an object of class ""MonetDBConnection""


I installed dplyr using the default repository/settings (packages.install(""dplyr"")) in a docker container (rocker/verse:3.3.2).

UPDATE 1: MonetDBLite instead od MonetDB.R

Now I installed MonetDBLite and I use the following code to create a connection: 

con &lt;- mc(dbname=""ai_db"", user=""analyst"", password=""mypassword"", host=""monetdb.local"",
          timeout=86400000)
db &lt;- MonetDBLite::src_monetdb(""ai_db"",con=con)


I set a quite high timeout, because of a error message indicating a to low one (see below). However, the command fails again and I don't think that it is related to the timeout, because it fails immediately.

## fails
db %&gt;% tbl(""users"") %&gt;% mutate(n= n())



  Source:   query [?? x 7] Database: MonetDB 11.25.5 (Dec2016-SP1)
  
  Error in .mapiRead(conObj@connenv$socket) :    Empty response from
  MonetDB server, probably a timeout. You can increase the time to wait
  for responses with the 'timeout' parameter to 'dbConnect()'.


The dataset is really small (just 5000 entries) so this should not be a big deal. MonetDB is installed ont he same server and works great, also the DBI interface works (and returns the result within a second):

DBI::dbGetQuery(con, ""SELECT count(*) from videos"")


UPDATE 2:

Now I tried both, the dev-version of MonetdbLite and the stable CRAN-version from the repository. Both fail, but with different errors.

packages.install(""MonetDBLite"")
db &lt;- MonetDBLite::src_monetdb(""ai_db"", user=""analyst"", password=""mypassword"", host=""monetdb.local"")
db %&gt;% tbl(""users"") %&gt;% mutate(n= n())



  Source:   query [?? x 7] Database: MonetDB 11.25.5 (Dec2016-SP1)
  
  Error in .mapiRead(conObj@connenv$socket) :    Empty response from
  MonetDB server, probably a timeout. You can increase the time to wait
  for responses with the 'timeout' parameter to 'dbConnect()'.


devtools::install_github( ""hannesmuehleisen/MonetDBLite"" )
db &lt;- MonetDBLite::src_monetdb(""ai_db"", user=""analyst"", password=""mypassword"", host=""monetdb.local"")
db %&gt;% tbl(""users"") %&gt;% mutate(n= n())



  Source:   query [?? x 7] Error in inherits(con_acquire(x),
  ""MonetDBEmbeddedConnection"") :    could not find function
  ""con_acquire""

",3
94,42615004,"MonetDB: Enumerate groups of rows based on a given ""boundary"" condition","Consider the following table:

id  gap  groupID
 0  0    1
 2  3    1
 3  7    2
 4  1    2
 5  5    2
 6  7    3
 7  3    3
 8  8    4
 9  2    4


Where groupID is the desired, computed column, such as its value is incremented whenever the gap column is greater than a threshold (in this case 6).  The id column defines the sequential order of appearance of the rows (and it's already given).

Can you please help me figure out how to dynamically fill out the appropriate values for groupID?

I have looked in several other entries here in StackOverflow, and I've seen the usage of sum as an aggregate for a window function.  I can't use sum because it's not supported in MonetDB window functions (only rank, dense_rank, and row_num).  I can't use triggers (to modify the record insertion before it takes place) either because I need to keep the data mentioned above within a stored function in a local temporary table -- and trigger declarations are not supported in MonetDB function definitions.

I have also tried filling out the groupID column value by reading the previous table (id and gap) into another temporary table (id, gap, groupID), with the hope that this would force a row-by-row operation.  But this has failed as well because it gives the groupID 0 to all records:

declare threshold int;
set threshold = 6;
insert into newTable( id, gap, groupID )
        select A.id, A.gap, 
            case when A.gap &gt; threshold then 
                (select case when max(groupID) is null then 0 else max(groupID)+1 end from newTable) 
            else 
                (select case when max(groupID) is null then 0 else max(groupID) end from newTable) 
            end
        from A
        order by A.id asc;


Any help, tip, or reference is greatly appreciated.  It's been a long time already trying to figure this out.

BTW: Cursors are not supported in MonetDB either --
",-1,-1,-1.0,"MonetDB: Enumerate groups of rows based on a given ""boundary"" condition-Consider the following table:

id  gap  groupID
 0  0    1
 2  3    1
 3  7    2
 4  1    2
 5  5    2
 6  7    3
 7  3    3
 8  8    4
 9  2    4


Where groupID is the desired, computed column, such as its value is incremented whenever the gap column is greater than a threshold (in this case 6).  The id column defines the sequential order of appearance of the rows (and it's already given).

Can you please help me figure out how to dynamically fill out the appropriate values for groupID?

I have looked in several other entries here in StackOverflow, and I've seen the usage of sum as an aggregate for a window function.  I can't use sum because it's not supported in MonetDB window functions (only rank, dense_rank, and row_num).  I can't use triggers (to modify the record insertion before it takes place) either because I need to keep the data mentioned above within a stored function in a local temporary table -- and trigger declarations are not supported in MonetDB function definitions.

I have also tried filling out the groupID column value by reading the previous table (id and gap) into another temporary table (id, gap, groupID), with the hope that this would force a row-by-row operation.  But this has failed as well because it gives the groupID 0 to all records:

declare threshold int;
set threshold = 6;
insert into newTable( id, gap, groupID )
        select A.id, A.gap, 
            case when A.gap &gt; threshold then 
                (select case when max(groupID) is null then 0 else max(groupID)+1 end from newTable) 
            else 
                (select case when max(groupID) is null then 0 else max(groupID) end from newTable) 
            end
        from A
        order by A.id asc;


Any help, tip, or reference is greatly appreciated.  It's been a long time already trying to figure this out.

BTW: Cursors are not supported in MonetDB either --
",2
95,40511194,MonetDBLite Left Join Syntax,"Working in R and trying to add a column to an existing MonetDBLite table by running a left join with a second table using the following code:

dbSendQuery(mdb, ""UPDATE table1 
   SET table1.variable = table2.variable 
   FROM table1  LEFT JOIN table2 ON table1.identifier = table2.identifier;"")


Returns the error:

Server says 'syntax error, unexpected '.', expecting '=' in: ""update table1 
   set table1.""


Does MonetDB not support the dot delimiter to reference a field within a table? Many thanks for any insights.
",-1,-1,-1.0,"MonetDBLite Left Join Syntax-Working in R and trying to add a column to an existing MonetDBLite table by running a left join with a second table using the following code:

dbSendQuery(mdb, ""UPDATE table1 
   SET table1.variable = table2.variable 
   FROM table1  LEFT JOIN table2 ON table1.identifier = table2.identifier;"")


Returns the error:

Server says 'syntax error, unexpected '.', expecting '=' in: ""update table1 
   set table1.""


Does MonetDB not support the dot delimiter to reference a field within a table? Many thanks for any insights.
",4
96,38966748,How to start monetdbd from other process (node.js)?,"I'm trying to start monetdbd from node like

var exec = require('child_process').exec;
exec('monetdbd start ~/my-dbfarm/');


But it stops runing my code after exec(...).
",-1,-1,-1.0,"How to start monetdbd from other process (node.js)?-I'm trying to start monetdbd from node like

var exec = require('child_process').exec;
exec('monetdbd start ~/my-dbfarm/');


But it stops runing my code after exec(...).
",5
97,42958954,monetdb : there are no available connections for 'voc',"Me &amp; my computer (mac) are trying to follow with the monetdb tutorial (https://www.monetdb.org/Documentation/UserGuide/Tutorial)

We went up until running this mclient -u monetdb -d voc, entered ""monetdb"" as a password and the following message was returned :


  there are no available connections for 'voc'


Do anyone knows what is happening ? I mean after all we just followed the tutorial.

Furthermore, do you know if there is a db with all the monetdb error codes and their meanings + a proposition to solve the error ?



edit0 --adding the log file--

2017-03-22 16:17:53 MSG merovingian[29679]: Merovingian 1.7 (Dec2016-SP2) starting
2017-03-22 16:17:53 MSG merovingian[29679]: monitoring dbfarm /Volumes/Transcend/monetdb/
2017-03-22 16:17:53 MSG merovingian[29679]: accepting connections on TCP socket localhost:50000
2017-03-22 16:17:53 MSG merovingian[29679]: accepting connections on UNIX domain socket /tmp/.s.monetdb.50000
2017-03-22 16:17:53 MSG discovery[29679]: listening for UDP messages on localhost:50000
2017-03-22 16:17:53 MSG control[29679]: accepting connections on UNIX domain socket /tmp/.s.merovingian.50000
2017-03-22 16:20:50 MSG control[29679]: (local): created database 'voc'
2017-03-22 16:21:22 MSG control[29679]: (local): served status list
2017-03-22 16:21:22 MSG control[29679]: (local): released database 'voc'
2017-03-22 16:23:19 MSG merovingian[29679]: starting database 'voc', up min/avg/max: 0s/0s/0s, crash average: 0.00 0.00 0.00 (0-0=0)
2017-03-22 16:23:20 MSG voc[29783]: arguments: /usr/local/monetdb/bin/mserver5 --dbpath=/Volumes/Transcend/monetdb/voc --set merovingian_uri=mapi:monetdb://macbook-pro-de-teva-1.home:50000/voc --set mapi_open=false --set mapi_port=0 --set mapi_usock=/Volumes/Transcend/monetdb/voc/.mapi.sock --set monet_vault_key=/Volumes/Transcend/monetdb/voc/.vaultkey --set gdk_nr_threads=8 --set max_clients=64 --set sql_optimizer=default_pipe --set monet_daemon=yes
2017-03-22 16:23:20 MSG merovingian[29679]: sending process 29783 (database 'voc') the TERM signal
2017-03-22 16:23:21 MSG merovingian[29679]: database 'voc' has shut down
2017-03-22 16:23:21 ERR control[29679]: !monetdbd: an internal error has occurred 'database 'voc' started up, but failed to open up a communication channel'
2017-03-22 16:23:21 ERR merovingian[29679]: client error: database 'voc' started up, but failed to open up a communication channel
2017-03-22 21:43:40 MSG merovingian[37128]: Merovingian 1.7 (Dec2016-SP2) starting
2017-03-22 21:43:40 MSG merovingian[37128]: monitoring dbfarm /Volumes/Transcend/monetdb/
2017-03-22 21:51:06 MSG merovingian[37290]: Merovingian 1.7 (Dec2016-SP2) starting
2017-03-22 21:51:06 MSG merovingian[37290]: monitoring dbfarm /Volumes/Transcend//monetdb/
2017-03-22 21:51:06 ERR merovingian[37290]: binding to stream socket port 50000 failed: Address already in use
2017-03-22 21:51:06 ERR merovingian[37290]: fatal startup condition encountered, aborting startup
2017-03-23 10:52:34 MSG merovingian[1950]: Merovingian 1.7 (Dec2016-SP2) starting
2017-03-23 10:52:34 MSG merovingian[1950]: monitoring dbfarm /Volumes/Transcend/monetdb/
2017-03-23 10:52:34 MSG merovingian[1950]: accepting connections on TCP socket localhost:50000
2017-03-23 10:52:34 MSG merovingian[1950]: accepting connections on UNIX domain socket /tmp/.s.monetdb.50000
2017-03-23 10:52:34 MSG discovery[1950]: listening for UDP messages on localhost:50000
2017-03-23 10:52:34 MSG control[1950]: accepting connections on UNIX domain socket /tmp/.s.merovingian.50000
2017-03-23 10:53:17 MSG control[1950]: (local): served status list
2017-03-23 10:53:37 MSG merovingian[1950]: starting database 'voc', up min/avg/max: 2s/8h/17h, crash average: 0.00 0.00 0.00 (2-2=0)
2017-03-23 10:53:37 MSG merovingian[1950]: sending process 1975 (database 'voc') the TERM signal
2017-03-23 10:53:37 MSG voc[1975]: arguments: /usr/local/monetdb/bin/mserver5 --dbpath=/Volumes/Transcend/monetdb/voc --set merovingian_uri=mapi:monetdb://MacBook-Pro-de-teva.local:50000/voc --set mapi_open=false --set mapi_port=0 --set mapi_usock=/Volumes/Transcend/monetdb/voc/.mapi.sock --set monet_vault_key=/Volumes/Transcend/monetdb/voc/.vaultkey --set gdk_nr_threads=8 --set max_clients=64 --set sql_optimizer=default_pipe --set monet_daemon=yes
2017-03-23 10:53:38 MSG merovingian[1950]: database 'voc' has shut down
2017-03-23 10:53:38 ERR control[1950]: !monetdbd: an internal error has occurred 'database 'voc' started up, but failed to open up a communication channel'


    2017-03-23 10:53:38 ERR merovingian[1950]: client error: database 'voc' started up, but failed to open up a communication channel

edit1 --- adding the mserver5 response---

From the terminal pointing to the farm on the sd card :

MacBook-Pro****:monetdb Teva$ mserver5
# MonetDB 5 server v11.25.9 ""Dec2016-SP2""
# Serving database 'demo', using 8 threads
# Compiled for x86_64-apple-darwin16/64bit with 128bit integers
# Found 16.000 GiB available main-memory.
# Copyright (c) 1993-July 2008 CWI.
# Copyright (c) August 2008-2017 MonetDB B.V., all rights reserved
# Visit http://www.monetdb.org/ for further information
!IOException:mal_mapi.listen:operation failed: bind to stream socket port 50000 failed: Address already in use


From the terminal pointing to the farm sitting on /mydocuments

MacBook-Pro-***:Documents Teva$ sudo mserver5
!FATAL: GDKlockHome: Database lock '.gdk_lock' denied

",-1,-1,-1.0,"monetdb : there are no available connections for 'voc'-Me &amp; my computer (mac) are trying to follow with the monetdb tutorial (https://www.monetdb.org/Documentation/UserGuide/Tutorial)

We went up until running this mclient -u monetdb -d voc, entered ""monetdb"" as a password and the following message was returned :


  there are no available connections for 'voc'


Do anyone knows what is happening ? I mean after all we just followed the tutorial.

Furthermore, do you know if there is a db with all the monetdb error codes and their meanings + a proposition to solve the error ?



edit0 --adding the log file--

2017-03-22 16:17:53 MSG merovingian[29679]: Merovingian 1.7 (Dec2016-SP2) starting
2017-03-22 16:17:53 MSG merovingian[29679]: monitoring dbfarm /Volumes/Transcend/monetdb/
2017-03-22 16:17:53 MSG merovingian[29679]: accepting connections on TCP socket localhost:50000
2017-03-22 16:17:53 MSG merovingian[29679]: accepting connections on UNIX domain socket /tmp/.s.monetdb.50000
2017-03-22 16:17:53 MSG discovery[29679]: listening for UDP messages on localhost:50000
2017-03-22 16:17:53 MSG control[29679]: accepting connections on UNIX domain socket /tmp/.s.merovingian.50000
2017-03-22 16:20:50 MSG control[29679]: (local): created database 'voc'
2017-03-22 16:21:22 MSG control[29679]: (local): served status list
2017-03-22 16:21:22 MSG control[29679]: (local): released database 'voc'
2017-03-22 16:23:19 MSG merovingian[29679]: starting database 'voc', up min/avg/max: 0s/0s/0s, crash average: 0.00 0.00 0.00 (0-0=0)
2017-03-22 16:23:20 MSG voc[29783]: arguments: /usr/local/monetdb/bin/mserver5 --dbpath=/Volumes/Transcend/monetdb/voc --set merovingian_uri=mapi:monetdb://macbook-pro-de-teva-1.home:50000/voc --set mapi_open=false --set mapi_port=0 --set mapi_usock=/Volumes/Transcend/monetdb/voc/.mapi.sock --set monet_vault_key=/Volumes/Transcend/monetdb/voc/.vaultkey --set gdk_nr_threads=8 --set max_clients=64 --set sql_optimizer=default_pipe --set monet_daemon=yes
2017-03-22 16:23:20 MSG merovingian[29679]: sending process 29783 (database 'voc') the TERM signal
2017-03-22 16:23:21 MSG merovingian[29679]: database 'voc' has shut down
2017-03-22 16:23:21 ERR control[29679]: !monetdbd: an internal error has occurred 'database 'voc' started up, but failed to open up a communication channel'
2017-03-22 16:23:21 ERR merovingian[29679]: client error: database 'voc' started up, but failed to open up a communication channel
2017-03-22 21:43:40 MSG merovingian[37128]: Merovingian 1.7 (Dec2016-SP2) starting
2017-03-22 21:43:40 MSG merovingian[37128]: monitoring dbfarm /Volumes/Transcend/monetdb/
2017-03-22 21:51:06 MSG merovingian[37290]: Merovingian 1.7 (Dec2016-SP2) starting
2017-03-22 21:51:06 MSG merovingian[37290]: monitoring dbfarm /Volumes/Transcend//monetdb/
2017-03-22 21:51:06 ERR merovingian[37290]: binding to stream socket port 50000 failed: Address already in use
2017-03-22 21:51:06 ERR merovingian[37290]: fatal startup condition encountered, aborting startup
2017-03-23 10:52:34 MSG merovingian[1950]: Merovingian 1.7 (Dec2016-SP2) starting
2017-03-23 10:52:34 MSG merovingian[1950]: monitoring dbfarm /Volumes/Transcend/monetdb/
2017-03-23 10:52:34 MSG merovingian[1950]: accepting connections on TCP socket localhost:50000
2017-03-23 10:52:34 MSG merovingian[1950]: accepting connections on UNIX domain socket /tmp/.s.monetdb.50000
2017-03-23 10:52:34 MSG discovery[1950]: listening for UDP messages on localhost:50000
2017-03-23 10:52:34 MSG control[1950]: accepting connections on UNIX domain socket /tmp/.s.merovingian.50000
2017-03-23 10:53:17 MSG control[1950]: (local): served status list
2017-03-23 10:53:37 MSG merovingian[1950]: starting database 'voc', up min/avg/max: 2s/8h/17h, crash average: 0.00 0.00 0.00 (2-2=0)
2017-03-23 10:53:37 MSG merovingian[1950]: sending process 1975 (database 'voc') the TERM signal
2017-03-23 10:53:37 MSG voc[1975]: arguments: /usr/local/monetdb/bin/mserver5 --dbpath=/Volumes/Transcend/monetdb/voc --set merovingian_uri=mapi:monetdb://MacBook-Pro-de-teva.local:50000/voc --set mapi_open=false --set mapi_port=0 --set mapi_usock=/Volumes/Transcend/monetdb/voc/.mapi.sock --set monet_vault_key=/Volumes/Transcend/monetdb/voc/.vaultkey --set gdk_nr_threads=8 --set max_clients=64 --set sql_optimizer=default_pipe --set monet_daemon=yes
2017-03-23 10:53:38 MSG merovingian[1950]: database 'voc' has shut down
2017-03-23 10:53:38 ERR control[1950]: !monetdbd: an internal error has occurred 'database 'voc' started up, but failed to open up a communication channel'


    2017-03-23 10:53:38 ERR merovingian[1950]: client error: database 'voc' started up, but failed to open up a communication channel

edit1 --- adding the mserver5 response---

From the terminal pointing to the farm on the sd card :

MacBook-Pro****:monetdb Teva$ mserver5
# MonetDB 5 server v11.25.9 ""Dec2016-SP2""
# Serving database 'demo', using 8 threads
# Compiled for x86_64-apple-darwin16/64bit with 128bit integers
# Found 16.000 GiB available main-memory.
# Copyright (c) 1993-July 2008 CWI.
# Copyright (c) August 2008-2017 MonetDB B.V., all rights reserved
# Visit http://www.monetdb.org/ for further information
!IOException:mal_mapi.listen:operation failed: bind to stream socket port 50000 failed: Address already in use


From the terminal pointing to the farm sitting on /mydocuments

MacBook-Pro-***:Documents Teva$ sudo mserver5
!FATAL: GDKlockHome: Database lock '.gdk_lock' denied

",5
98,43210886,Is it possible to create a function that creates smaller column than input column,"I'm working on a Monetdb Database with embedded R. Now, I want to process the data from a column, which basically reduces the amount of values.

The question now is if it is possible to create a R function that takes an input column with n values and returns a columns with m (m &lt;&gt; n)columns.

I tried it but the output of the function is somehow irritating:

-- create data
CREATE FUNCTION generate(n INTEGER) RETURNS TABLE(data DOUBLE) LANGUAGE R{
 data.frame(rnorm(n))
};

-- reduce data 
CREATE FUNCTION reduce(data REAL) returns DOUBLE LANGUAGE R{
 data[1:(length(data)-1)]
};

-- actually reduce generated data
select reduce(data) from generate(3);


This outputs the following:

sql&gt;select reduce(data) from generate(3);
+--------------------------+
| L4                       |
+==========================+
|      -0.6561001539230347 |
|       1.0922646522521973 |
+--------------------------+
2 tuples (47.601ms)


The interesting think happens, when I add another column to the output:

sql&gt;select 1,reduce(data) from generate(3);
+------+--------------------------+
| L4   | L6                       |
+======+==========================+
|    1 |      -1.2222824096679688 |
|    1 |        2.696558952331543 |
+------+--------------------------+
3 tuples (5.455ms)


The number of tuples which monetdb thinks to deliver changes. Is anything wrong with the Code or is it simply wrong to reduce the length of the output column?

This is only a simplified example of the real problem. The actual problem occurs when I insert the result into another table.

CREATE TABLE test(i INTEGER, r real);
insert into test select 1,reduce(data) from generate(3);
2 affected rows (4.404ms)


gives

select * from test;
GDK reported error.
BATproject: does not match always


What is the reason for the problem? I assume that it is somehow related to the above described problem.
",-1,-1,-1.0,"Is it possible to create a function that creates smaller column than input column-I'm working on a Monetdb Database with embedded R. Now, I want to process the data from a column, which basically reduces the amount of values.

The question now is if it is possible to create a R function that takes an input column with n values and returns a columns with m (m &lt;&gt; n)columns.

I tried it but the output of the function is somehow irritating:

-- create data
CREATE FUNCTION generate(n INTEGER) RETURNS TABLE(data DOUBLE) LANGUAGE R{
 data.frame(rnorm(n))
};

-- reduce data 
CREATE FUNCTION reduce(data REAL) returns DOUBLE LANGUAGE R{
 data[1:(length(data)-1)]
};

-- actually reduce generated data
select reduce(data) from generate(3);


This outputs the following:

sql&gt;select reduce(data) from generate(3);
+--------------------------+
| L4                       |
+==========================+
|      -0.6561001539230347 |
|       1.0922646522521973 |
+--------------------------+
2 tuples (47.601ms)


The interesting think happens, when I add another column to the output:

sql&gt;select 1,reduce(data) from generate(3);
+------+--------------------------+
| L4   | L6                       |
+======+==========================+
|    1 |      -1.2222824096679688 |
|    1 |        2.696558952331543 |
+------+--------------------------+
3 tuples (5.455ms)


The number of tuples which monetdb thinks to deliver changes. Is anything wrong with the Code or is it simply wrong to reduce the length of the output column?

This is only a simplified example of the real problem. The actual problem occurs when I insert the result into another table.

CREATE TABLE test(i INTEGER, r real);
insert into test select 1,reduce(data) from generate(3);
2 affected rows (4.404ms)


gives

select * from test;
GDK reported error.
BATproject: does not match always


What is the reason for the problem? I assume that it is somehow related to the above described problem.
",4
99,44926176,Handling Python UDFs in MonetDB,"The blending of Python and SQL in MonetDB is a great start to move a lot of the business logic into the database server. However, the current documentation contains some hurdles to take by a novice in this game. Consider the following function:

sql&gt;select * from getsourceattributes('tables');
+---------------+
| c             |
+===============+
| id            |
| name          |
| schema_id     |
| query         |
| type          |
| system        |
| commit_action |
| access        |
| temporary     |
+---------------+


and the following table to gather some stats:

create table dummy(tbl string, col string, stat integer);


Now knowing that ptbl is an numpy array, i tried the following:

create function gatherStatistics(ptbl string)
returns string
language python {
     for p in ptbl:
         attr = _conn.execute(""select * from getSourceAttributes('""+ str(p) +""');"")
         for col in attr :
             stat = _conn.execute(""select count(*) from ""+ str(p) +"";"")
             _conn_execute(""insert into dummy values('""+ str(p)+""','""+ str(col) +""',""+ str(stat)+"");"")
     return ptbl;
};


and calling with

select gatherstatistics('tables');
SELECT: no such table 't'
Python exception
   3.     attr = _conn.execute(""select * from getSourceAttributes('""+ str(p) +""');"")
   4.     for col in attr :

     5.       stat = _conn.execute(""select count(*) from ""+ str(p) +"";"")

   6.       _conn_execute(""insert into dummy values('""+ str(p)+""','""+ str(col) +""',""+str(stat)+"");"")
   7.   return ptbl;
SQL Query Failed: ParseException:SQLparser:42S02!SELECT: no such table 't'



unclear where the 't' comes from?
what is the mis-conception?

",-1,-1,-1.0,"Handling Python UDFs in MonetDB-The blending of Python and SQL in MonetDB is a great start to move a lot of the business logic into the database server. However, the current documentation contains some hurdles to take by a novice in this game. Consider the following function:

sql&gt;select * from getsourceattributes('tables');
+---------------+
| c             |
+===============+
| id            |
| name          |
| schema_id     |
| query         |
| type          |
| system        |
| commit_action |
| access        |
| temporary     |
+---------------+


and the following table to gather some stats:

create table dummy(tbl string, col string, stat integer);


Now knowing that ptbl is an numpy array, i tried the following:

create function gatherStatistics(ptbl string)
returns string
language python {
     for p in ptbl:
         attr = _conn.execute(""select * from getSourceAttributes('""+ str(p) +""');"")
         for col in attr :
             stat = _conn.execute(""select count(*) from ""+ str(p) +"";"")
             _conn_execute(""insert into dummy values('""+ str(p)+""','""+ str(col) +""',""+ str(stat)+"");"")
     return ptbl;
};


and calling with

select gatherstatistics('tables');
SELECT: no such table 't'
Python exception
   3.     attr = _conn.execute(""select * from getSourceAttributes('""+ str(p) +""');"")
   4.     for col in attr :

     5.       stat = _conn.execute(""select count(*) from ""+ str(p) +"";"")

   6.       _conn_execute(""insert into dummy values('""+ str(p)+""','""+ str(col) +""',""+str(stat)+"");"")
   7.   return ptbl;
SQL Query Failed: ParseException:SQLparser:42S02!SELECT: no such table 't'



unclear where the 't' comes from?
what is the mis-conception?

",4
100,43129505,importing tbl file to monetDB on windows 10,"I am having trouble importing the data of the TPCH-Benchmark (generated with dbgen) into my monetDB-Database.
I've already created all the tables and I'm trying to import using the following command:


  COPY RECORDS INTO region FROM ""PATH\region.tbl"" DELIMITERS tuple_seperator '|' record_seperator '\r\n';


And I get the following error message:


  syntax error, unexpected RECORDS, expecting BINARY or INTO in: ""copy records""


I also found out this one on the internet:


  COPY INTO sys.region 'PATH/region.tbl' using delimiters '|','\n';


But I get the following error message:


  syntax error, unexpected IDENT, expecting FROM in: ""copy into sys.region ""C:\ProgramData\MySQL\MySQL Server 5.7\Uploads\region.""


Because I'm a new monetDB user I'm not getting 

What I'm doing wrong ?

Any help will be appreciate :)
",-1,-1,-1.0,"importing tbl file to monetDB on windows 10-I am having trouble importing the data of the TPCH-Benchmark (generated with dbgen) into my monetDB-Database.
I've already created all the tables and I'm trying to import using the following command:


  COPY RECORDS INTO region FROM ""PATH\region.tbl"" DELIMITERS tuple_seperator '|' record_seperator '\r\n';


And I get the following error message:


  syntax error, unexpected RECORDS, expecting BINARY or INTO in: ""copy records""


I also found out this one on the internet:


  COPY INTO sys.region 'PATH/region.tbl' using delimiters '|','\n';


But I get the following error message:


  syntax error, unexpected IDENT, expecting FROM in: ""copy into sys.region ""C:\ProgramData\MySQL\MySQL Server 5.7\Uploads\region.""


Because I'm a new monetDB user I'm not getting 

What I'm doing wrong ?

Any help will be appreciate :)
",0
101,45431148,monetdb incorrect data insert/update,"I am using MonetDB to store and analyze email campaign data. I have one table with about 6 million data. Table has around 30 columns. 
When I select some of the data, I realise that data are not correctly inserted/updated. 
When I fire ""select contactId, email, templateId from statistics.marketing_sent where contactid = '974c47e2'"", I expect the following result.  

+-----------+---------------------+------------+
| contactid | email               | templateid |
+===========+=====================+============+
| 974c47e2  | tom@frerickslaw.com |         34 |
+-----------+---------------------+------------+


But I receive the following result and found email is wrong.

+-----------+-----------------+------------+
| contactid | email           | templateid |
+===========+=================+============+
| 974c47e2  | frank@fsfco.com |         34 |
+-----------+-----------------+------------+


I double check my nodejs program that insert and update the data. I do not find any issue. 
After that what I do is, I have created new empty table and start inserting/updating on that table. New table has 500k~ data and all ware correct. But I need all those data in main table. 
So, I fire ""insert into statistics.marketing_sent select * from statistics.marketing_sent_2"". And I again found that data are incorrect. 

Is there any one who face this kind of issue?
",-1,-1,-1.0,"monetdb incorrect data insert/update-I am using MonetDB to store and analyze email campaign data. I have one table with about 6 million data. Table has around 30 columns. 
When I select some of the data, I realise that data are not correctly inserted/updated. 
When I fire ""select contactId, email, templateId from statistics.marketing_sent where contactid = '974c47e2'"", I expect the following result.  

+-----------+---------------------+------------+
| contactid | email               | templateid |
+===========+=====================+============+
| 974c47e2  | tom@frerickslaw.com |         34 |
+-----------+---------------------+------------+


But I receive the following result and found email is wrong.

+-----------+-----------------+------------+
| contactid | email           | templateid |
+===========+=================+============+
| 974c47e2  | frank@fsfco.com |         34 |
+-----------+-----------------+------------+


I double check my nodejs program that insert and update the data. I do not find any issue. 
After that what I do is, I have created new empty table and start inserting/updating on that table. New table has 500k~ data and all ware correct. But I need all those data in main table. 
So, I fire ""insert into statistics.marketing_sent select * from statistics.marketing_sent_2"". And I again found that data are incorrect. 

Is there any one who face this kind of issue?
",4
102,46636188,Run different MonetDB databases at same time,"I'm trying to run two servers listening to different ports in MonetDB, but I can't configure the ports.

I tried to include in M5server.bat:

set ""mapi_port=50001"", set mapi_port=50001, set port=50001, any combination of set and port, basically, still it does not work. The server is still listening to the default 50000.
",-1,-1,-1.0,"Run different MonetDB databases at same time-I'm trying to run two servers listening to different ports in MonetDB, but I can't configure the ports.

I tried to include in M5server.bat:

set ""mapi_port=50001"", set mapi_port=50001, set port=50001, any combination of set and port, basically, still it does not work. The server is still listening to the default 50000.
",3
103,45878011,Case insensitive/Case preserving Monetdb tables,"Can I set monetdb to be case insensitive (but case preserving) ?

I am aware that workarounds exist: For example using ilike for search, and using lower in group by clauses but, especially in the latter case, the performance degradation is significant, especially in large datasets.

I wonder if there is a way to get case insensitive/case preserving tables in monetdb.
",0,-1,-1.0,"Case insensitive/Case preserving Monetdb tables-Can I set monetdb to be case insensitive (but case preserving) ?

I am aware that workarounds exist: For example using ilike for search, and using lower in group by clauses but, especially in the latter case, the performance degradation is significant, especially in large datasets.

I wonder if there is a way to get case insensitive/case preserving tables in monetdb.
",5
104,48772593,monetdb regexp select,"I'm doing some testing with MonetDB.
The gist of the query I'm trying perform (using borrowed syntax) goes like this:
SELECT mystring FROM mytable WHERE mystring REGEXP 'myxpression';

MonetDB does not support this syntax, but the docs claim that it supports PCRE, so this may be possible, still the syntax eludes me.
",-1,-1,-1.0,"monetdb regexp select-I'm doing some testing with MonetDB.
The gist of the query I'm trying perform (using borrowed syntax) goes like this:
SELECT mystring FROM mytable WHERE mystring REGEXP 'myxpression';

MonetDB does not support this syntax, but the docs claim that it supports PCRE, so this may be possible, still the syntax eludes me.
",0
105,49479520,Unable to start monetdb using mserver5,"I have an existing monetdb installation and a dbfarm. I want to change the number of threads being used by monetdb as specified in this (https://www.monetdb.org/Documentation/Guide/Multicores) docs page. It looks like we need to start monetdb using mserver5 instead of monetdbd to be able to set this parameter. So, I tried the following command:

mserver5 --dbpath=dbfarm/voc/ --set mapi_port=50000

 BBPdiskscan: unexpected file log.6, leaving /home/mskd/dbfarm/voc/bat/sql_logs/sql.
 BBPdiskscan: unexpected file BBP.dir, leaving /home/mskd/dbfarm/voc/bat/bat/BACKUP.
 # MonetDB 5 server v11.27.13 ""Jul2017-SP4""
 # Serving database 'voc', using 8 threads
 # Compiled for x86_64-pc-linux-gnu/64bit with 128bit integers
 # Found 31.301 GiB available main-memory.
 # Copyright (c) 1993 - July 2008 CWI.
 # Copyright (c) August 2008 - 2018 MonetDB B.V., all rights reserved
 # Visit https://www.monetdb.org/ for further information
 # Listening for connection requests on mapi:monetdb://127.0.0.1:50000/
 # MonetDB/SQL module loaded


The client is unable to connect to the above. 

I think this is occurring because the URI is wrong the above output of mserver. Usually, while starting it using monetdbd, it automatically connects to the URI: mapi:monetdb://127.0.0.1:50000/voc

Can someone point me to how to change this URI while starting monetdb using mserver5?
",-1,-1,-1.0,"Unable to start monetdb using mserver5-I have an existing monetdb installation and a dbfarm. I want to change the number of threads being used by monetdb as specified in this (https://www.monetdb.org/Documentation/Guide/Multicores) docs page. It looks like we need to start monetdb using mserver5 instead of monetdbd to be able to set this parameter. So, I tried the following command:

mserver5 --dbpath=dbfarm/voc/ --set mapi_port=50000

 BBPdiskscan: unexpected file log.6, leaving /home/mskd/dbfarm/voc/bat/sql_logs/sql.
 BBPdiskscan: unexpected file BBP.dir, leaving /home/mskd/dbfarm/voc/bat/bat/BACKUP.
 # MonetDB 5 server v11.27.13 ""Jul2017-SP4""
 # Serving database 'voc', using 8 threads
 # Compiled for x86_64-pc-linux-gnu/64bit with 128bit integers
 # Found 31.301 GiB available main-memory.
 # Copyright (c) 1993 - July 2008 CWI.
 # Copyright (c) August 2008 - 2018 MonetDB B.V., all rights reserved
 # Visit https://www.monetdb.org/ for further information
 # Listening for connection requests on mapi:monetdb://127.0.0.1:50000/
 # MonetDB/SQL module loaded


The client is unable to connect to the above. 

I think this is occurring because the URI is wrong the above output of mserver. Usually, while starting it using monetdbd, it automatically connects to the URI: mapi:monetdb://127.0.0.1:50000/voc

Can someone point me to how to change this URI while starting monetdb using mserver5?
",5
106,49632221,Show runtime of a query on monetdb,"I am testing monetdb for a colunmnar storage.

I already installed and run the server
but, when I connect to the client and run a query, the response does not show the time to execute the query.
I am connecting as:


  mclient -u monetdb -d voc


I already tried to connect with interactive like:


  mclient -u monetdb -d voc -i


Output example:

sql&gt;select count(*) from voc.regions;
+---------+
| L3      |
+=========+
| 5570699 |
+---------+
1 tuple

",-1,-1,-1.0,"Show runtime of a query on monetdb-I am testing monetdb for a colunmnar storage.

I already installed and run the server
but, when I connect to the client and run a query, the response does not show the time to execute the query.
I am connecting as:


  mclient -u monetdb -d voc


I already tried to connect with interactive like:


  mclient -u monetdb -d voc -i


Output example:

sql&gt;select count(*) from voc.regions;
+---------+
| L3      |
+=========+
| 5570699 |
+---------+
1 tuple

",3
107,49755705,Monetdb database was killed by signal SIGSEGV,"I'have a database version MonetDB Database Server Toolkit v1.1 (Jun2016-SP2) working on RHEL version 6.7
I faced with unexpected shut down with the message in the log: ""database was killed by signal SIGSEGV"" when trying to execute bunch of 'SELECT COUNT(1) FROM ' quires in single connection. Tables are huge 8Mln rows and 4000 columns.
Also I can't fulfill statistics table for such tables. 
",-1,-1,-1.0,"Monetdb database was killed by signal SIGSEGV-I'have a database version MonetDB Database Server Toolkit v1.1 (Jun2016-SP2) working on RHEL version 6.7
I faced with unexpected shut down with the message in the log: ""database was killed by signal SIGSEGV"" when trying to execute bunch of 'SELECT COUNT(1) FROM ' quires in single connection. Tables are huge 8Mln rows and 4000 columns.
Also I can't fulfill statistics table for such tables. 
",5
108,49813245,Importing CSV to MonetDB,"I am new for using MonetDB. I have imported .csv file in it.  

However there are always the problem :  


  sql>COPY INTO 123 FROM' C:\Program Files\MonetDB\112.csv' USING DELIMITERS '|', '|\n' LOCKED;
  COPY INTO: filename must have absolute path:  C:\Program Files\MonetDB\112.csv  


OR It display another question :  


  sql>COPY INTO usgs FROM 'C:\Program Files\MonetDB\112.csv' USING DELIMITERS '|', '|\n' LOCKED;
  Failed to import table '123', incomplete record at end of file


I do not konw how to solve it?
",-1,-1,-1.0,"Importing CSV to MonetDB-I am new for using MonetDB. I have imported .csv file in it.  

However there are always the problem :  


  sql>COPY INTO 123 FROM' C:\Program Files\MonetDB\112.csv' USING DELIMITERS '|', '|\n' LOCKED;
  COPY INTO: filename must have absolute path:  C:\Program Files\MonetDB\112.csv  


OR It display another question :  


  sql>COPY INTO usgs FROM 'C:\Program Files\MonetDB\112.csv' USING DELIMITERS '|', '|\n' LOCKED;
  Failed to import table '123', incomplete record at end of file


I do not konw how to solve it?
",0
109,50686948,type 5 error while using MonetDBLite or readr,"I am trying to write 80GB csv file onto the MonetDB using MonetDBLite using the following code. 

mtcars[1:12,] %&gt;% write_csv(""mtcars1_12.csv"")
mtcars[13:32,] %&gt;% write_csv(""mtcars13_32.csv"")

setwd(""path"") # please use your folder path

dbdir &lt;- ""path"" # provide path where you want to create the MonetDB

con &lt;- dbConnect(MonetDBLite::MonetDBLite(), dbdir)

f &lt;- function(x, pos) dbWriteTable(conn=con, name=""mtcars1"", value= x, header = T, append = T)

read_csv_chunked(""mtcars1_12.csv"", DataFrameCallback$new(f), chunk_size = 10)
read_csv_chunked(""mtcars13_32.csv"", DataFrameCallback$new(f), chunk_size = 10)


Now, this mtcars data works perfectly fine, but my actual data with exactly the same code throws the following error.

Evaluation error: Failed to insert data: MALException:embedded:Could not convert column 2 var_abc to type 5.


Unfortunately, I can't reproduce the above error using mtcars as I don't know what's causing it!

What is ""convert column to type 5"" issue and how can I fix this?
",-1,-1,-1.0,"type 5 error while using MonetDBLite or readr-I am trying to write 80GB csv file onto the MonetDB using MonetDBLite using the following code. 

mtcars[1:12,] %&gt;% write_csv(""mtcars1_12.csv"")
mtcars[13:32,] %&gt;% write_csv(""mtcars13_32.csv"")

setwd(""path"") # please use your folder path

dbdir &lt;- ""path"" # provide path where you want to create the MonetDB

con &lt;- dbConnect(MonetDBLite::MonetDBLite(), dbdir)

f &lt;- function(x, pos) dbWriteTable(conn=con, name=""mtcars1"", value= x, header = T, append = T)

read_csv_chunked(""mtcars1_12.csv"", DataFrameCallback$new(f), chunk_size = 10)
read_csv_chunked(""mtcars13_32.csv"", DataFrameCallback$new(f), chunk_size = 10)


Now, this mtcars data works perfectly fine, but my actual data with exactly the same code throws the following error.

Evaluation error: Failed to insert data: MALException:embedded:Could not convert column 2 var_abc to type 5.


Unfortunately, I can't reproduce the above error using mtcars as I don't know what's causing it!

What is ""convert column to type 5"" issue and how can I fix this?
",4
110,51436051,monetdb cluster management can't setup,"I'm trying to follow MonetDB docs on Cluster Management

to setup a 3 nodes cluster using 3 Centos machines, I created the 3 dbfarm using monetdbd create /path/to/mydbfarm and from the first node, I run monetdb discover and it returns nothing where it should discover the other nodes, and when I try to run monetdb -h [second node IP] -P mypasshphrase status it returns the following error 


  status: cannot connect: Connection refused


PS: I have a passwordless connection between these 3 nodes, ssh [any node IP] works just fine,

Thank you
",-1,-1,-1.0,"monetdb cluster management can't setup-I'm trying to follow MonetDB docs on Cluster Management

to setup a 3 nodes cluster using 3 Centos machines, I created the 3 dbfarm using monetdbd create /path/to/mydbfarm and from the first node, I run monetdb discover and it returns nothing where it should discover the other nodes, and when I try to run monetdb -h [second node IP] -P mypasshphrase status it returns the following error 


  status: cannot connect: Connection refused


PS: I have a passwordless connection between these 3 nodes, ssh [any node IP] works just fine,

Thank you
",3
111,51644081,MonetDB client compilation,"I'm a beginner in the Database community. I have been trying to interface with MonetDB using C/C++ MAPI. I have installed MonetDB on my Ubuntu 14.04 LTS machine and when I try to compile a sample program from here, I get the following error:

$ gcc test.c -I /usr/include/monetdb -lmapi



  test.c:(.text+0x29): undefined reference to mapi_explain_query'
  test.c:(.text+0x35): undefined reference tomapi_result_error'
  test.c:(.text+0x50): undefined reference to mapi_explain_result'
  test.c:(.text+0x5c): undefined reference tomapi_next_result'
  test.c:(.text+0x6d): undefined reference to mapi_close_handle'
  test.c:(.text+0x79): undefined reference tomapi_destroy'
  test.c:(.text+0x98): undefined reference to mapi_explain'
  test.c:(.text+0xa4): undefined reference tomapi_destroy'
  /tmp/cctyQopc.o: In function query':
  test.c:(.text+0xf9): undefined reference tomapi_query'
  test.c:(.text+0x110): undefined reference to mapi_error'
  /tmp/cctyQopc.o: In functionupdate':
  test.c:(.text+0x160): undefined reference to mapi_close_handle'
  /tmp/cctyQopc.o: In functionmain':
  test.c:(.text+0x1b6): undefined reference to mapi_connect'
  test.c:(.text+0x1c6): undefined reference tomapi_error'
  test.c:(.text+0x238): undefined reference to mapi_fetch_field'
  test.c:(.text+0x24d): undefined reference tomapi_fetch_field'
  test.c:(.text+0x277): undefined reference to mapi_fetch_row'
  test.c:(.text+0x287): undefined reference tomapi_close_handle'
  test.c:(.text+0x293): undefined reference to `mapi_destroy'
  collect2: error: ld returned 1 exit status


This question has previously been asked here and the answer did not solve the problem (although the answer was accepted, I'm not sure why). Any help/directions would be great!
",-1,-1,-1.0,"MonetDB client compilation-I'm a beginner in the Database community. I have been trying to interface with MonetDB using C/C++ MAPI. I have installed MonetDB on my Ubuntu 14.04 LTS machine and when I try to compile a sample program from here, I get the following error:

$ gcc test.c -I /usr/include/monetdb -lmapi



  test.c:(.text+0x29): undefined reference to mapi_explain_query'
  test.c:(.text+0x35): undefined reference tomapi_result_error'
  test.c:(.text+0x50): undefined reference to mapi_explain_result'
  test.c:(.text+0x5c): undefined reference tomapi_next_result'
  test.c:(.text+0x6d): undefined reference to mapi_close_handle'
  test.c:(.text+0x79): undefined reference tomapi_destroy'
  test.c:(.text+0x98): undefined reference to mapi_explain'
  test.c:(.text+0xa4): undefined reference tomapi_destroy'
  /tmp/cctyQopc.o: In function query':
  test.c:(.text+0xf9): undefined reference tomapi_query'
  test.c:(.text+0x110): undefined reference to mapi_error'
  /tmp/cctyQopc.o: In functionupdate':
  test.c:(.text+0x160): undefined reference to mapi_close_handle'
  /tmp/cctyQopc.o: In functionmain':
  test.c:(.text+0x1b6): undefined reference to mapi_connect'
  test.c:(.text+0x1c6): undefined reference tomapi_error'
  test.c:(.text+0x238): undefined reference to mapi_fetch_field'
  test.c:(.text+0x24d): undefined reference tomapi_fetch_field'
  test.c:(.text+0x277): undefined reference to mapi_fetch_row'
  test.c:(.text+0x287): undefined reference tomapi_close_handle'
  test.c:(.text+0x293): undefined reference to `mapi_destroy'
  collect2: error: ld returned 1 exit status


This question has previously been asked here and the answer did not solve the problem (although the answer was accepted, I'm not sure why). Any help/directions would be great!
",1
112,53607056,Problem using WHERE clause in MonetDBLite in R,"I am trying to use MonetDBLite in R64bit 3.5.1.
My problem is that I can not filter the data using SQL command like this example:

dbGetQuery(DB,'select * from table1 where ""var1"" = ""1""')


I get this error:

Error in .local(conn, statement, ...) : 
  Unable to execute statement 'select * from table1  where ""var1"" = ""1""'.
Server says 'ParseException:SQLparser:42000!SELECT: identifier '1' unknown'.


Any ideas?
",-1,-1,-1.0,"Problem using WHERE clause in MonetDBLite in R-I am trying to use MonetDBLite in R64bit 3.5.1.
My problem is that I can not filter the data using SQL command like this example:

dbGetQuery(DB,'select * from table1 where ""var1"" = ""1""')


I get this error:

Error in .local(conn, statement, ...) : 
  Unable to execute statement 'select * from table1  where ""var1"" = ""1""'.
Server says 'ParseException:SQLparser:42000!SELECT: identifier '1' unknown'.


Any ideas?
",4
113,54195698,"Why is my DBI connector doing a dummy query with predicate ""where 0 = 1""?","I have some R test code that I use to connect to a MonetDB instance.

I notice that for each connection that I create through tbl(conn, ""some_table"") I somehow always end up with a 'primer' query of the 
form

SELECT *
FROM ""some_table"" AS ""zzz1""
WHERE (0 = 1)


So if I run the code

conn &lt;- dbConnect(MonetDB.R(), host=""localhost"", dbname=""testdb"", user=""monetdb"", password=""monetdb"")
foo &lt;- tbl(conn, ""foo"")
foo %&gt;% filter(bar %like%  '%baz%') %&gt;% collect()


I end up with two queries in the output

QQ: 'SELECT *
FROM ""foo"" AS ""zzz1""
WHERE (0 = 1)'
QQ: Query result for query 0 with 0 rows and 34 cols, 0 rows.
QQ: 'SELECT *
FROM ""foo"")
WHERE (""bar"" LIKE '%baz%')'
QQ: Query result for query 1 with 20 rows and 2 cols, 20 rows.


I do not understand where this additional query comes from. As far as I know DBI should not perform any dummy query by default.
",-1,-1,-1.0,"Why is my DBI connector doing a dummy query with predicate ""where 0 = 1""?-I have some R test code that I use to connect to a MonetDB instance.

I notice that for each connection that I create through tbl(conn, ""some_table"") I somehow always end up with a 'primer' query of the 
form

SELECT *
FROM ""some_table"" AS ""zzz1""
WHERE (0 = 1)


So if I run the code

conn &lt;- dbConnect(MonetDB.R(), host=""localhost"", dbname=""testdb"", user=""monetdb"", password=""monetdb"")
foo &lt;- tbl(conn, ""foo"")
foo %&gt;% filter(bar %like%  '%baz%') %&gt;% collect()


I end up with two queries in the output

QQ: 'SELECT *
FROM ""foo"" AS ""zzz1""
WHERE (0 = 1)'
QQ: Query result for query 0 with 0 rows and 34 cols, 0 rows.
QQ: 'SELECT *
FROM ""foo"")
WHERE (""bar"" LIKE '%baz%')'
QQ: Query result for query 1 with 20 rows and 2 cols, 20 rows.


I do not understand where this additional query comes from. As far as I know DBI should not perform any dummy query by default.
",0
114,55951563,MonetDb performance on a large table with 20K columns,"I'm testing MonetDB as a solution for a data-science project. I have a table of 21K columns - all but three are features described as float (32bit) and 6.5M rows (which may or may not become larger, perhaps up to 20M rows).

My aim is to use the integrated Python on MonetDB to achieve the ability to train without exporting the data from the DB every time. In addition, queries on specific columns are necessary so the columnar storage can be a significant advantage.
I have compiled MonetDB 11.31.13 to gain the embedded Python support. OS is CentOS 7. Storage is not SSD. 48 core server with ~300GB of memory. I created an (unique) index on the table (without analyze).

I noticed that when I 

SELECT * FROM [TABLE_NAME] SAMPLE 50; 
it takes a long long time to complete.
I then tried:

SELECT f1, f2, ..., f501 from [TABLE_NAME] SAMPLE 50;

SELECT f1, f2, ..., f1001 from [TABLE_NAME] SAMPLE 50;

SELECT f1, f2, ..., f2001 from [TABLE_NAME] SAMPLE 50;

...

SELECT * from [TABLE_NAME] SAMPLE 50;

I ran the queries locally with mclient and used time to measure the amount of time it took and I noticed two things:


There is a period where a single core is taking 100% CPU. The more columns the longer it takes to complete. Only when it finishes I can see all cores working, data being consumed, etc... In addition, during that time, the query does not appear in the result of
select * from sys.queue();
Eventually, the time needed to get 50 rows from the table was almost 4 hours.
The amount of columns is doubled but between each step in the test the amount of time it takes to get a result is tripled.


So my questions is: 
Is this behaviour expected or does it reflect something I did wrong?

The data requested from the table should be around 4MB (50 * 21000 * 4Bytes), so this reflects a significant time waiting for such a small amount of data.

Help is appreciated!
",1,-1,-1.0,"MonetDb performance on a large table with 20K columns-I'm testing MonetDB as a solution for a data-science project. I have a table of 21K columns - all but three are features described as float (32bit) and 6.5M rows (which may or may not become larger, perhaps up to 20M rows).

My aim is to use the integrated Python on MonetDB to achieve the ability to train without exporting the data from the DB every time. In addition, queries on specific columns are necessary so the columnar storage can be a significant advantage.
I have compiled MonetDB 11.31.13 to gain the embedded Python support. OS is CentOS 7. Storage is not SSD. 48 core server with ~300GB of memory. I created an (unique) index on the table (without analyze).

I noticed that when I 

SELECT * FROM [TABLE_NAME] SAMPLE 50; 
it takes a long long time to complete.
I then tried:

SELECT f1, f2, ..., f501 from [TABLE_NAME] SAMPLE 50;

SELECT f1, f2, ..., f1001 from [TABLE_NAME] SAMPLE 50;

SELECT f1, f2, ..., f2001 from [TABLE_NAME] SAMPLE 50;

...

SELECT * from [TABLE_NAME] SAMPLE 50;

I ran the queries locally with mclient and used time to measure the amount of time it took and I noticed two things:


There is a period where a single core is taking 100% CPU. The more columns the longer it takes to complete. Only when it finishes I can see all cores working, data being consumed, etc... In addition, during that time, the query does not appear in the result of
select * from sys.queue();
Eventually, the time needed to get 50 rows from the table was almost 4 hours.
The amount of columns is doubled but between each step in the test the amount of time it takes to get a result is tripled.


So my questions is: 
Is this behaviour expected or does it reflect something I did wrong?

The data requested from the table should be around 4MB (50 * 21000 * 4Bytes), so this reflects a significant time waiting for such a small amount of data.

Help is appreciated!
",4
115,56953356,Spawn subprocess in R,"I'm trying to spawn a sub-process in R using the subprocess library, as presented in this tutorial. The Problem is that the program I'm trying to launch requires an additional command after the executable.

Example:

I would launch the command from the shell like this:

monetdbd create mydb


where 'create' is the additional command and 'mydb' a parameter.

I tried giving 'create mydb' as parameters in R like this:

handle &lt;- spawn_process('/usr/local/bin/monetdb', c('create mydb'))


However from the output I got with

process_read(handle, PIPE_STDOUT, timeout = 3000)


I conclude that the parameters don't work as I'm getting the info message from monetdb on how to call it, just as if I call only 'monetdb' without the create command from the shell:

Usage: monetdb [options] command [command-options-and-arguments]


The second thing I tried is to include the create command into the path, but this leads to a ""No such file and directory"" error.

Any hints are appreciated.
",-1,-1,-1.0,"Spawn subprocess in R-I'm trying to spawn a sub-process in R using the subprocess library, as presented in this tutorial. The Problem is that the program I'm trying to launch requires an additional command after the executable.

Example:

I would launch the command from the shell like this:

monetdbd create mydb


where 'create' is the additional command and 'mydb' a parameter.

I tried giving 'create mydb' as parameters in R like this:

handle &lt;- spawn_process('/usr/local/bin/monetdb', c('create mydb'))


However from the output I got with

process_read(handle, PIPE_STDOUT, timeout = 3000)


I conclude that the parameters don't work as I'm getting the info message from monetdb on how to call it, just as if I call only 'monetdb' without the create command from the shell:

Usage: monetdb [options] command [command-options-and-arguments]


The second thing I tried is to include the create command into the path, but this leads to a ""No such file and directory"" error.

Any hints are appreciated.
",3
116,58235491,Get all columns from a table in Monetdb,"I have to study a table on monetdb that probably has many columns.
When I do 


  SELECT * from cat.data limit 1;


I get

1 tuple !5600 columns dropped!


Which I interpret as not getting all the columns from the console.

I am using mclient to connect to the database.

I tried withe DESC, DESCRIBE - didnt work. Any help?
",1,-1,-1.0,"Get all columns from a table in Monetdb-I have to study a table on monetdb that probably has many columns.
When I do 


  SELECT * from cat.data limit 1;


I get

1 tuple !5600 columns dropped!


Which I interpret as not getting all the columns from the console.

I am using mclient to connect to the database.

I tried withe DESC, DESCRIBE - didnt work. Any help?
",4
117,59089620,"pyapi.eval_loader' undefined in: pyapi.eval_loader(0x7f34f01f2c60:ptr, ""{_emit.emit( { 'event_date': '2019-10-10', 'status': 1})};"":str);","While trying to use Monet/Python Loader function,we are getting the following error
    pymonetdb.exceptions.OperationalError: 'pyapi.eval_loader' undefined in:     pyapi.eval_loader(0x7f34f01f2c60:ptr, ""{_emit.emit( { 'event_date': '2019-10-10', 'status': 1})};"":str);

Followed the below steps for installation

Python installation steps:

We have installed python 3.6
1)yum install autoconf
2)yum install automake
3)yum install libtool
4)yum install openssl
5)yum install openssl-devel
6)yum install python-devel
7)Configured environment path settings for python   
    export PYTHONPATH=$PATH:/usr/local/lib/python3.6/site-packages


Monet installation steps:
    1)git clone https://github.com/MonetDB/MonetDB.git
    2)cd /MonetDB
    3)./bootstrap
    4)cd..
    5)mkdir testdir
    6)cd testdir
    7)../MonetDB/configure --enable-pyintegration=yes

While configuring we get the following status enabled message as below

py3integration is enabled

8)make
9)make install
10)monetdbd create /path/to/mydbfarm
11)monetdbd start /path/to/mydbfarm
12)monet stop -a
13)monet set embedpy=true
14)monet start -a
13)Enabled numpy(*pip install numpy*)


Created a loader by using the below python script

import pymonetdb
import sys
import os
connection = pymonetdb.connect(username=""admin"", password=""admin@123"", hostname=""ipaddress"", database=""test"")
cursor = connection.cursor()
cursor.execute(""CREATE LOADER myloader() LANGUAGE PYTHON {_emit.emit( { 'event_date': '2019-10-10', 'status': 1})};"") #create loader
cursor.execute(""COPY LOADER INTO store FROM myloader();"")  #append the row from loader to table
connection.commit()


While running the above script getting the following error

pymonetdb.exceptions.OperationalError: 'pyapi.eval_loader' undefined in:     pyapi.eval_loader(0x7f34f01f2c60:ptr, ""{_emit.emit( { 'event_date': '2019-10-10', 'status': 1})};"":str);


Please, help us to fix this issue.
",-1,-1,-1.0,"pyapi.eval_loader' undefined in: pyapi.eval_loader(0x7f34f01f2c60:ptr, ""{_emit.emit( { 'event_date': '2019-10-10', 'status': 1})};"":str);-While trying to use Monet/Python Loader function,we are getting the following error
    pymonetdb.exceptions.OperationalError: 'pyapi.eval_loader' undefined in:     pyapi.eval_loader(0x7f34f01f2c60:ptr, ""{_emit.emit( { 'event_date': '2019-10-10', 'status': 1})};"":str);

Followed the below steps for installation

Python installation steps:

We have installed python 3.6
1)yum install autoconf
2)yum install automake
3)yum install libtool
4)yum install openssl
5)yum install openssl-devel
6)yum install python-devel
7)Configured environment path settings for python   
    export PYTHONPATH=$PATH:/usr/local/lib/python3.6/site-packages


Monet installation steps:
    1)git clone https://github.com/MonetDB/MonetDB.git
    2)cd /MonetDB
    3)./bootstrap
    4)cd..
    5)mkdir testdir
    6)cd testdir
    7)../MonetDB/configure --enable-pyintegration=yes

While configuring we get the following status enabled message as below

py3integration is enabled

8)make
9)make install
10)monetdbd create /path/to/mydbfarm
11)monetdbd start /path/to/mydbfarm
12)monet stop -a
13)monet set embedpy=true
14)monet start -a
13)Enabled numpy(*pip install numpy*)


Created a loader by using the below python script

import pymonetdb
import sys
import os
connection = pymonetdb.connect(username=""admin"", password=""admin@123"", hostname=""ipaddress"", database=""test"")
cursor = connection.cursor()
cursor.execute(""CREATE LOADER myloader() LANGUAGE PYTHON {_emit.emit( { 'event_date': '2019-10-10', 'status': 1})};"") #create loader
cursor.execute(""COPY LOADER INTO store FROM myloader();"")  #append the row from loader to table
connection.commit()


While running the above script getting the following error

pymonetdb.exceptions.OperationalError: 'pyapi.eval_loader' undefined in:     pyapi.eval_loader(0x7f34f01f2c60:ptr, ""{_emit.emit( { 'event_date': '2019-10-10', 'status': 1})};"":str);


Please, help us to fix this issue.
",0
118,57388518,How to make alter command take effect In MonetDB?,"I use mclient to connect MonetDB and enter this sql:""alter table t1 rename to t2"",then I keep this mclient alive and I use anthor mclient to connect the same MonetDB database, but when I enter this sql :""select *from t2 "",MonetDB reports an error : ""no such table ""t2"""". It seems that only one connection could take effect.So how can I make all connection take effect?

This is Linux OS, actually it is Centos 7.5. MonetDB's version is 2019,April.

In mclient A ,I enter this sql:

alter table t1 rename to t2;


then I keep mclient A alive, I use another mclient B to connect the same database, the I enter this sql:

select * from t2;


then I got an error: no such table t2.
Restart this database could solve this problem.

I expect the output is the data of t2,but the actual output is ERROR,no such table t2.
",-1,-1,-1.0,"How to make alter command take effect In MonetDB?-I use mclient to connect MonetDB and enter this sql:""alter table t1 rename to t2"",then I keep this mclient alive and I use anthor mclient to connect the same MonetDB database, but when I enter this sql :""select *from t2 "",MonetDB reports an error : ""no such table ""t2"""". It seems that only one connection could take effect.So how can I make all connection take effect?

This is Linux OS, actually it is Centos 7.5. MonetDB's version is 2019,April.

In mclient A ,I enter this sql:

alter table t1 rename to t2;


then I keep mclient A alive, I use another mclient B to connect the same database, the I enter this sql:

select * from t2;


then I got an error: no such table t2.
Restart this database could solve this problem.

I expect the output is the data of t2,but the actual output is ERROR,no such table t2.
",3
119,60378437,Connect to monetDb trough ssh tunnel,"I am trying to connect to MonetDb database, unsuccessfully though :(
I am trying to replicate this approach as much as I can.
Here is the code:
var MDB = require('monetdb')();
var Client = require('ssh2').Client;
var ssh = new Client();

const config = {... this one works...the problem is not here }

var db = new Promise(function(resolve, reject){
    ssh.on('ready', function() {
      console.log(&quot;SSH connection ready !!!&quot;);
      ssh.forwardOut('127.0.0.1', 12345, 'db7', 50000, function name(err, stream) {
          if(err){
              console.log(`${err}`);
          } else {
              console.log(`SSH connection established :)`);
              var conn = new MDB({
                host     : 'db7', 
                port     : 50000, 
                dbname   : 'db', 
                user     : 'user', 
                password : 'SupedDuperPass',
                language: 'sql'
            });
            // console.log(conn);
        
            var res = conn.connect(&quot;csrhub&quot;);
            console.log(&quot;Response: &quot;, res);
          }
      });
    }).connect(config);
});

I receive the following messages from console:

SSH connection ready !!!
SSH forwarded...
Response:  { state: 'pending' }
(node:12496) [DEP0079] DeprecationWarning: Custom inspection function on Objects via .inspect() is deprecated
WARNING Socket error occurred: Error: getaddrinfo ENOTFOUND db7 db7:50000
WARNING Reconnect attempt 1/10 in 2 sec..
WARNING Socket error occurred: Error: getaddrinfo ENOTFOUND db7 db7:50000
WARNING Could not connect to MonetDB: Error: Error: getaddrinfo ENOTFOUND db7 db7:50000
WARNING Reconnect attempt 2/10 in 2 sec..
WARNING Socket error occurred: Error: getaddrinfo ENOTFOUND db7 db7:50000
WARNING Could not connect to MonetDB: Error: Error: getaddrinfo ENOTFOUND db7 db7:50000
WARNING Reconnect attempt 3/10 in 2 sec..

The ssh connection is successfully established  but I cant connect to MonetDb.
Please help me make it work.
",1,-1,-1.0,"Connect to monetDb trough ssh tunnel-I am trying to connect to MonetDb database, unsuccessfully though :(
I am trying to replicate this approach as much as I can.
Here is the code:
var MDB = require('monetdb')();
var Client = require('ssh2').Client;
var ssh = new Client();

const config = {... this one works...the problem is not here }

var db = new Promise(function(resolve, reject){
    ssh.on('ready', function() {
      console.log(&quot;SSH connection ready !!!&quot;);
      ssh.forwardOut('127.0.0.1', 12345, 'db7', 50000, function name(err, stream) {
          if(err){
              console.log(`${err}`);
          } else {
              console.log(`SSH connection established :)`);
              var conn = new MDB({
                host     : 'db7', 
                port     : 50000, 
                dbname   : 'db', 
                user     : 'user', 
                password : 'SupedDuperPass',
                language: 'sql'
            });
            // console.log(conn);
        
            var res = conn.connect(&quot;csrhub&quot;);
            console.log(&quot;Response: &quot;, res);
          }
      });
    }).connect(config);
});

I receive the following messages from console:

SSH connection ready !!!
SSH forwarded...
Response:  { state: 'pending' }
(node:12496) [DEP0079] DeprecationWarning: Custom inspection function on Objects via .inspect() is deprecated
WARNING Socket error occurred: Error: getaddrinfo ENOTFOUND db7 db7:50000
WARNING Reconnect attempt 1/10 in 2 sec..
WARNING Socket error occurred: Error: getaddrinfo ENOTFOUND db7 db7:50000
WARNING Could not connect to MonetDB: Error: Error: getaddrinfo ENOTFOUND db7 db7:50000
WARNING Reconnect attempt 2/10 in 2 sec..
WARNING Socket error occurred: Error: getaddrinfo ENOTFOUND db7 db7:50000
WARNING Could not connect to MonetDB: Error: Error: getaddrinfo ENOTFOUND db7 db7:50000
WARNING Reconnect attempt 3/10 in 2 sec..

The ssh connection is successfully established  but I cant connect to MonetDb.
Please help me make it work.
",3
120,63586448,GDK reported error: BATproject2: does not match always,"The database version we are using is MonetDB 5 server v11.37.7 (Jun2020) on Debian 4.9.210-1+deb9u1.
I have a regular table with about 22M entries. I added a Boolean column with:
alter table conversations add column &quot;virtual&quot; Boolean Null ;

Now when I try to query the table I get this error:
sql&gt;select *   from conversations where  created &gt; '2020-08-25 10:00';
GDK reported error: project_sht: does not match always

Deleted the added column, restarted Monet, but still the same error. The file merovingian.log Shows:
2020-08-25 16:07:22 ERR reports[23151]: #DFLOWworker3: project_sht: !ERROR: does not match always
2020-08-25 16:07:22 ERR reports[23151]: #DFLOWworker2: project_bte: !ERROR: does not match always
2020-08-25 16:07:22 ERR reports[23151]: #DFLOWworker3: createExceptionInternal: !ERROR: MALException:algebra.projection:GDK reported error: project_sht: does not match always
2020-08-25 16:07:22 ERR reports[23151]: #DFLOWworker2: createExceptionInternal: !ERROR: MALException:algebra.projection:GDK reported error: project_bte: does not match always 

Any ideas how to fix this problem or how to debug it further?
Thanks!
",-1,-1,-1.0,"GDK reported error: BATproject2: does not match always-The database version we are using is MonetDB 5 server v11.37.7 (Jun2020) on Debian 4.9.210-1+deb9u1.
I have a regular table with about 22M entries. I added a Boolean column with:
alter table conversations add column &quot;virtual&quot; Boolean Null ;

Now when I try to query the table I get this error:
sql&gt;select *   from conversations where  created &gt; '2020-08-25 10:00';
GDK reported error: project_sht: does not match always

Deleted the added column, restarted Monet, but still the same error. The file merovingian.log Shows:
2020-08-25 16:07:22 ERR reports[23151]: #DFLOWworker3: project_sht: !ERROR: does not match always
2020-08-25 16:07:22 ERR reports[23151]: #DFLOWworker2: project_bte: !ERROR: does not match always
2020-08-25 16:07:22 ERR reports[23151]: #DFLOWworker3: createExceptionInternal: !ERROR: MALException:algebra.projection:GDK reported error: project_sht: does not match always
2020-08-25 16:07:22 ERR reports[23151]: #DFLOWworker2: createExceptionInternal: !ERROR: MALException:algebra.projection:GDK reported error: project_bte: does not match always 

Any ideas how to fix this problem or how to debug it further?
Thanks!
",4
121,64202421,MonetDB Mapi Library Data Insertion,"void * Data [NUM_ROW][NUM_COLS];   

string insertTablePrepare = &quot;INSERT INTO temp VALUES(&quot;;
      for (size_t k = 0; k &lt; NUM_COLS; k++) {
          insertTablePrepare += &quot;?&quot;;
          if (k==NUM_COLS-1) continue;
          insertTablePrepare += &quot;,&quot;;
      }
      insertTablePrepare += &quot;)&quot;;

hdl = mapi_prepare(dbh,insertTablePrepare.c_str());

for (size_t j = 0; j &lt; NUM_ROW; j++) {
         for (size_t k = 0; k &lt; NUM_COLS; k++) {
              switch (ColumnDataType[k]) {
                       case VARCHAR:
                          ret = mapi_param_type(hdl, k, MAPI_VARCHAR, MAPI_VARCHAR, Data[j][k]);
                       break;
                       case SMALLINT:
                          ret = mapi_param_type(hdl, k, MAPI_SHORT, MAPI_SHORT, Data[j][k]);
                       break;
                       case INT:
                          ret = mapi_param_type(hdl, k, MAPI_INT, MAPI_INT, Data[j][k]);
                       break;
                       case BIGINT:
                          ret = mapi_param_type(hdl, k, MAPI_LONG, MAPI_LONG, Data[j][k]);
                       break;
                       case DECIMAL:
                          ret = mapi_param_type(hdl, k, MAPI_FLOAT, MAPI_FLOAT, Data[j][k]);
                       break;
                       case DOUBLE:
                          ret = mapi_param_type(hdl, k, MAPI_DOUBLE, MAPI_DOUBLE, Data[j][k]);
                       break;
                       case REAL:
                          ret = mapi_param_type(hdl, k, MAPI_DOUBLE, MAPI_DOUBLE, Data[j][k]);
                       break;
                       case DATE:
                          ret = mapi_param_type(hdl, k, MAPI_DATE, MAPI_DATE, Data[j][k]);
                       break;
                       default:
                          printf(&quot;Unknow data type %d\n&quot;,ColumnDataType[k]);
                   }
          }
          ret=mapi_execute(hdl);
}

I created a data set, and I put it in a two dimensional void-pointer array.  When I was trying to insert all the records into MonetDB by using mapi_prepare() and mapi_execute(), The above code doesn't work as expected. For only one record, it could be successfully inserted. However, when the number of records is more than one. the program reports

realloc(): invalid next size
Aborted (core dumped)

Has anyone use the mapi_execute() in a for loop to iterate through all the inserting records. Thanks in advance for the help.
",1,-1,-1.0,"MonetDB Mapi Library Data Insertion-void * Data [NUM_ROW][NUM_COLS];   

string insertTablePrepare = &quot;INSERT INTO temp VALUES(&quot;;
      for (size_t k = 0; k &lt; NUM_COLS; k++) {
          insertTablePrepare += &quot;?&quot;;
          if (k==NUM_COLS-1) continue;
          insertTablePrepare += &quot;,&quot;;
      }
      insertTablePrepare += &quot;)&quot;;

hdl = mapi_prepare(dbh,insertTablePrepare.c_str());

for (size_t j = 0; j &lt; NUM_ROW; j++) {
         for (size_t k = 0; k &lt; NUM_COLS; k++) {
              switch (ColumnDataType[k]) {
                       case VARCHAR:
                          ret = mapi_param_type(hdl, k, MAPI_VARCHAR, MAPI_VARCHAR, Data[j][k]);
                       break;
                       case SMALLINT:
                          ret = mapi_param_type(hdl, k, MAPI_SHORT, MAPI_SHORT, Data[j][k]);
                       break;
                       case INT:
                          ret = mapi_param_type(hdl, k, MAPI_INT, MAPI_INT, Data[j][k]);
                       break;
                       case BIGINT:
                          ret = mapi_param_type(hdl, k, MAPI_LONG, MAPI_LONG, Data[j][k]);
                       break;
                       case DECIMAL:
                          ret = mapi_param_type(hdl, k, MAPI_FLOAT, MAPI_FLOAT, Data[j][k]);
                       break;
                       case DOUBLE:
                          ret = mapi_param_type(hdl, k, MAPI_DOUBLE, MAPI_DOUBLE, Data[j][k]);
                       break;
                       case REAL:
                          ret = mapi_param_type(hdl, k, MAPI_DOUBLE, MAPI_DOUBLE, Data[j][k]);
                       break;
                       case DATE:
                          ret = mapi_param_type(hdl, k, MAPI_DATE, MAPI_DATE, Data[j][k]);
                       break;
                       default:
                          printf(&quot;Unknow data type %d\n&quot;,ColumnDataType[k]);
                   }
          }
          ret=mapi_execute(hdl);
}

I created a data set, and I put it in a two dimensional void-pointer array.  When I was trying to insert all the records into MonetDB by using mapi_prepare() and mapi_execute(), The above code doesn't work as expected. For only one record, it could be successfully inserted. However, when the number of records is more than one. the program reports

realloc(): invalid next size
Aborted (core dumped)

Has anyone use the mapi_execute() in a for loop to iterate through all the inserting records. Thanks in advance for the help.
",4
122,63072449,Cluster configuration on MonetDB: cannot discover other nodes,"I have installed and configured a 3 monetdb nodes cluster on 3 virtual machines on my MacBook (Using Oracle Virtual Box). I use MonetDB 5 server 11.37.7
I have followed the Cluster Management documentation of MonetDB, but the monetdb discover command only returns the dbfarm of the local instance. Each node still isn't aware of other nodes.
I can connect to any nodes from any other node using monetdb -h [host] -P [passphrase], I can also discover the remote farms of a specific host by using monetdb -h host -P passphrase discover
The answer to this question monetdb cluster management can't setup helped me in setting the listenaddr property to 0.0.0.0, but still, the discover command only returns the local monetdb farm.
EDIT
Thanks to Jennie suggestion below, I noticed that the monetdb log file contains error while sending broadcast message: Network is unreachable.
I used netcat utility to brodcast UDP message from one node to the other 2 and it worked, I can ping, ssh and the 3 nodes are part of the same network configured with virtualbox, but the error is still there.
",-1,-1,-1.0,"Cluster configuration on MonetDB: cannot discover other nodes-I have installed and configured a 3 monetdb nodes cluster on 3 virtual machines on my MacBook (Using Oracle Virtual Box). I use MonetDB 5 server 11.37.7
I have followed the Cluster Management documentation of MonetDB, but the monetdb discover command only returns the dbfarm of the local instance. Each node still isn't aware of other nodes.
I can connect to any nodes from any other node using monetdb -h [host] -P [passphrase], I can also discover the remote farms of a specific host by using monetdb -h host -P passphrase discover
The answer to this question monetdb cluster management can't setup helped me in setting the listenaddr property to 0.0.0.0, but still, the discover command only returns the local monetdb farm.
EDIT
Thanks to Jennie suggestion below, I noticed that the monetdb log file contains error while sending broadcast message: Network is unreachable.
I used netcat utility to brodcast UDP message from one node to the other 2 and it worked, I can ping, ssh and the 3 nodes are part of the same network configured with virtualbox, but the error is still there.
",3
123,65254151,How to make DELETE faster in fast changing (DELSERT) table in MonetDB?,"I am using MonetDB (MDB) for OLAP queries. I am storing source data in PostgreSQL (PGSQL) and syncing it with MonetDB in batches written in Python.
In PGSQL there is a wide table with ID (non-unique) and few columns. Every few seconds Python script takes a batch of 10k records changed in the PGSQL and uploads them to MDB.
The process of upload to MDB is as follows:

Create staging table in MDB
Use COPY command to upload 10k records into the staging table.
DELETE from destination table all IDs that are in staging table.
INSERT to the destination table all rows from staging table.

So, it is basically a DELETE &amp; INSERT. I cannot use MERGE statement, because I do not have a PK - one ID can have multiple values in the destination. So I need to do a delete and full insert for all IDs currently synced.
Now to the problem: the DELETE is slow.
When I do a DELETE on a destination table, deleting 10k records in table of 25M rows, it will take 500ms.
However! If I run simple SELECT * FROM destination WHERE id = 1 and THEN do a DELETE, it takes 2ms.
I think that it has something to do with automatic creation of auxiliary indices. But this is where my knowledge ends.
I tried to solve this problem of &quot;pre-heating&quot; by doing the lookup myself and it works - but only for the first DELETE after pre-heat.
Once I do DELETE and INSERT, the next DELETE gets again slow. And doing the pre-heating before each DELETE does not make sense, because the pre-heat itself takes 500ms.
Is there any way on how to sync data to MDB without breaking auxiliary indices already built? Or make the DELETE faster without pre-heat? Or should I use some different technique to sync data into MDB without PK (does MERGE has the same problem?).
Thanks!
",1,-1,-1.0,"How to make DELETE faster in fast changing (DELSERT) table in MonetDB?-I am using MonetDB (MDB) for OLAP queries. I am storing source data in PostgreSQL (PGSQL) and syncing it with MonetDB in batches written in Python.
In PGSQL there is a wide table with ID (non-unique) and few columns. Every few seconds Python script takes a batch of 10k records changed in the PGSQL and uploads them to MDB.
The process of upload to MDB is as follows:

Create staging table in MDB
Use COPY command to upload 10k records into the staging table.
DELETE from destination table all IDs that are in staging table.
INSERT to the destination table all rows from staging table.

So, it is basically a DELETE &amp; INSERT. I cannot use MERGE statement, because I do not have a PK - one ID can have multiple values in the destination. So I need to do a delete and full insert for all IDs currently synced.
Now to the problem: the DELETE is slow.
When I do a DELETE on a destination table, deleting 10k records in table of 25M rows, it will take 500ms.
However! If I run simple SELECT * FROM destination WHERE id = 1 and THEN do a DELETE, it takes 2ms.
I think that it has something to do with automatic creation of auxiliary indices. But this is where my knowledge ends.
I tried to solve this problem of &quot;pre-heating&quot; by doing the lookup myself and it works - but only for the first DELETE after pre-heat.
Once I do DELETE and INSERT, the next DELETE gets again slow. And doing the pre-heating before each DELETE does not make sense, because the pre-heat itself takes 500ms.
Is there any way on how to sync data to MDB without breaking auxiliary indices already built? Or make the DELETE faster without pre-heat? Or should I use some different technique to sync data into MDB without PK (does MERGE has the same problem?).
Thanks!
",4
124,65840138,"MonetDB ""server requires unknown hash""","I built MonetDB from source. After I unpack the tarball, I followed these steps:
mkdir build
cd build
cmake ..
make
sudo make install

I was able to install monetdbd and mclient, and they are both at version 11.39.7.
However, when I follow the tutorial to create a new database, mclient cannot authenticate even the default user (monetdb):
$&gt; mclient -u monetdb -d imdb
password: (I entered 'monetdb')
server requires unknown hash 'SHA512'

What does this &quot;server requires unknown hash 'SHA512'&quot; mean? How can I resolve this?
p.s. I also tried to change the configuration so that it only uses MD5, but I then get a similar message: &quot;server requires unknown hash 'MD5'&quot;.
",-1,-1,-1.0,"MonetDB ""server requires unknown hash""-I built MonetDB from source. After I unpack the tarball, I followed these steps:
mkdir build
cd build
cmake ..
make
sudo make install

I was able to install monetdbd and mclient, and they are both at version 11.39.7.
However, when I follow the tutorial to create a new database, mclient cannot authenticate even the default user (monetdb):
$&gt; mclient -u monetdb -d imdb
password: (I entered 'monetdb')
server requires unknown hash 'SHA512'

What does this &quot;server requires unknown hash 'SHA512'&quot; mean? How can I resolve this?
p.s. I also tried to change the configuration so that it only uses MD5, but I then get a similar message: &quot;server requires unknown hash 'MD5'&quot;.
",3
125,66082391,SQL UPDATE-with-Join in MonetDB,"I'm using MonetDB 11.33.3 (April 2019 release). I want to update records in some table,  using corresponding values from another table.
Specifically, and for example, suppose table1 has columns col1, col3 and table2 has columns col2, col4. Assume that there's an injective map from the values of table1.col3 to table2.col4 (so that when we equi-join with these columns we get at most one match). I want to set table1.col1 to the corresponding table2.col3 value - from the single matching record in table2 (using the equi-join I just mentioned).
Here is my attempted query:
WITH t2 AS (SELECT * FROM table2)
UPDATE 
table1
SET
col1 = t2.col2
WHERE
col3 = t2.col4
;

this gives me:
SELECT: identifier 'col1' unknown

I don't understand why I'm getting this particular error, and thus don't understand what I've gotten wrong or how to fix the query.
",-1,-1,-1.0,"SQL UPDATE-with-Join in MonetDB-I'm using MonetDB 11.33.3 (April 2019 release). I want to update records in some table,  using corresponding values from another table.
Specifically, and for example, suppose table1 has columns col1, col3 and table2 has columns col2, col4. Assume that there's an injective map from the values of table1.col3 to table2.col4 (so that when we equi-join with these columns we get at most one match). I want to set table1.col1 to the corresponding table2.col3 value - from the single matching record in table2 (using the equi-join I just mentioned).
Here is my attempted query:
WITH t2 AS (SELECT * FROM table2)
UPDATE 
table1
SET
col1 = t2.col2
WHERE
col3 = t2.col4
;

this gives me:
SELECT: identifier 'col1' unknown

I don't understand why I'm getting this particular error, and thus don't understand what I've gotten wrong or how to fix the query.
",4
126,66126083,monetdbe: multiple connections reading vs writing,"I am finding that with monetdbe (embedded, Python), I can import data to two tables simultaneously from two processes, but I can't do two SELECT queries.
For example, if I run this in Bash:
(python stdinquery.py &lt; sql_examples/wind.sql &amp;); (python stdinquery.py &lt; sql_examples/first_event_by_day.sql &amp;)

then I get this error from one process, while the other finishes its query fine:
monetdbe.exceptions.OperationalError: Failed to open database: MALException:monetdbe.monetdbe_startup:GDKinit() failed (code -2)

I'm a little surprised that it can write two tables at once but not read two tables at once. Am I overlooking something?
My stdinquery.py is just:
import sys
import monetdbe

monet_conn = monetdbe.connect(&quot;dw.db&quot;)
cursor = monet_conn.cursor()
query = sys.stdin.read()
cursor.executescript(query)
print(cursor.fetchdf())

",-1,-1,-1.0,"monetdbe: multiple connections reading vs writing-I am finding that with monetdbe (embedded, Python), I can import data to two tables simultaneously from two processes, but I can't do two SELECT queries.
For example, if I run this in Bash:
(python stdinquery.py &lt; sql_examples/wind.sql &amp;); (python stdinquery.py &lt; sql_examples/first_event_by_day.sql &amp;)

then I get this error from one process, while the other finishes its query fine:
monetdbe.exceptions.OperationalError: Failed to open database: MALException:monetdbe.monetdbe_startup:GDKinit() failed (code -2)

I'm a little surprised that it can write two tables at once but not read two tables at once. Am I overlooking something?
My stdinquery.py is just:
import sys
import monetdbe

monet_conn = monetdbe.connect(&quot;dw.db&quot;)
cursor = monet_conn.cursor()
query = sys.stdin.read()
cursor.executescript(query)
print(cursor.fetchdf())

",0
127,66179507,Lazy Logical Replication - wlr.replicate error,"I am attempting to setup LLR on MonetDB. Starting the master (named monet-db-0-tenant) works fine, but when I attempt to clone a replica (named monet-db-1-tenant) using wlr.replicate, I receive the error: &quot;Timestamp (monet-db-0-tenant) has incorrect format&quot;
Example:
sql&gt;CALL wlr.replicate('monet-db-0-tenant');
Timestamp (monet-db-0-tenant) has incorrect format

Note: I am in an mclient session on the replica database issuing this call to wlr.replicate.
Appreciate any guidance as to why this error might be occuring.
",-1,-1,-1.0,"Lazy Logical Replication - wlr.replicate error-I am attempting to setup LLR on MonetDB. Starting the master (named monet-db-0-tenant) works fine, but when I attempt to clone a replica (named monet-db-1-tenant) using wlr.replicate, I receive the error: &quot;Timestamp (monet-db-0-tenant) has incorrect format&quot;
Example:
sql&gt;CALL wlr.replicate('monet-db-0-tenant');
Timestamp (monet-db-0-tenant) has incorrect format

Note: I am in an mclient session on the replica database issuing this call to wlr.replicate.
Appreciate any guidance as to why this error might be occuring.
",2
128,66261512,monetdb: properly creating and setting the configuration file .monetdb for a user other than monetdb,"My goal is to connect to a newly created database named mydb through a new user named jpriest instead of the default user monetdb.
Following this question monetdb: switch off password on mclient and the answer provided, I configured a .monetdb file in the current working directory containing the following content:
user=jpriest
password=mypassword
language=sql 

however I received the following error message
InvalidCredentialsException:checkCredentials:invalid credentials for user 'jpriest'
I am trying to follow the
Getting Started section that states :
To connect/login to the database server the first time,
you must use monetdb as user name and enter its default password: monetdb.

Once connected you may create new users, create new schemas, create tables etc.
It is also strongly recommended to change the default password of the monetdb system user
via ALTER USER SET PASSWORD command.

Since I have not managed to make it work any help is greatly appreciated!
",1,-1,-1.0,"monetdb: properly creating and setting the configuration file .monetdb for a user other than monetdb-My goal is to connect to a newly created database named mydb through a new user named jpriest instead of the default user monetdb.
Following this question monetdb: switch off password on mclient and the answer provided, I configured a .monetdb file in the current working directory containing the following content:
user=jpriest
password=mypassword
language=sql 

however I received the following error message
InvalidCredentialsException:checkCredentials:invalid credentials for user 'jpriest'
I am trying to follow the
Getting Started section that states :
To connect/login to the database server the first time,
you must use monetdb as user name and enter its default password: monetdb.

Once connected you may create new users, create new schemas, create tables etc.
It is also strongly recommended to change the default password of the monetdb system user
via ALTER USER SET PASSWORD command.

Since I have not managed to make it work any help is greatly appreciated!
",3
129,66385395,How do you use the JIT C/C++ UDF in MonetDB,"I am new to MonetDB, and want to write an SQL query in C++ that includes a C++ function as shown in the link below, but I'm not sure how to actually do this.
https://www.monetdb.org/index.php/blog/JIT_C_C%252B%252B_UDFs_in_MonetDB
If I set up an ODBC connection can I send the function along with the SQL query via the ODBC connection or is there a different method that I need to implement to be able to do this.
Sorry I'm struggling to make sense of the MonetDB documentation.
",-1,-1,-1.0,"How do you use the JIT C/C++ UDF in MonetDB-I am new to MonetDB, and want to write an SQL query in C++ that includes a C++ function as shown in the link below, but I'm not sure how to actually do this.
https://www.monetdb.org/index.php/blog/JIT_C_C%252B%252B_UDFs_in_MonetDB
If I set up an ODBC connection can I send the function along with the SQL query via the ODBC connection or is there a different method that I need to implement to be able to do this.
Sorry I'm struggling to make sense of the MonetDB documentation.
",3
130,66885760,monetdb - Row count is increasing in the target table,"I am loading data from SQL server DB table to MonetDB table using spark job. My source table has 100000 records. I am directly moving these records into monetdb table and no filter and joins at all. But once job completed I am seeing 279997 records in Target monetdb table. It has been observed , records are getting duplicated in the target table.
We have created simple etl to move one table to another table, not sure what went wrong. Please can someone help us on this.
Regards,
NarsimhaReddy
",1,-1,-1.0,"monetdb - Row count is increasing in the target table-I am loading data from SQL server DB table to MonetDB table using spark job. My source table has 100000 records. I am directly moving these records into monetdb table and no filter and joins at all. But once job completed I am seeing 279997 records in Target monetdb table. It has been observed , records are getting duplicated in the target table.
We have created simple etl to move one table to another table, not sure what went wrong. Please can someone help us on this.
Regards,
NarsimhaReddy
",4
131,67384593,Sqoop Import failing to import data from Monet DB,"Sqoop import command failing with error -

Could not load db driver class: nl.cwi.monetdb.jdbc.MonetDriver

Sqoop Command
sqoop import \
--driver nl.cwi.monetdb.jdbc.MonetDriver \
--connect &quot;jdbc:monetdb://host:port/service&quot; \
--username &lt;user&gt; \
--password &lt;pwd&gt; \
--fields-terminated-by '|' \
--lines-terminated-by '\n' \
--delete-target-dir \
--query &quot;query AND \$CONDITIONS&quot; \
--split-by AVP_KEY \
--target-dir &lt;targetdir&gt; \
--direct \
--columns columns \
-- --schema &lt;schema&gt; \
-m 2

Looked at other Sqoop import questiona and Downloaded the monetjdbc jar file and configured it using

export HADOOP_CLASSPATH=&quot;/abs/path/dir/monetdb-jdbc-3.0.jre8.jar&quot;

its failing with different error

Exception in thread &quot;main&quot; java.lang.NoSuchMethodError: java.nio.CharBuffer.mark()Ljava/nio/CharBuffer;
        at org.monetdb.mcl.parser.StartOfHeaderParser.getNextAsString(Unknown

Source)

How to debug this issue.
",-1,-1,-1.0,"Sqoop Import failing to import data from Monet DB-Sqoop import command failing with error -

Could not load db driver class: nl.cwi.monetdb.jdbc.MonetDriver

Sqoop Command
sqoop import \
--driver nl.cwi.monetdb.jdbc.MonetDriver \
--connect &quot;jdbc:monetdb://host:port/service&quot; \
--username &lt;user&gt; \
--password &lt;pwd&gt; \
--fields-terminated-by '|' \
--lines-terminated-by '\n' \
--delete-target-dir \
--query &quot;query AND \$CONDITIONS&quot; \
--split-by AVP_KEY \
--target-dir &lt;targetdir&gt; \
--direct \
--columns columns \
-- --schema &lt;schema&gt; \
-m 2

Looked at other Sqoop import questiona and Downloaded the monetjdbc jar file and configured it using

export HADOOP_CLASSPATH=&quot;/abs/path/dir/monetdb-jdbc-3.0.jre8.jar&quot;

its failing with different error

Exception in thread &quot;main&quot; java.lang.NoSuchMethodError: java.nio.CharBuffer.mark()Ljava/nio/CharBuffer;
        at org.monetdb.mcl.parser.StartOfHeaderParser.getNextAsString(Unknown

Source)

How to debug this issue.
",0
132,68009253,Monetdb on windows : unable to connect to mserver5 after upgrade,"First message on this topic.
-I had an old monetdb installation on my windows laptop
-Did the upgrade in Oct2020-SP5
-It really looks like I can start the server
C:\Program Files\MonetDB\MonetDB5\bin&gt;mserver5
# MonetDB 5 server v11.39.17 (Oct2020-SP5)
# Serving database 'demo', using 4 threads
# Compiled for amd64-pc-windows-msvc/64bit
# Found 15.862 GiB available main-memory of which we use 12.928 GiB
# Copyright (c) 1993 - July 2008 CWI.
# Copyright (c) August 2008 - 2021 MonetDB B.V., all rights reserved
# Visit https://www.monetdb.org/ for further information
# Listening for connection requests on mapi:monetdb://localhost:50000/
# MonetDB/GIS module loaded
# MonetDB/SQL module loaded
# MonetDB server is started. To stop server press Ctrl-C.

But when I want to use the mclient, it asks the user and password and then... nothing
here the stupid screen I am blocked in
Same thing with an ODBC connection : after a long time, it fails
I have no idea of what's wrong.
",-1,-1,-1.0,"Monetdb on windows : unable to connect to mserver5 after upgrade-First message on this topic.
-I had an old monetdb installation on my windows laptop
-Did the upgrade in Oct2020-SP5
-It really looks like I can start the server
C:\Program Files\MonetDB\MonetDB5\bin&gt;mserver5
# MonetDB 5 server v11.39.17 (Oct2020-SP5)
# Serving database 'demo', using 4 threads
# Compiled for amd64-pc-windows-msvc/64bit
# Found 15.862 GiB available main-memory of which we use 12.928 GiB
# Copyright (c) 1993 - July 2008 CWI.
# Copyright (c) August 2008 - 2021 MonetDB B.V., all rights reserved
# Visit https://www.monetdb.org/ for further information
# Listening for connection requests on mapi:monetdb://localhost:50000/
# MonetDB/GIS module loaded
# MonetDB/SQL module loaded
# MonetDB server is started. To stop server press Ctrl-C.

But when I want to use the mclient, it asks the user and password and then... nothing
here the stupid screen I am blocked in
Same thing with an ODBC connection : after a long time, it fails
I have no idea of what's wrong.
",3
133,70802082,Monetdb Conversion of string to blob failed,"I have a Golang User struct with PasswordHash of type *[]byte
type User struct {
    ID           UserID     `json:&quot;id,omitempty&quot; db:&quot;u_user_id&quot;`
    PasswordHash *[]byte    `json:&quot;-&quot; db:&quot;u_password_hash&quot;`
    CreatedAt    *time.Time `json:&quot;-&quot; db:&quot;u_created_at&quot;`
    
}

When i try to insert data as shown below
user := &amp;User{
        ID:        id,
        PasswordHash: &amp;hashedPassword,
    }

var result *model.User
    rows, err := db.NamedQuery(createUserQuery, user)
    if err != nil {
        panic(err)
    }

i get an Operational error:
panic: Operational error: 42000!Conversion of string '$2a$10$sODoBKGZtXzQziSDzFGJKuxZ0cSiNN38ZqD4YtmoLsWOa7K0bVXWW' to blob failed

is it that i have a wrong database type because my MonetDb type for the password column is blob
",-1,-1,-1.0,"Monetdb Conversion of string to blob failed-I have a Golang User struct with PasswordHash of type *[]byte
type User struct {
    ID           UserID     `json:&quot;id,omitempty&quot; db:&quot;u_user_id&quot;`
    PasswordHash *[]byte    `json:&quot;-&quot; db:&quot;u_password_hash&quot;`
    CreatedAt    *time.Time `json:&quot;-&quot; db:&quot;u_created_at&quot;`
    
}

When i try to insert data as shown below
user := &amp;User{
        ID:        id,
        PasswordHash: &amp;hashedPassword,
    }

var result *model.User
    rows, err := db.NamedQuery(createUserQuery, user)
    if err != nil {
        panic(err)
    }

i get an Operational error:
panic: Operational error: 42000!Conversion of string '$2a$10$sODoBKGZtXzQziSDzFGJKuxZ0cSiNN38ZqD4YtmoLsWOa7K0bVXWW' to blob failed

is it that i have a wrong database type because my MonetDb type for the password column is blob
",4
134,70811832,MonetDB Insert Statement Returning id support in Golang,"I am trying to run this insert query statement using golang which should return an id
INSERT INTO users (u_email,u_phone,u_password_hash) VALUES (?,?,?) RETURNING u_user_id;

it seems there is no support for that in MonetDB.
Well i tried to get the id by unique email when the insert is done without the &quot;RETURNING u_user_id&quot; part as below
func GetByEmail(db *sql.DB) {
    userid := `SELECT u_user_id FROM users WHERE u_email = ?;`

    var id UserResponse
    email := `baicmr@email.com`

    stmt, err := db.Prepare(userid)
    if err != nil {
        log.Panic(err)
    }
    defer stmt.Close()
    result := stmt.QueryRow(email)
    if getErr := result.Scan(&amp;id.ID); getErr != nil {
        log.Panic(getErr)
    }
    fmt.Printf(&quot;id.ID: %v\n&quot;, id.ID)
}

the result.Scan() line panics
panic: runtime error: index out of range [0] with length 0

What am i doing which is wrong
",-1,-1,-1.0,"MonetDB Insert Statement Returning id support in Golang-I am trying to run this insert query statement using golang which should return an id
INSERT INTO users (u_email,u_phone,u_password_hash) VALUES (?,?,?) RETURNING u_user_id;

it seems there is no support for that in MonetDB.
Well i tried to get the id by unique email when the insert is done without the &quot;RETURNING u_user_id&quot; part as below
func GetByEmail(db *sql.DB) {
    userid := `SELECT u_user_id FROM users WHERE u_email = ?;`

    var id UserResponse
    email := `baicmr@email.com`

    stmt, err := db.Prepare(userid)
    if err != nil {
        log.Panic(err)
    }
    defer stmt.Close()
    result := stmt.QueryRow(email)
    if getErr := result.Scan(&amp;id.ID); getErr != nil {
        log.Panic(getErr)
    }
    fmt.Printf(&quot;id.ID: %v\n&quot;, id.ID)
}

the result.Scan() line panics
panic: runtime error: index out of range [0] with length 0

What am i doing which is wrong
",2
135,70907086,invalid credentials for user 'monetdb' when using the official docker image and a .monetdb file,"How to recreate my problem
Creating the MonetDB Container
I have this setup (using windows with Docker Desktop).
Create the official monetdb docker container with the follwing command:
docker run -v $HOME/Desktop/monetdbtest:/monetdbtest -e 'MONET_DATABASE=docker' -e 'MONETDB_PASSWORD=docker' -p 50000:50000 -d topaztechnology/monetdb:latest
explanation what the command does:
creates a monetdb container with a database called 'docker' and applies the password 'docker' to the default user called 'monetdb'. It also mounts my directory monetdbtest/ into the container.
Testing the container with DBeaver
I test the connection using DBeaver with the following credentials:
JDBC URL: jdbc:monetdb://localhost:50000/docker
host: localhost
port: 50000
Database/schema: docker
username: monetdb
password: docker

this works fine, i am able to connect and can exequte sql queries with dbeaver.
Using mclient within the container to send queries



I enter the container as root with the following command:
docker exec -u root -t -i nostalgic_hodgkin /bin/bash
(replace nostalgic_hodgkin with your randomly generated container name)
2.
I navigate to my mounted directory
cd monetdbtest
then I test the connection with mclient:
mclient -h localhost -p 50000 -d docker

I get asked for user and password, so for user I enter
monetdb and for password I enter docker. It works and I am in the mclient shell, able to execute SQL queries.
3.
Since I don't want to always enter username and password I create a .monetdb file in the monetdbtest/ directory. It looks like this:
user=monetdb
password=docker


Now I should be able to use the mclient command without entering user information. So I type this command:

mclient -h localhost -p 50000 -d docker

However I get the message:
'nvalidCredentialsException:checkCredentials:invalid credentials for user 'monetdb

I did everything according to the mclient manual. Maybe I missed something?
",-1,-1,-1.0,"invalid credentials for user 'monetdb' when using the official docker image and a .monetdb file-How to recreate my problem
Creating the MonetDB Container
I have this setup (using windows with Docker Desktop).
Create the official monetdb docker container with the follwing command:
docker run -v $HOME/Desktop/monetdbtest:/monetdbtest -e 'MONET_DATABASE=docker' -e 'MONETDB_PASSWORD=docker' -p 50000:50000 -d topaztechnology/monetdb:latest
explanation what the command does:
creates a monetdb container with a database called 'docker' and applies the password 'docker' to the default user called 'monetdb'. It also mounts my directory monetdbtest/ into the container.
Testing the container with DBeaver
I test the connection using DBeaver with the following credentials:
JDBC URL: jdbc:monetdb://localhost:50000/docker
host: localhost
port: 50000
Database/schema: docker
username: monetdb
password: docker

this works fine, i am able to connect and can exequte sql queries with dbeaver.
Using mclient within the container to send queries



I enter the container as root with the following command:
docker exec -u root -t -i nostalgic_hodgkin /bin/bash
(replace nostalgic_hodgkin with your randomly generated container name)
2.
I navigate to my mounted directory
cd monetdbtest
then I test the connection with mclient:
mclient -h localhost -p 50000 -d docker

I get asked for user and password, so for user I enter
monetdb and for password I enter docker. It works and I am in the mclient shell, able to execute SQL queries.
3.
Since I don't want to always enter username and password I create a .monetdb file in the monetdbtest/ directory. It looks like this:
user=monetdb
password=docker


Now I should be able to use the mclient command without entering user information. So I type this command:

mclient -h localhost -p 50000 -d docker

However I get the message:
'nvalidCredentialsException:checkCredentials:invalid credentials for user 'monetdb

I did everything according to the mclient manual. Maybe I missed something?
",3
136,72542504,ModuleNotFoundError for monetdbe,"I created a new environment on conda and installed monetdbe using the following command
pip install monetdbe

This seems to run successfully
When i start my ide(spyder) and try the command
from monetdbe import connect

I get the following error
ModuleNotFoundError: No module named 'monetdbe'

Does anyone have any tips on what i might be doing wrong?
",-1,-1,-1.0,"ModuleNotFoundError for monetdbe-I created a new environment on conda and installed monetdbe using the following command
pip install monetdbe

This seems to run successfully
When i start my ide(spyder) and try the command
from monetdbe import connect

I get the following error
ModuleNotFoundError: No module named 'monetdbe'

Does anyone have any tips on what i might be doing wrong?
",0
137,74465040,Bulk upload using csv file to remote MonetDB server,"I have a remote MonetDB server running and I want to bulk upload a csv file as it is much faster.
Based on the params in MonetDB.R, there is a csvdump=TRUE option but I don't think it works when you are trying to do this against a remote server. The server has to be local.
https://rdrr.io/github/MonetDB/monetdb-r/man/dbWriteTable.html
First, am I correct that I can't do this and if not, is there a workaround? I have a dataframe with +5M rows so it takes a long time with insert statements rather than using COPY INTO.
When I try using csvdump=TRUE against the remote server, it can't find the csv file because it is local to computer that called the dbWriteTable command.
",-1,-1,-1.0,"Bulk upload using csv file to remote MonetDB server-I have a remote MonetDB server running and I want to bulk upload a csv file as it is much faster.
Based on the params in MonetDB.R, there is a csvdump=TRUE option but I don't think it works when you are trying to do this against a remote server. The server has to be local.
https://rdrr.io/github/MonetDB/monetdb-r/man/dbWriteTable.html
First, am I correct that I can't do this and if not, is there a workaround? I have a dataframe with +5M rows so it takes a long time with insert statements rather than using COPY INTO.
When I try using csvdump=TRUE against the remote server, it can't find the csv file because it is local to computer that called the dbWriteTable command.
",3
138,75747495,"After stopping MonetDB, mserver still appear to be running, and restart is now impossible. Does anyone know why?","I'm new to using MonetDB for my data.  My dataset is currently about 1TB in size (spread across lots of tables).
About an hour or two ago, I ran monetdbd stop db and monetdb stop db (both the dbfarm and the database are named &quot;db&quot;).
I would have expected this to stop every MonetDB process, but I just noticed via htop that there are several mserver processes still running.
Additionally, when I try to run monetdb start db, I get an error (see the below logs).  I suspect the reason monetdb crashes when I try to restart has something to do with the stop command from earlier not yet being totally finished with the shutdown procedure, but please correct me if I'm wrong.
2023-03-15 17:13:29 MSG merovingian[247517]: caught SIGTERM, starting shutdown sequence
2023-03-15 17:11:16 MSG control[247517]: (local): served status list
2023-03-15 17:13:29 MSG control[247517]: control channel closed
2023-03-15 17:13:30 MSG merovingian[247517]: Merovingian 11.45.7 stopped
2023-03-15 17:13:35 MSG merovingian[247584]: Merovingian 11.45.7 (Sep2022) starting
2023-03-15 17:13:35 MSG merovingian[247584]: monitoring dbfarm /root/db
2023-03-15 17:13:35 MSG merovingian[247584]: accepting connections on TCP socket 0.0.0.0:50000
2023-03-15 17:13:35 MSG merovingian[247584]: accepting connections on UNIX domain socket /tmp/.s.monetdb.50000
2023-03-15 17:13:35 MSG discovery[247584]: listening for UDP messages on 0.0.0.0:50000 
2023-03-15 17:13:35 MSG control[247584]: accepting connections on UNIX domain socket /tmp/.s.merovingian.50000
2023-03-15 17:13:53 MSG control[247584]: (local): served status list
2023-03-15 17:13:53 MSG merovingian[247584]: database 'db' has crashed after start on 2023-03-15 17:11:35, attempting restart, up min/avg/max: 12m/13h/1d, crash average: 1.00 0.40 0.13 (6-2=4) 
2023-03-15 17:13:54 MSG db[247593]: arguments: /usr/bin/mserver5 --dbpath=/root/db/db --set=merovingian_uri=mapi:monetdb://research:50000/db --set=mapi_listenaddr=none --set=mapi_usock=/root/db/db/.mapi.sock --set=monet_vault_key=/root/db/db/.vaultkey --set=gdk_nr_threads=12 --set=max_clients=64 --set=sql_optimizer=default_pipe
2023-03-15 17:14:00 MSG merovingian[247584]: database 'db' (-1) has crashed with signal SIGSEGV (dumped core)
2023-03-15 17:14:00 ERR control[247584]: (local): failed to fork mserver: database 'db' has crashed after starting, manual intervention needed, check monetdbd's logfile (merovingian.log) for details

Has anyone encountered this issue before?
EDIT: After searching, it appears to be a known issue.  See other GitHub issues below:
https://github.com/MonetDB/MonetDB/issues/3243
https://github.com/MonetDB/MonetDB/issues/7152
",-1,-1,-1.0,"After stopping MonetDB, mserver still appear to be running, and restart is now impossible. Does anyone know why?-I'm new to using MonetDB for my data.  My dataset is currently about 1TB in size (spread across lots of tables).
About an hour or two ago, I ran monetdbd stop db and monetdb stop db (both the dbfarm and the database are named &quot;db&quot;).
I would have expected this to stop every MonetDB process, but I just noticed via htop that there are several mserver processes still running.
Additionally, when I try to run monetdb start db, I get an error (see the below logs).  I suspect the reason monetdb crashes when I try to restart has something to do with the stop command from earlier not yet being totally finished with the shutdown procedure, but please correct me if I'm wrong.
2023-03-15 17:13:29 MSG merovingian[247517]: caught SIGTERM, starting shutdown sequence
2023-03-15 17:11:16 MSG control[247517]: (local): served status list
2023-03-15 17:13:29 MSG control[247517]: control channel closed
2023-03-15 17:13:30 MSG merovingian[247517]: Merovingian 11.45.7 stopped
2023-03-15 17:13:35 MSG merovingian[247584]: Merovingian 11.45.7 (Sep2022) starting
2023-03-15 17:13:35 MSG merovingian[247584]: monitoring dbfarm /root/db
2023-03-15 17:13:35 MSG merovingian[247584]: accepting connections on TCP socket 0.0.0.0:50000
2023-03-15 17:13:35 MSG merovingian[247584]: accepting connections on UNIX domain socket /tmp/.s.monetdb.50000
2023-03-15 17:13:35 MSG discovery[247584]: listening for UDP messages on 0.0.0.0:50000 
2023-03-15 17:13:35 MSG control[247584]: accepting connections on UNIX domain socket /tmp/.s.merovingian.50000
2023-03-15 17:13:53 MSG control[247584]: (local): served status list
2023-03-15 17:13:53 MSG merovingian[247584]: database 'db' has crashed after start on 2023-03-15 17:11:35, attempting restart, up min/avg/max: 12m/13h/1d, crash average: 1.00 0.40 0.13 (6-2=4) 
2023-03-15 17:13:54 MSG db[247593]: arguments: /usr/bin/mserver5 --dbpath=/root/db/db --set=merovingian_uri=mapi:monetdb://research:50000/db --set=mapi_listenaddr=none --set=mapi_usock=/root/db/db/.mapi.sock --set=monet_vault_key=/root/db/db/.vaultkey --set=gdk_nr_threads=12 --set=max_clients=64 --set=sql_optimizer=default_pipe
2023-03-15 17:14:00 MSG merovingian[247584]: database 'db' (-1) has crashed with signal SIGSEGV (dumped core)
2023-03-15 17:14:00 ERR control[247584]: (local): failed to fork mserver: database 'db' has crashed after starting, manual intervention needed, check monetdbd's logfile (merovingian.log) for details

Has anyone encountered this issue before?
EDIT: After searching, it appears to be a known issue.  See other GitHub issues below:
https://github.com/MonetDB/MonetDB/issues/3243
https://github.com/MonetDB/MonetDB/issues/7152
",5
139,75833280,"When MonetDB is restarted, are the previously managed INDEXes lost?","I'm using MonetDB for a research project, and for data safety reasons I frequently shutdown, backup, and then restart the database.
My question is whether this procedure has an impact on performance, specifically, are the managed INDEXes lost on restart?
I've noticed that the db directory shrinks in size on restart, so I suspect some indexes might be lost.
",0,-1,-1.0,"When MonetDB is restarted, are the previously managed INDEXes lost?-I'm using MonetDB for a research project, and for data safety reasons I frequently shutdown, backup, and then restart the database.
My question is whether this procedure has an impact on performance, specifically, are the managed INDEXes lost on restart?
I've noticed that the db directory shrinks in size on restart, so I suspect some indexes might be lost.
",5
